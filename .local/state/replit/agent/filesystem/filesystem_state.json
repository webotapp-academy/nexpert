{"file_contents":{"SECURITY_TODO.md":{"content":"# Security Implementation TODO\n\n## Current Status\n✅ **Expert Panel APIs - Functionally Complete**\n- All 10 APIs built and tested\n- Database integration working\n- JavaScript wrapper layer created\n- Ownership verification added to UPDATE/DELETE operations\n- Error logging implemented\n- Prepared statements used throughout\n\n## ⚠️ Critical Security Requirements (Must Implement Before Production)\n\n### 1. Authentication Middleware\n**Priority: CRITICAL**\n```php\n// Create: admin-panel/apis/middleware/auth.php\n// - Validate PHP session\n// - Derive user_id and role from $_SESSION\n// - Return 401 if not authenticated\n// - Return 403 if role mismatch\n```\n\n### 2. Update All APIs to Use Session-Based Auth\n**Current Issue:** APIs accept expert_id/user_id from client (IDOR vulnerability)\n\n**Required Changes:**\n- Remove `expert_id` from request parameters\n- Get `expert_id` from `$_SESSION['user_id']` after auth middleware\n- Verify `$_SESSION['role'] === 'expert'`\n\n**Files to Update:**\n- [ ] admin-panel/apis/expert/profile.php\n- [ ] admin-panel/apis/expert/pricing.php\n- [ ] admin-panel/apis/expert/availability.php\n- [ ] admin-panel/apis/expert/bookings.php\n- [ ] admin-panel/apis/expert/sessions.php\n- [ ] admin-panel/apis/expert/earnings.php\n- [ ] admin-panel/apis/expert/learners.php\n- [ ] admin-panel/apis/expert/workflows.php\n- [ ] admin-panel/apis/expert/dashboard.php\n- [ ] admin-panel/apis/expert/verification.php\n\n### 3. Additional Security Hardening\n\n#### CSRF Protection\n- Add CSRF token generation/validation\n- Include token in all state-changing requests\n- Validate token on POST/PUT/DELETE\n\n#### Input Validation\n- Validate booking status against whitelist\n- Validate numeric ranges (amounts, durations)\n- Sanitize file upload paths\n- Validate datetime formats\n\n#### Resource Authorization\n- Sessions resource upload: Verify caller is booking's expert or learner\n- Availability updates: Verify expert owns the availability slots\n- All mutations: Double-check resource ownership\n\n#### HTTP Status Codes\n- 401 Unauthorized for missing/invalid auth\n- 403 Forbidden for insufficient permissions\n- 400 Bad Request for invalid input\n- 500 Internal Server Error (logged only)\n\n## Implementation Order\n\n1. **Phase 1: Authentication System** (Required First)\n   - Create session-based login system\n   - Build auth middleware\n   - Update JavaScript to handle sessions\n\n2. **Phase 2: API Updates** (After Phase 1)\n   - Update all expert APIs to use session-derived IDs\n   - Remove client-supplied expert_id parameters\n   - Add role verification\n\n3. **Phase 3: Security Hardening** (Final)\n   - CSRF protection\n   - Input validation\n   - Status whitelisting\n   - Complete authorization checks\n\n## Current Development Workaround\nFor development/testing purposes, APIs currently accept expert_id=1 from client.\n**⚠️ DO NOT USE IN PRODUCTION ⚠️**\n","size_bytes":2857},"home.php":{"content":"<?php\n$page_title = \"Nexpert.ai - Global Expert Learning Platform\";\n$panel_type = \"home\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <!-- Hero Section -->\n    <section class=\"bg-gradient-to-br from-blue-600 to-blue-700 py-12 md:py-16 relative overflow-hidden\">\n        <!-- Animated Background Objects -->\n        <div class=\"absolute inset-0 overflow-hidden\">\n            <!-- Gradient Orbs -->\n            <div class=\"absolute top-20 left-10 w-72 h-72 bg-blue-400/30 rounded-full blur-3xl animate-float\"></div>\n            <div class=\"absolute bottom-20 right-10 w-96 h-96 bg-purple-400/30 rounded-full blur-3xl animate-float-delay\"></div>\n            <div class=\"absolute top-1/2 left-1/3 w-64 h-64 bg-indigo-400/20 rounded-full blur-2xl animate-pulse-slow\"></div>\n            <div class=\"absolute top-40 right-1/3 w-80 h-80 bg-pink-400/20 rounded-full blur-3xl animate-float-slow\"></div>\n            <div class=\"absolute bottom-32 left-1/2 w-56 h-56 bg-cyan-400/25 rounded-full blur-2xl animate-float\"></div>\n            \n            <!-- Floating Icons -->\n            <div class=\"absolute top-32 right-20 animate-float-slow\">\n                <svg class=\"w-16 h-16 text-white/20\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute bottom-40 left-1/4 animate-float\">\n                <svg class=\"w-12 h-12 text-white/20\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute top-1/3 right-1/4 animate-float-delay\">\n                <svg class=\"w-14 h-14 text-white/20\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute top-1/4 left-16 animate-float-slow\">\n                <svg class=\"w-10 h-10 text-white/15\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute bottom-1/4 right-16 animate-float\">\n                <svg class=\"w-12 h-12 text-white/15\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z\" clip-rule=\"evenodd\"></path>\n                    <path d=\"M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute top-2/3 left-1/3 animate-float-delay\">\n                <svg class=\"w-11 h-11 text-white/15\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z\"></path>\n                    <path fill-rule=\"evenodd\" d=\"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute top-1/2 right-12 animate-float-slow\">\n                <svg class=\"w-13 h-13 text-white/15\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute bottom-1/3 left-20 animate-pulse-slow\">\n                <svg class=\"w-10 h-10 text-white/15\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n        </div>\n\n        <div class=\"max-w-5xl mx-auto px-4 relative z-10\">\n            <!-- Main Headline -->\n            <div class=\"text-center mb-8\">\n                <h1 class=\"text-4xl md:text-5xl font-bold text-white mb-3 leading-tight\">\n                    Find the Expert Who Gets You Results\n                </h1>\n                <p class=\"text-lg md:text-xl text-blue-100 max-w-2xl mx-auto\">\n                    Type what you need — Nexpert's AI will match you with the best fit\n                </p>\n            </div>\n            \n            <!-- Glassy Background Container -->\n            <div class=\"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20 shadow-2xl\">\n                <!-- AI Search Box -->\n                <div class=\"max-w-3xl mx-auto mb-6\">\n                    <form id=\"expertSearchForm\" class=\"relative\">\n                        <input id=\"searchInput\" type=\"text\" \n                               placeholder=\"\" \n                               class=\"w-full pl-6 pr-44 py-4 text-base border-0 rounded-2xl bg-white placeholder-gray-400 text-gray-900 focus:ring-4 focus:ring-blue-300 focus:outline-none shadow-2xl\">\n                        <div class=\"absolute inset-y-0 right-0 flex items-center pr-2\">\n                            <button type=\"submit\" class=\"bg-gradient-to-r from-orange-400 to-orange-500 text-white px-6 py-2.5 rounded-xl hover:from-orange-500 hover:to-orange-600 transition font-semibold shadow-lg flex items-center space-x-2\">\n                                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                                </svg>\n                                <span class=\"hidden md:inline\">Smart Match</span>\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <!-- Popular Searches -->\n                <div class=\"text-center mb-5\">\n                    <p class=\"text-blue-100 text-sm mb-3\">Popular searches</p>\n                    <div class=\"flex flex-wrap justify-center gap-2\">\n                        <button onclick=\"searchForExpertise('UX Design')\" class=\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-full border border-white/30 transition flex items-center space-x-2 backdrop-blur-sm\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122\"></path>\n                            </svg>\n                            <span>UX Design</span>\n                        </button>\n                        <button onclick=\"searchForExpertise('Business Strategy')\" class=\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-full border border-white/30 transition flex items-center space-x-2 backdrop-blur-sm\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"></path>\n                            </svg>\n                            <span>Business Strategy</span>\n                        </button>\n                        <button onclick=\"searchForExpertise('Data Science')\" class=\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-full border border-white/30 transition flex items-center space-x-2 backdrop-blur-sm\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z\"></path>\n                            </svg>\n                            <span>Data Science</span>\n                        </button>\n                        <button onclick=\"searchForExpertise('Digital Marketing')\" class=\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-full border border-white/30 transition backdrop-blur-sm\">\n                            <span>Digital Marketing</span>\n                        </button>\n                    </div>\n                </div>\n                \n                <!-- Trust Indicator -->\n                <div class=\"text-center\">\n                    <p class=\"text-blue-100 text-base\">\n                        2,000+ learners already matched with 100+ verified experts\n                    </p>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Expert Categories Section -->\n    <section id=\"categories\" class=\"py-20 bg-gray-50\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <!-- Header -->\n            <div class=\"text-center mb-16\">\n                <div class=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl mb-6\">\n                    <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"></path>\n                    </svg>\n                </div>\n                <h3 class=\"text-4xl font-bold text-gray-800 mb-4\">Expert Categories</h3>\n                <p class=\"text-lg text-gray-600 max-w-3xl mx-auto\">\n                    Find the right expert for your specific needs across our comprehensive categories\n                </p>\n            </div>\n            \n            <!-- Category Cards Grid -->\n            <div class=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                <!-- Coaches -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">Coaches</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Personal development, life coaching, career coaching, executive coaching</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-blue-600 bg-blue-50 px-3 py-1 rounded-full\">1,200+ Experts</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-blue-600 font-semibold text-sm hover:text-blue-700 flex items-center\">\n                            Explore Coaches\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Mentors -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-green-600 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">Mentors</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Industry mentorship, startup guidance, technical mentoring, leadership development</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-green-600 bg-green-50 px-3 py-1 rounded-full\">800+ Experts</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-green-600 font-semibold text-sm hover:text-green-700 flex items-center\">\n                            Find Mentors\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Consultants -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-purple-600 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">Consultants</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Business consulting, strategy, management consulting, specialized advisory</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-purple-600 bg-purple-50 px-3 py-1 rounded-full\">600+ Experts</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-purple-600 font-semibold text-sm hover:text-purple-700 flex items-center\">\n                            Meet Consultants\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Trainers -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-orange-500 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">Trainers</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Skill training, technical training, fitness training, corporate training</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-orange-600 bg-orange-50 px-3 py-1 rounded-full\">900+ Experts</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-orange-600 font-semibold text-sm hover:text-orange-700 flex items-center\">\n                            Explore Trainers\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Freelancers -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"></path>\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">Freelancers</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Project-based expertise, specialized skills, creative services, technical solutions</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full\">1,500+ Experts</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-indigo-600 font-semibold text-sm hover:text-indigo-700 flex items-center\">\n                            Find Freelancers\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- All Categories -->\n                <div class=\"bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition\">\n                    <div class=\"w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mb-4\">\n                        <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"></path>\n                        </svg>\n                    </div>\n                    <h4 class=\"text-xl font-bold text-gray-800 mb-3\">All Categories</h4>\n                    <p class=\"text-gray-600 text-sm mb-4\">Browse all expert categories and find the perfect match for your learning goals</p>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-xs font-medium text-gray-600 bg-gray-100 px-3 py-1 rounded-full\">5,000+ Total</span>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-800 font-semibold text-sm hover:text-gray-900 flex items-center\">\n                            View All\n                            <svg class=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- How It Works Section -->\n    <section id=\"how-it-works\" class=\"py-20 bg-blue-50\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"text-center mb-16\">\n                <h3 class=\"text-4xl font-bold text-gray-800 mb-4\">How Nexpert.ai Works</h3>\n                <p class=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                    Get started in 3 simple steps and connect with the right expert for your goals\n                </p>\n            </div>\n            \n            <div class=\"grid md:grid-cols-3 gap-12\">\n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-primary rounded-full flex items-center justify-center mx-auto mb-6\">\n                        <span class=\"text-2xl font-bold text-white\">1</span>\n                    </div>\n                    <h4 class=\"text-xl font-semibold text-gray-800 mb-4\">Browse & Choose</h4>\n                    <p class=\"text-gray-600\">Search through our curated list of verified experts across 5 categories. Read reviews, check availability, and find your perfect match.</p>\n                </div>\n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-emerald rounded-full flex items-center justify-center mx-auto mb-6\">\n                        <span class=\"text-2xl font-bold text-white\">2</span>\n                    </div>\n                    <h4 class=\"text-xl font-semibold text-gray-800 mb-4\">Book & Pay</h4>\n                    <p class=\"text-gray-600\">Schedule your session at a convenient time. Make secure payments through our integrated payment gateway with full refund protection.</p>\n                </div>\n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-accent rounded-full flex items-center justify-center mx-auto mb-6\">\n                        <span class=\"text-2xl font-bold text-white\">3</span>\n                    </div>\n                    <h4 class=\"text-xl font-semibold text-gray-800 mb-4\">Learn & Grow</h4>\n                    <p class=\"text-gray-600\">Join your 1-on-1 video session, receive personalized guidance, assignments, and track your progress over time.</p>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Featured Experts Section -->\n    <section id=\"experts\" class=\"py-20 bg-white\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"text-center mb-16\">\n                <h3 class=\"text-4xl font-bold text-gray-800 mb-4\">Meet Our Top Experts</h3>\n                <p class=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                    Connect with India's most experienced professionals who are passionate about sharing their knowledge\n                </p>\n            </div>\n            \n            <div id=\"featured-experts-grid\" class=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                <!-- Experts will be loaded dynamically -->\n                <div class=\"col-span-full text-center py-8\">\n                    <div class=\"inline-block\">\n                        <div class=\"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto\"></div>\n                        <p class=\"text-gray-600 mt-4\">Loading top experts...</p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"text-center mt-12\">\n                <a href=\"?panel=learner&page=browse-experts\" class=\"bg-primary text-white px-8 py-3 rounded-lg hover:bg-secondary transition text-lg font-semibold\">\n                    View All Experts\n                </a>\n            </div>\n        </div>\n    </section>\n\n    <!-- Success Stories Section -->\n    <section id=\"testimonials\" class=\"py-20 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"text-center mb-16\">\n                <h3 class=\"text-4xl font-bold text-gray-800 mb-4\">Success Stories</h3>\n                <p class=\"text-xl text-gray-600 max-w-3xl mx-auto\">\n                    Real learners, real results. See how our experts have transformed careers across India\n                </p>\n            </div>\n            \n            <!-- Continuous Scrolling Container -->\n            <div class=\"relative\">\n                <div class=\"flex animate-scroll-testimonials\">\n                    <!-- First Set of Testimonials -->\n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_4d71624f.jpg\" alt=\"Aaryan Singh\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Aaryan Singh</h5>\n                                    <p class=\"text-gray-600 text-sm\">Software Engineer, Bangalore</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Priya's UX coaching helped me transition from development to design. I landed a senior designer role at a unicorn startup within 3 months!\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_478267b3.jpg\" alt=\"Kavya Reddy\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Kavya Reddy</h5>\n                                    <p class=\"text-gray-600 text-sm\">Entrepreneur, Hyderabad</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Rajesh's business consultation was invaluable. His guidance helped me secure ₹2 crore in Series A funding for my startup.\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_c9eb9be1.jpg\" alt=\"Rohit Agarwal\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Rohit Agarwal</h5>\n                                    <p class=\"text-gray-600 text-sm\">Marketing Manager, Mumbai</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Anita's digital marketing training transformed our D2C brand. We achieved 300% growth in online sales within 6 months.\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n\n                    <!-- Duplicate Set for Seamless Loop -->\n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_4d71624f.jpg\" alt=\"Aaryan Singh\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Aaryan Singh</h5>\n                                    <p class=\"text-gray-600 text-sm\">Software Engineer, Bangalore</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Priya's UX coaching helped me transition from development to design. I landed a senior designer role at a unicorn startup within 3 months!\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_478267b3.jpg\" alt=\"Kavya Reddy\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Kavya Reddy</h5>\n                                    <p class=\"text-gray-600 text-sm\">Entrepreneur, Hyderabad</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Rajesh's business consultation was invaluable. His guidance helped me secure ₹2 crore in Series A funding for my startup.\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex-shrink-0 w-96 mx-4\">\n                        <div class=\"bg-white rounded-xl p-8 shadow-lg h-full\">\n                            <div class=\"flex items-center mb-4\">\n                                <img src=\"attached_assets/stock_images/diverse_professional_c9eb9be1.jpg\" alt=\"Rohit Agarwal\" class=\"w-16 h-16 rounded-full mr-4 object-cover\">\n                                <div>\n                                    <h5 class=\"font-semibold text-gray-800\">Rohit Agarwal</h5>\n                                    <p class=\"text-gray-600 text-sm\">Marketing Manager, Mumbai</p>\n                                </div>\n                            </div>\n                            <p class=\"text-gray-700 mb-4\">\"Anita's digital marketing training transformed our D2C brand. We achieved 300% growth in online sales within 6 months.\"</p>\n                            <div class=\"flex text-yellow-400 text-sm\">★★★★★</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n\n    <!-- Call to Action Section -->\n    <section class=\"py-20 bg-gradient-to-r from-primary to-secondary\">\n        <div class=\"max-w-4xl mx-auto text-center px-4\">\n            <h3 class=\"text-4xl font-bold text-white mb-6\">Ready to Accelerate Your Growth?</h3>\n            <p class=\"text-xl text-blue-100 mb-8\">\n                Join thousands of learners who have transformed their careers with Nexpert.ai\n            </p>\n            <div class=\"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6\">\n                <a href=\"?panel=learner&page=auth\" class=\"bg-white text-primary px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition\">\n                    Start Learning Today\n                </a>\n                <a href=\"?panel=expert&page=auth\" class=\"border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-primary transition\">\n                    Become an Expert\n                </a>\n            </div>\n        </div>\n    </section>\n\n    <!-- Footer -->\n    <footer class=\"bg-gradient-to-br from-gray-900 via-slate-900 to-gray-800 text-white py-20 relative overflow-hidden\">\n        <div class=\"absolute inset-0 bg-black/20\"></div>\n        <div class=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"></div>\n        \n        <!-- Animated Background Objects -->\n        <div class=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <!-- Gradient Orbs -->\n            <div class=\"absolute top-10 right-10 w-32 h-32 bg-gradient-to-br from-blue-600/10 to-purple-600/10 rounded-full blur-3xl animate-float\"></div>\n            <div class=\"absolute bottom-10 left-10 w-40 h-40 bg-gradient-to-br from-purple-600/10 to-pink-600/10 rounded-full blur-3xl animate-float-delay\"></div>\n            <div class=\"absolute top-1/2 right-1/4 w-36 h-36 bg-gradient-to-br from-indigo-600/10 to-blue-600/10 rounded-full blur-3xl animate-pulse-slow\"></div>\n            <div class=\"absolute bottom-1/4 right-1/3 w-28 h-28 bg-gradient-to-br from-cyan-600/10 to-teal-600/10 rounded-full blur-2xl animate-float-slow\"></div>\n            \n            <!-- Floating Icons -->\n            <div class=\"absolute top-20 left-1/4 animate-float-slow opacity-10\">\n                <svg class=\"w-12 h-12 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute bottom-32 right-20 animate-float opacity-10\">\n                <svg class=\"w-10 h-10 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute top-1/3 right-12 animate-float-delay opacity-10\">\n                <svg class=\"w-11 h-11 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\"></path>\n                </svg>\n            </div>\n            <div class=\"absolute bottom-16 left-1/3 animate-pulse-slow opacity-10\">\n                <svg class=\"w-9 h-9 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n        </div>\n        \n        <div class=\"max-w-7xl mx-auto px-4 relative z-10\">\n            <div class=\"grid md:grid-cols-4 gap-12\">\n                <div class=\"md:col-span-2\">\n                    <div class=\"flex items-center mb-6\">\n                        <div class=\"w-12 h-12 bg-gradient-to-r from-primary to-purple-600 rounded-xl flex items-center justify-center mr-4 shadow-lg\">\n                            <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <h4 class=\"text-3xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent\">Nexpert.ai</h4>\n                            <span class=\"text-sm bg-gradient-to-r from-primary to-purple-600 text-white px-2 py-1 rounded-full\">Global Platform</span>\n                        </div>\n                    </div>\n                    <p class=\"text-gray-300 mb-8 max-w-md leading-relaxed text-lg\">\n                        The world's premier platform connecting learners with expert coaches, mentors, consultants, trainers, and freelancers worldwide.\n                    </p>\n                    \n                    <!-- Stats -->\n                    <div class=\"grid grid-cols-2 gap-6 mb-8\">\n                        <div class=\"text-center bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10\">\n                            <div class=\"text-2xl font-bold text-white\">5,000+</div>\n                            <div class=\"text-gray-400 text-sm\">Global Experts</div>\n                        </div>\n                        <div class=\"text-center bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10\">\n                            <div class=\"text-2xl font-bold text-white\">50,000+</div>\n                            <div class=\"text-gray-400 text-sm\">Active Learners</div>\n                        </div>\n                    </div>\n                    \n                    <!-- Social Links -->\n                    <div class=\"flex space-x-4\">\n                        <a href=\"#\" class=\"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition duration-300 hover:scale-110 group\">\n                            <svg class=\"w-5 h-5 text-gray-400 group-hover:text-white transition duration-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition duration-300 hover:scale-110 group\">\n                            <svg class=\"w-5 h-5 text-gray-400 group-hover:text-white transition duration-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition duration-300 hover:scale-110 group\">\n                            <svg class=\"w-5 h-5 text-gray-400 group-hover:text-white transition duration-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition duration-300 hover:scale-110 group\">\n                            <svg class=\"w-5 h-5 text-gray-400 group-hover:text-white transition duration-300\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91-.11-.971-.185-2.464.04-3.527.205-.921 1.275-5.414 1.275-5.414s-.325-.654-.325-1.62c0-1.518.877-2.653 1.972-2.653.93 0 1.38.695 1.38 1.533 0 .934-.592 2.33-.898 3.622-.255 1.075.538 1.952 1.602 1.952 1.922 0 3.399-2.031 3.399-4.974 0-2.6-1.87-4.416-4.538-4.416-3.092 0-4.916 2.322-4.916 4.72 0 .934.358 1.938.808 2.483a.285.285 0 01.069.272c-.076.315-.245 1.005-.278 1.145-.043.184-.141.223-.325.134-1.249-.581-2.03-2.407-2.03-3.874 0-3.154 2.292-6.052 6.608-6.052 3.469 0 6.165 2.473 6.165 5.776 0 3.447-2.173 6.22-5.19 6.22-1.013 0-1.969-.525-2.291-1.148l-.623 2.378c-.226.869-.835 1.958-1.244 2.621.937.29 1.931.446 2.962.446 6.354 0 11.5-5.146 11.5-11.5C24 5.896 18.854.75 12.5.75z\"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n                \n                <div>\n                    <h5 class=\"font-bold mb-6 text-xl flex items-center\">\n                        <span class=\"w-2 h-2 bg-primary rounded-full mr-3\"></span>\n                        Categories\n                    </h5>\n                    <ul class=\"space-y-3\">\n                        <li><a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Coaches\n                        </a></li>\n                        <li><a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Mentors\n                        </a></li>\n                        <li><a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Consultants\n                        </a></li>\n                        <li><a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Trainers\n                        </a></li>\n                        <li><a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Freelancers\n                        </a></li>\n                    </ul>\n                </div>\n                \n                <div>\n                    <h5 class=\"font-bold mb-6 text-xl flex items-center\">\n                        <span class=\"w-2 h-2 bg-emerald-500 rounded-full mr-3\"></span>\n                        Support\n                    </h5>\n                    <ul class=\"space-y-3\">\n                        <li><a href=\"#\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Help Center\n                        </a></li>\n                        <li><a href=\"#\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Contact Us\n                        </a></li>\n                        <li><a href=\"#\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Privacy Policy\n                        </a></li>\n                        <li><a href=\"#\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Terms of Service\n                        </a></li>\n                        <li><a href=\"#\" class=\"text-gray-300 hover:text-white transition duration-300 flex items-center group\">\n                            <svg class=\"w-4 h-4 mr-2 opacity-0 group-hover:opacity-100 transition duration-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"></path>\n                            </svg>\n                            Refund Policy\n                        </a></li>\n                    </ul>\n                </div>\n            </div>\n            \n            <!-- Bottom Bar -->\n            <div class=\"border-t border-gray-700/50 mt-16 pt-8\">\n                <div class=\"flex flex-col md:flex-row justify-between items-center\">\n                    <div class=\"flex items-center space-x-4 mb-4 md:mb-0\">\n                        <p class=\"text-gray-400 flex items-center\">\n                            <span class=\"mr-2\">©</span>\n                            <span>2025 Nexpert.ai. All rights reserved.</span>\n                        </p>\n                        <div class=\"flex items-center bg-white/5 backdrop-blur-sm rounded-full px-3 py-1 border border-white/10\">\n                            <span class=\"text-sm text-gray-300\">Made with</span>\n                            <span class=\"text-red-400 mx-1\">❤️</span>\n                            <span class=\"text-sm text-gray-300\">globally</span>\n                            <span class=\"ml-2\">🌍</span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex items-center space-x-6\">\n                        <div class=\"flex items-center text-gray-400 text-sm\">\n                            <div class=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></div>\n                            <span>All systems operational</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </footer>\n    <style>\n        @keyframes float {\n            0%, 100% { transform: translateY(0) translateX(0); }\n            50% { transform: translateY(-20px) translateX(10px); }\n        }\n\n        @keyframes float-delay {\n            0%, 100% { transform: translateY(0) translateX(0); }\n            50% { transform: translateY(20px) translateX(-10px); }\n        }\n\n        @keyframes float-slow {\n            0%, 100% { transform: translateY(0) rotate(0deg); }\n            50% { transform: translateY(-30px) rotate(10deg); }\n        }\n\n        @keyframes pulse-slow {\n            0%, 100% { opacity: 0.3; transform: scale(1); }\n            50% { opacity: 0.5; transform: scale(1.1); }\n        }\n\n        @keyframes scroll-testimonials {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-50%); }\n        }\n\n        .animate-float {\n            animation: float 8s ease-in-out infinite;\n        }\n\n        .animate-float-delay {\n            animation: float-delay 10s ease-in-out infinite;\n        }\n\n        .animate-float-slow {\n            animation: float-slow 12s ease-in-out infinite;\n        }\n\n        .animate-pulse-slow {\n            animation: pulse-slow 6s ease-in-out infinite;\n        }\n\n        .animate-scroll-testimonials {\n            animation: scroll-testimonials 30s linear infinite;\n        }\n\n        .animate-scroll-testimonials:hover {\n            animation-play-state: paused;\n        }\n    </style>\n\n    <script>\n    // Typing effect for search placeholder\n    const placeholderTexts = [\n        'e.g. Career Change',\n        'e.g. Parenting Advice',\n        'e.g. Fitness Coaching',\n        'e.g. Business Strategy',\n        'e.g. Language Learning',\n        'e.g. Personal Finance'\n    ];\n    \n    let currentTextIndex = 0;\n    let currentCharIndex = 0;\n    let isDeleting = false;\n    let typingSpeed = 100;\n    \n    function typeEffect() {\n        const searchInput = document.getElementById('searchInput');\n        if (!searchInput || searchInput === document.activeElement) return;\n        \n        const currentText = placeholderTexts[currentTextIndex];\n        \n        if (isDeleting) {\n            searchInput.placeholder = currentText.substring(0, currentCharIndex - 1);\n            currentCharIndex--;\n            typingSpeed = 50;\n        } else {\n            searchInput.placeholder = currentText.substring(0, currentCharIndex + 1);\n            currentCharIndex++;\n            typingSpeed = 100;\n        }\n        \n        if (!isDeleting && currentCharIndex === currentText.length) {\n            isDeleting = true;\n            typingSpeed = 2000;\n        } else if (isDeleting && currentCharIndex === 0) {\n            isDeleting = false;\n            currentTextIndex = (currentTextIndex + 1) % placeholderTexts.length;\n            typingSpeed = 500;\n        }\n        \n        setTimeout(typeEffect, typingSpeed);\n    }\n    \n    // Start typing effect when page loads\n    document.addEventListener('DOMContentLoaded', function() {\n        setTimeout(typeEffect, 1000);\n    });\n\n    // Expert search functionality\n    document.getElementById('expertSearchForm').addEventListener('submit', function(e) {\n        e.preventDefault();\n        const query = document.getElementById('searchInput').value.trim();\n        if (query) {\n            window.location.href = `?panel=learner&page=browse-experts&search=${encodeURIComponent(query)}`;\n        }\n    });\n\n    function searchForExpertise(query) {\n        document.getElementById('searchInput').value = query;\n        window.location.href = `?panel=learner&page=browse-experts&search=${encodeURIComponent(query)}`;\n    }\n\n    // Load featured experts from database\n    async function loadFeaturedExperts() {\n        try {\n            const response = await fetch('/admin-panel/apis/learner/browse-experts.php?sort_by=latest&limit=6');\n            const result = await response.json();\n            \n            if (result.success && result.data.length > 0) {\n                const grid = document.getElementById('featured-experts-grid');\n                grid.innerHTML = '';\n                \n                result.data.slice(0, 6).forEach(expert => {\n                    const skills = Array.isArray(expert.skills) ? expert.skills : (expert.skills ? expert.skills.split(',').map(s => s.trim()) : []);\n                    const skillColors = ['blue', 'purple', 'orange', 'indigo', 'emerald', 'pink'];\n                    const randomColor = skillColors[Math.floor(Math.random() * skillColors.length)];\n                    \n                    const stars = '★'.repeat(Math.floor(expert.avg_rating || 5)) + '☆'.repeat(5 - Math.floor(expert.avg_rating || 5));\n                    \n                    const expertCard = `\n                        <div class=\"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition duration-300 border\">\n                            <div class=\"p-6\">\n                                <div class=\"flex items-center mb-4\">\n                                    <img src=\"${expert.profile_photo || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(expert.name) + '&background=3B82F6&color=fff&size=200'}\" \n                                         alt=\"${escapeHtml(expert.name)}\" \n                                         class=\"w-20 h-20 rounded-full mr-4 object-cover\">\n                                    <div>\n                                        <h4 class=\"text-xl font-semibold text-gray-800\">${escapeHtml(expert.name)}</h4>\n                                        <p class=\"text-gray-600 text-sm\">${escapeHtml(expert.professional_title || expert.expert_type || 'Expert')}</p>\n                                        <div class=\"flex items-center mt-1\">\n                                            <div class=\"flex text-yellow-400 text-sm\">${stars}</div>\n                                            <span class=\"text-gray-500 text-xs ml-1\">(${expert.avg_rating || '5.0'}) • ${expert.review_count || expert.total_reviews || 0} reviews</span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <p class=\"text-gray-700 text-sm mb-4 line-clamp-2\">${escapeHtml(expert.bio || expert.tagline || 'Expert professional')}</p>\n                                <div class=\"flex flex-wrap gap-1 mb-4\">\n                                    ${skills.slice(0, 3).map(skill => \n                                        `<span class=\"px-2 py-1 bg-${randomColor}-100 text-${randomColor}-800 text-xs rounded-full\">${escapeHtml(skill)}</span>`\n                                    ).join('')}\n                                </div>\n                                <div class=\"flex justify-between items-center\">\n                                    <span class=\"text-lg font-semibold text-primary\">₹${expert.hourly_rate || '0'}/hour</span>\n                                    <a href=\"?panel=learner&page=expert-profile&expert_id=${expert.id}\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm\">\n                                        View Profile\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    \n                    grid.innerHTML += expertCard;\n                });\n            } else {\n                document.getElementById('featured-experts-grid').innerHTML = '<div class=\"col-span-full text-center py-8\"><p class=\"text-gray-600\">No experts available at the moment.</p></div>';\n            }\n        } catch (error) {\n            console.error('Error loading featured experts:', error);\n            document.getElementById('featured-experts-grid').innerHTML = '<div class=\"col-span-full text-center py-8\"><p class=\"text-gray-600\">Error loading experts. Please try again later.</p></div>';\n        }\n    }\n\n    // Escape HTML to prevent XSS\n    function escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n\n    // Load featured experts on page load\n    document.addEventListener('DOMContentLoaded', loadFeaturedExperts);\n    </script>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":60430},"index.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Main router for Nexpert.ai application\n// If no panel specified, show homepage\nif (!isset($_GET['panel']) && !isset($_GET['page'])) {\n    $panel = '';\n    $page = 'home';\n} else {\n    $panel = $_GET['panel'] ?? 'learner';\n    \n    // Set default page based on panel\n    if (!isset($_GET['page'])) {\n        if ($panel === 'admin') {\n            $page = 'dashboard';\n        } elseif ($panel === 'expert') {\n            $page = 'dashboard';\n        } elseif ($panel === 'learner') {\n            $page = 'dashboard';\n        } else {\n            $page = 'home';\n        }\n    } else {\n        $page = $_GET['page'];\n    }\n}\n\n// Define available pages for each panel\n$learner_pages = ['auth', 'profile', 'browse-experts', 'expert-profile', 'booking', 'payments', 'dashboard', 'notifications', 'my-programs'];\n$expert_pages = ['auth', 'dashboard', 'profile-setup', 'kyc', 'workflow-builder', 'booking-management', 'session-execution', 'earnings', 'learner-management', 'notifications', 'settings', 'my-programs'];\n$admin_pages = ['auth', 'dashboard', 'experts', 'users', 'payouts', 'bookings', 'payments', 'kyc-verification', 'settings'];\n\n// Function to render 404 page\nfunction render_404() {\n    http_response_code(404);\n    echo '<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Page Not Found - Nexpert.ai</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n</head>\n<body class=\"bg-gray-50 min-h-screen flex items-center justify-center\">\n    <div class=\"text-center\">\n        <h1 class=\"text-6xl font-bold text-gray-300 mb-4\">404</h1>\n        <h2 class=\"text-2xl font-semibold text-gray-800 mb-4\">Page Not Found</h2>\n        <p class=\"text-gray-600 mb-8\">The page you are looking for does not exist.</p>\n        <a href=\"/\" class=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition\">Go Home</a>\n    </div>\n</body>\n</html>';\n}\n\n// Route to appropriate page\nif ($page === 'home') {\n    if (file_exists('home.php')) {\n        include 'home.php';\n    } else {\n        render_404();\n    }\n} elseif ($panel === 'learner' && in_array($page, $learner_pages)) {\n    $file_path = \"learner/learner-{$page}.php\";\n    if (file_exists($file_path)) {\n        include $file_path;\n    } else {\n        render_404();\n    }\n} elseif ($panel === 'expert' && in_array($page, $expert_pages)) {\n    $file_path = \"expert/expert-{$page}.php\";\n    if (file_exists($file_path)) {\n        include $file_path;\n    } else {\n        render_404();\n    }\n} elseif ($panel === 'admin' && in_array($page, $admin_pages)) {\n    // Check admin authentication\n    $isAdminLoggedIn = isset($_SESSION['logged_in']) && $_SESSION['logged_in'] === true && $_SESSION['role'] === 'admin';\n    \n    // Allow access to auth page without login\n    if ($page === 'auth' || $isAdminLoggedIn) {\n        $file_path = \"admin/admin-{$page}.php\";\n        if (file_exists($file_path)) {\n            include $file_path;\n        } else {\n            render_404();\n        }\n    } else {\n        // Redirect to admin login\n        header('Location: ?panel=admin&page=auth');\n        exit;\n    }\n} else {\n    render_404();\n}\n?>","size_bytes":3259},"replit.md":{"content":"# Nexpert.ai\n\n## Overview\nNexpert.ai is a global expert learning platform connecting learners with subject matter experts. It features distinct learner and expert panels, facilitating live sessions, structured learning, payment processing, and comprehensive management tools. The platform aims to provide a worldwide reach for knowledge exchange.\n\n## Recent Changes (October 2025)\n- **Homepage Dynamic Experts**: \"Meet Our Top Experts\" section now displays real experts from database using AJAX, showing latest 6 experts with profile photos, ratings, skills, and hourly rates\n- **Homepage Animations**: Added animated gradient orbs and floating icons to hero section and footer for modern, engaging UI\n- **AI-Style Loader**: Browse-experts page features animated AI loader with rotating rings, pulsing center, and orbiting dots during expert loading\n- **Learner Panel Implementation**: Complete learner authentication, dashboard, profile, and browse-experts functionality with database integration\n- **Timezone Configuration**: Default timezone set to IST (Asia/Kolkata) across entire platform (PHP and MySQL)\n- **Security Enhancements**: XSS prevention with HTML escaping, secure session management, login gates on protected pages\n- **Expert Registration Flow**: Registration now redirects to settings page for streamlined onboarding\n- **Settings Page Database Integration**: All forms (profile, bank details, image uploads) now save data to database with real-time validation\n- **Profile Photo Upload**: Secure image upload with server-side MIME validation using finfo\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\nThe frontend uses pure HTML/CSS with Tailwind CSS for styling and vanilla JavaScript for interactivity. It employs a multi-panel layout for learners and experts, with query parameter-based routing. The design is mobile-first, utilizing Tailwind's responsive utilities and a custom color scheme (primary blue, accent orange, secondary navy).\n\n### Backend Architecture\nThe backend is powered by PHP 8.2.23 and connects to a remote Hostinger MySQL database via a secure PDO connection. Database credentials are managed through Replit environment variables. The API structure is organized within the `admin-panel/apis/` directory, featuring distinct endpoints for admin, expert, and learner functionalities.\n\n### Authentication & User Management\nThe platform supports multi-modal authentication including email/password, Google OAuth, and OTP-based login. It implements role-based access with distinct flows for learners and experts, comprehensive expert profile setup with KYC verification, and browser-based session management with CSRF protection and secure cookie configuration.\n\n### Booking & Session Management\nFeatures include an interactive date/time picker for scheduling, real-time expert availability management, and a live session interface for resource sharing and note-taking. The system manages the complete booking lifecycle from request to completion.\n\n### Payment Processing\nThe platform is designed to integrate with payment gateways like Razorpay, supporting per-session, package, and subscription pricing models. It includes an earnings dashboard for experts and robust transaction management.\n\n### Content & Learning Management\nKey features include an AI-assisted workflow builder for structured learning paths, an assignment system for task tracking, resource management for file sharing, and progress tracking for learners.\n\n### Communication & Notifications\nThe system provides real-time notifications for bookings and updates, direct messaging between users, and a review system for feedback.\n\n## External Dependencies\n\n### Styling & UI Components\n- **Tailwind CSS**: For rapid UI development.\n- **Chart.js**: For data visualization in dashboards.\n- **Heroicons**: For SVG icons.\n\n### Payment Integration\n- **Razorpay**: For processing transactions (cards, UPI, net banking, digital wallets).\n\n### Authentication Services\n- **Google OAuth**: For simplified user onboarding.\n- **OTP Service**: For secure authentication via SMS/Email verification.\n\n### Database\n- **Hostinger MySQL**: Remote database for data persistence.\n\n### Future Integration Points\n- **Video Calling**: WebRTC or third-party service.\n- **Cloud Storage**: For session recordings and shared resources.\n- **Email Service**: For transactional emails and notifications.\n- **Analytics**: For user behavior and platform performance monitoring.","size_bytes":4530},"admin/admin-dashboard.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Admin Dashboard - Nexpert.ai\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Dashboard</h1>\n        <p class=\"text-gray-600 mt-1\">Platform Management & Analytics</p>\n    </div>\n\n    <div class=\"p-6\">\n        <!-- Stats Grid -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            <!-- Total Users -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <p class=\"text-gray-600 text-sm\">Total Users</p>\n                        <p class=\"text-3xl font-bold text-gray-900\" id=\"total-users\">--</p>\n                    </div>\n                    <div class=\"bg-blue-100 p-3 rounded-lg\">\n                        <svg class=\"w-8 h-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <p class=\"text-sm text-gray-600 mt-2\">\n                    <span class=\"text-green-600\" id=\"active-users\">--</span> Active\n                </p>\n            </div>\n\n            <!-- Total Experts -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <p class=\"text-gray-600 text-sm\">Total Experts</p>\n                        <p class=\"text-3xl font-bold text-gray-900\" id=\"total-experts\">--</p>\n                    </div>\n                    <div class=\"bg-accent/20 p-3 rounded-lg\">\n                        <svg class=\"w-8 h-8 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <p class=\"text-sm text-gray-600 mt-2\">\n                    <span class=\"text-yellow-600\" id=\"pending-verification\">--</span> Pending Verification\n                </p>\n            </div>\n\n            <!-- Total Revenue -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <p class=\"text-gray-600 text-sm\">Total Revenue</p>\n                        <p class=\"text-3xl font-bold text-gray-900\" id=\"total-revenue\">$0</p>\n                    </div>\n                    <div class=\"bg-green-100 p-3 rounded-lg\">\n                        <svg class=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <p class=\"text-sm text-gray-600 mt-2\">\n                    <span class=\"text-green-600\" id=\"monthly-revenue\">$0</span> This Month\n                </p>\n            </div>\n\n            <!-- Pending Payouts -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <p class=\"text-gray-600 text-sm\">Pending Payouts</p>\n                        <p class=\"text-3xl font-bold text-gray-900\" id=\"pending-payout-amount\">$0</p>\n                    </div>\n                    <div class=\"bg-red-100 p-3 rounded-lg\">\n                        <svg class=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <p class=\"text-sm text-gray-600 mt-2\">\n                    <span class=\"text-red-600\" id=\"pending-payout-count\">0</span> Requests\n                </p>\n            </div>\n        </div>\n\n        <!-- Recent Activity & Charts -->\n        <div class=\"grid lg:grid-cols-2 gap-6\">\n            <!-- Recent Bookings -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"p-6 border-b\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Recent Bookings</h3>\n                </div>\n                <div class=\"p-6\">\n                    <div id=\"recent-bookings\" class=\"space-y-4\">\n                        <!-- Bookings will be loaded here -->\n                        <p class=\"text-gray-500 text-center py-4\">Loading...</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Verification Queue -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"p-6 border-b flex items-center justify-between\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Verification Queue</h3>\n                    <a href=\"?panel=admin&page=experts&status=pending\" class=\"text-primary text-sm hover:underline\">View All</a>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"space-y-3\" id=\"verification-queue\">\n                        <p class=\"text-gray-500 text-center py-4\">Loading...</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\n// Load admin dashboard data\nasync function loadAdminDashboard() {\n    try {\n        const response = await fetch('/admin-panel/apis/admin/dashboard.php');\n        const data = await response.json();\n        \n        if (data.success) {\n            // Update stats\n            document.getElementById('total-users').textContent = data.users.total_users || 0;\n            document.getElementById('active-users').textContent = data.users.active_users || 0;\n            document.getElementById('total-experts').textContent = data.users.total_experts || 0;\n            document.getElementById('pending-verification').textContent = data.verification.pending || 0;\n            document.getElementById('total-revenue').textContent = '$' + (data.revenue.total_revenue || 0).toLocaleString();\n            document.getElementById('monthly-revenue').textContent = '$' + (data.monthly.monthly_revenue || 0).toLocaleString();\n            document.getElementById('pending-payout-amount').textContent = '$' + (data.pending_payouts.total || 0).toLocaleString();\n            document.getElementById('pending-payout-count').textContent = data.pending_payouts.count || 0;\n            \n            // Load recent bookings\n            const bookingsHtml = data.recent_bookings.map(booking => `\n                <div class=\"flex items-center justify-between py-3 border-b\">\n                    <div>\n                        <p class=\"font-medium text-gray-900\">${booking.learner_name || 'Unknown'} → ${booking.expert_name || 'Unknown'}</p>\n                        <p class=\"text-sm text-gray-600\">${new Date(booking.session_datetime).toLocaleDateString()}</p>\n                    </div>\n                    <span class=\"px-3 py-1 text-xs rounded-full ${\n                        booking.status === 'completed' ? 'bg-green-100 text-green-800' :\n                        booking.status === 'confirmed' ? 'bg-blue-100 text-blue-800' :\n                        'bg-yellow-100 text-yellow-800'\n                    }\">${booking.status}</span>\n                </div>\n            `).join('');\n            document.getElementById('recent-bookings').innerHTML = bookingsHtml || '<p class=\"text-gray-500 text-center\">No recent bookings</p>';\n        }\n    } catch (error) {\n        console.error('Error loading dashboard:', error);\n    }\n}\n\n// Load pending verifications\nasync function loadPendingVerifications() {\n    try {\n        const response = await fetch('/admin-panel/apis/admin/experts.php?verification_status=pending');\n        const data = await response.json();\n        \n        if (data.success && data.experts.length > 0) {\n            const html = data.experts.slice(0, 5).map(expert => `\n                <div class=\"flex items-center justify-between\">\n                    <div class=\"flex items-center space-x-3\">\n                        <div class=\"w-10 h-10 bg-gray-200 rounded-full\"></div>\n                        <div>\n                            <p class=\"font-medium text-gray-900\">${expert.full_name}</p>\n                            <p class=\"text-sm text-gray-600\">${expert.email}</p>\n                        </div>\n                    </div>\n                    <a href=\"?panel=admin&page=experts&expert_id=${expert.user_id}\" class=\"text-primary text-sm hover:underline\">Review</a>\n                </div>\n            `).join('');\n            document.getElementById('verification-queue').innerHTML = html;\n        } else {\n            document.getElementById('verification-queue').innerHTML = '<p class=\"text-gray-500 text-center\">No pending verifications</p>';\n        }\n    } catch (error) {\n        console.error('Error loading verifications:', error);\n    }\n}\n\n// Load data on page load\nloadAdminDashboard();\nloadPendingVerifications();\n</script>\n\n</div> <!-- Close admin-sidebar main content div -->\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":10106},"admin/admin-experts.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Expert Management - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Expert Management</h1>\n        <p class=\"text-gray-600 mt-1\">Verify and manage expert profiles</p>\n    </div>\n\n\n    <div class=\"p-6\">\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\n            <div class=\"flex items-center space-x-4\">\n                <select id=\"verification-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Verification Status</option>\n                    <option value=\"pending\">Pending</option>\n                    <option value=\"verified\">Verified</option>\n                    <option value=\"rejected\">Rejected</option>\n                </select>\n                <select id=\"status-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Account Status</option>\n                    <option value=\"active\">Active</option>\n                    <option value=\"inactive\">Inactive</option>\n                    <option value=\"suspended\">Suspended</option>\n                </select>\n                <button onclick=\"loadExperts()\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600\">Apply Filters</button>\n            </div>\n        </div>\n\n        <!-- Experts Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                    <tr>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Expert</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Email</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Verification</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Bookings</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Earnings</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"experts-table\" class=\"bg-white divide-y divide-gray-200\">\n                    <tr>\n                        <td colspan=\"7\" class=\"px-6 py-8 text-center text-gray-500\">Loading experts...</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<!-- View Modal -->\n<div id=\"verification-modal\" class=\"hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n    <div class=\"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div class=\"flex justify-between items-center mb-4\">\n            <h3 class=\"text-xl font-bold\">Expert Profile</h3>\n            <button onclick=\"closeModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n            </button>\n        </div>\n        <div id=\"modal-content\"></div>\n        <div class=\"mt-6 flex justify-end\">\n            <button onclick=\"closeModal()\" class=\"bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400\">Close</button>\n        </div>\n    </div>\n</div>\n\n<!-- Edit Modal -->\n<div id=\"edit-modal\" class=\"hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n    <div class=\"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div class=\"flex justify-between items-center mb-4\">\n            <h3 class=\"text-xl font-bold\">Edit Expert Profile</h3>\n            <button onclick=\"closeEditModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n            </button>\n        </div>\n        <div id=\"edit-modal-content\"></div>\n        <div class=\"mt-6 flex space-x-4\">\n            <button onclick=\"saveExpertProfile()\" class=\"flex-1 bg-primary text-white px-6 py-3 rounded-lg hover:bg-blue-600\">Save Changes</button>\n            <button onclick=\"closeEditModal()\" class=\"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400\">Cancel</button>\n        </div>\n    </div>\n</div>\n\n<script>\nlet currentExpertId = null;\n\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\nasync function loadExperts() {\n    const verificationStatus = document.getElementById('verification-filter').value;\n    const accountStatus = document.getElementById('status-filter').value;\n    \n    let url = '/admin-panel/apis/admin/experts.php?';\n    if (verificationStatus) url += `verification_status=${verificationStatus}&`;\n    if (accountStatus) url += `status=${accountStatus}`;\n    \n    try {\n        const response = await window.AdminAPI.fetch(url);\n        const data = await response.json();\n        \n        console.log('API Response:', data);\n        \n        if (data.success) {\n            if (data.experts && data.experts.length > 0) {\n                const tableHtml = data.experts.map(expert => {\n                    const profilePhoto = expert.profile_photo ? escapeHtml(expert.profile_photo) : '';\n                    const kycStatus = expert.verification_status || 'pending';\n                    \n                    return `\n                    <tr>\n                        <td class=\"px-6 py-4\">\n                            <div class=\"flex items-center\">\n                                ${profilePhoto ? \n                                    `<img src=\"${profilePhoto}\" alt=\"${escapeHtml(expert.full_name || 'Expert')}\" class=\"w-10 h-10 rounded-full mr-3 object-cover\">` :\n                                    `<div class=\"w-10 h-10 bg-gray-200 rounded-full mr-3 flex items-center justify-center\"><span class=\"text-gray-500 text-sm\">${escapeHtml((expert.full_name || 'E')[0].toUpperCase())}</span></div>`\n                                }\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">${escapeHtml(expert.full_name || expert.email)}</p>\n                                    <p class=\"text-sm text-gray-600\">${escapeHtml((expert.expertise_verticals || []).slice(0, 2).join(', ') || 'No specialties')}</p>\n                                </div>\n                            </div>\n                        </td>\n                        <td class=\"px-6 py-4 text-sm text-gray-900\">${escapeHtml(expert.email)}</td>\n                        <td class=\"px-6 py-4\">\n                            <a href=\"?panel=admin&page=kyc-verification&expert_id=${expert.user_id}\" class=\"px-2 py-1 text-xs rounded-full hover:opacity-75 transition inline-block ${\n                                kycStatus === 'verified' ? 'bg-green-100 text-green-800' :\n                                kycStatus === 'rejected' ? 'bg-red-100 text-red-800' :\n                                'bg-yellow-100 text-yellow-800'\n                            }\">${escapeHtml(kycStatus)}</a>\n                        </td>\n                        <td class=\"px-6 py-4\">\n                            <span class=\"px-2 py-1 text-xs rounded-full ${\n                                expert.account_status === 'active' ? 'bg-green-100 text-green-800' :\n                                'bg-gray-100 text-gray-800'\n                            }\">${escapeHtml(expert.account_status)}</span>\n                        </td>\n                        <td class=\"px-6 py-4 text-sm text-gray-900\">${expert.total_bookings || 0}</td>\n                        <td class=\"px-6 py-4 text-sm text-gray-900\">₹${(expert.total_earnings || 0).toLocaleString()}</td>\n                        <td class=\"px-6 py-4\">\n                            <div class=\"flex space-x-3\">\n                                <button onclick=\"viewExpert(${expert.user_id})\" class=\"text-blue-600 hover:underline text-sm\">View</button>\n                                <button onclick=\"editExpert(${expert.user_id})\" class=\"text-green-600 hover:underline text-sm\">Edit</button>\n                                <button onclick=\"deleteExpert(${expert.user_id})\" class=\"text-red-600 hover:underline text-sm\">Delete</button>\n                            </div>\n                        </td>\n                    </tr>\n                `;\n                }).join('');\n                \n                document.getElementById('experts-table').innerHTML = tableHtml;\n            } else {\n                document.getElementById('experts-table').innerHTML = '<tr><td colspan=\"7\" class=\"px-6 py-8 text-center text-gray-500\">No experts found</td></tr>';\n            }\n        } else {\n            console.error('API Error:', data.message);\n            document.getElementById('experts-table').innerHTML = `<tr><td colspan=\"7\" class=\"px-6 py-8 text-center text-red-500\">Error: ${escapeHtml(data.message || 'Failed to load experts')}</td></tr>`;\n        }\n    } catch (error) {\n        console.error('Error loading experts:', error);\n        document.getElementById('experts-table').innerHTML = '<tr><td colspan=\"7\" class=\"px-6 py-8 text-center text-red-500\">Failed to load experts. Please try again.</td></tr>';\n    }\n}\n\nfunction isValidHttpUrl(url) {\n    try {\n        const parsedUrl = new URL(url, window.location.origin);\n        return parsedUrl.protocol === 'http:' || parsedUrl.protocol === 'https:';\n    } catch {\n        return false;\n    }\n}\n\nasync function viewExpert(expertId) {\n    currentExpertId = expertId;\n    \n    try {\n        const response = await window.AdminAPI.fetch(`/admin-panel/apis/admin/kyc.php?expert_id=${expertId}`);\n        const data = await response.json();\n        \n        if (data.success && data.data) {\n            const expert = data.data;\n            const verticals = Array.isArray(expert.expertise_verticals) ? expert.expertise_verticals : [];\n            \n            const statusColor = expert.verification_status === 'approved' ? 'green' : \n                               expert.verification_status === 'rejected' ? 'red' : 'yellow';\n            \n            const modalContent = `\n                <div class=\"space-y-6 max-h-[60vh] overflow-y-auto\">\n                    <!-- KYC Verification Status -->\n                    <div class=\"bg-${statusColor}-50 border-2 border-${statusColor}-200 rounded-lg p-4\">\n                        <div class=\"flex items-center justify-between\">\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Verification Status</h3>\n                                <span class=\"px-4 py-2 inline-flex text-sm font-semibold rounded-full bg-${statusColor}-100 text-${statusColor}-800\">\n                                    ${escapeHtml((expert.verification_status || 'pending').toUpperCase())}\n                                </span>\n                            </div>\n                            ${expert.verified_at ? `\n                            <div class=\"text-right\">\n                                <p class=\"text-sm text-gray-600\">Verified On</p>\n                                <p class=\"font-semibold text-gray-900\">${new Date(expert.verified_at).toLocaleDateString()}</p>\n                            </div>\n                            ` : ''}\n                        </div>\n                    </div>\n\n                    <!-- Expert Identity Information -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Identity Information</h3>\n                        <div class=\"grid md:grid-cols-2 gap-4\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Legal Name</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.full_legal_name || expert.full_name || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Date of Birth</p>\n                                <p class=\"font-semibold text-gray-900\">${expert.date_of_birth ? new Date(expert.date_of_birth).toLocaleDateString() : 'N/A'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Nationality</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.nationality || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Gender</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.gender || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Email</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.email || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Phone</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.phone || 'N/A')}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Address Information -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Address Information</h3>\n                        <div class=\"bg-gray-50 p-4 rounded-lg space-y-2\">\n                            <p class=\"text-gray-900\">${escapeHtml(expert.address_line1 || 'Address not provided')}</p>\n                            ${expert.address_line2 ? `<p class=\"text-gray-900\">${escapeHtml(expert.address_line2)}</p>` : ''}\n                            <p class=\"text-gray-900\">${escapeHtml(expert.city || '')}, ${escapeHtml(expert.state || '')} ${escapeHtml(expert.postal_code || '')}</p>\n                            <p class=\"text-gray-900\">${escapeHtml(expert.country || '')}</p>\n                        </div>\n                    </div>\n\n                    <!-- KYC Documents -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">📄 KYC Documents</h3>\n                        ${expert.id_document_path ? `\n                        <div class=\"bg-blue-50 border border-blue-200 p-4 rounded-lg\">\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"text-sm font-medium text-gray-700 mb-1\">${escapeHtml(expert.id_document_type || 'Government ID')} Document</p>\n                                    <p class=\"text-xs text-gray-500\">ID Number: ${escapeHtml(expert.id_number || 'Not provided')}</p>\n                                </div>\n                                <a href=\"${escapeHtml(expert.id_document_path)}\" target=\"_blank\" rel=\"noopener noreferrer\" \n                                   class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition\">\n                                    View Document\n                                </a>\n                            </div>\n                        </div>\n                        ` : `\n                        <div class=\"bg-gray-50 p-4 rounded-lg text-center text-gray-500\">\n                            <p>No KYC documents uploaded yet</p>\n                        </div>\n                        `}\n                    </div>\n\n                    <!-- Professional Qualifications -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Professional Qualifications</h3>\n                        <div class=\"space-y-3\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Expertise Areas</p>\n                                <p class=\"text-gray-900\">${verticals.length > 0 ? verticals.join(', ') : 'Not specified'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Years of Experience</p>\n                                <p class=\"text-gray-900\">${expert.experience_years || 'Not specified'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Credentials</p>\n                                <p class=\"text-gray-900\">${escapeHtml(expert.credentials || 'Not specified')}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Professional Links for Verification -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Professional Links</h3>\n                        <div class=\"grid md:grid-cols-2 gap-4\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">LinkedIn Profile</p>\n                                ${expert.linkedin_url ? `<a href=\"${escapeHtml(expert.linkedin_url)}\" target=\"_blank\" class=\"text-primary hover:underline break-all\">${escapeHtml(expert.linkedin_url)}</a>` : '<p class=\"text-gray-400\">Not provided</p>'}\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Website</p>\n                                ${expert.website_url ? `<a href=\"${escapeHtml(expert.website_url)}\" target=\"_blank\" class=\"text-primary hover:underline break-all\">${escapeHtml(expert.website_url)}</a>` : '<p class=\"text-gray-400\">Not provided</p>'}\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Admin Review Notes -->\n                    ${expert.admin_notes ? `\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">📝 Admin Review Notes</h3>\n                        <div class=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg\">\n                            <p class=\"text-gray-900\">${escapeHtml(expert.admin_notes)}</p>\n                        </div>\n                    </div>\n                    ` : ''}\n                </div>\n            `;\n            \n            document.getElementById('modal-content').innerHTML = modalContent;\n            document.getElementById('verification-modal').classList.remove('hidden');\n        } else {\n            console.error('API Error:', data.message);\n            alert('Error: ' + (data.message || 'Failed to load expert details'));\n        }\n    } catch (error) {\n        console.error('Error viewing expert:', error);\n        alert('Error loading expert details');\n    }\n}\n\nasync function updateVerification(status) {\n    if (!currentExpertId) return;\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/experts.php?action=verify', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                expert_id: currentExpertId,\n                verification_status: status,\n                admin_notes: ''\n            })\n        });\n        \n        const data = await response.json();\n        if (data.success) {\n            alert('Verification status updated successfully');\n            closeModal();\n            loadExperts();\n        }\n    } catch (error) {\n        console.error('Error updating verification:', error);\n    }\n}\n\nfunction closeModal() {\n    document.getElementById('verification-modal').classList.add('hidden');\n    currentExpertId = null;\n}\n\nasync function editExpert(expertId) {\n    currentExpertId = expertId;\n    \n    try {\n        const response = await window.AdminAPI.fetch(`/admin-panel/apis/admin/experts.php?expert_id=${expertId}`);\n        const data = await response.json();\n        \n        if (data.success) {\n            const expert = data.expert;\n            const verticals = expert.expertise_verticals || [];\n            \n            const editForm = `\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Full Name</label>\n                        <input type=\"text\" id=\"edit-full-name\" value=\"${escapeHtml(expert.full_name || '')}\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Years of Experience</label>\n                        <input type=\"number\" id=\"edit-years-experience\" value=\"${expert.years_of_experience || ''}\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Short Bio (Max 160 characters)</label>\n                        <textarea id=\"edit-bio-short\" rows=\"3\" maxlength=\"160\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">${escapeHtml(expert.bio_short || '')}</textarea>\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Full Bio</label>\n                        <textarea id=\"edit-bio-full\" rows=\"6\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">${escapeHtml(expert.bio_full || '')}</textarea>\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Expertise Areas (comma-separated)</label>\n                        <input type=\"text\" id=\"edit-expertise\" value=\"${verticals.join(', ')}\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                        <p class=\"text-xs text-gray-500 mt-1\">e.g., Web Development, AI/ML, DevOps</p>\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Credentials</label>\n                        <textarea id=\"edit-credentials\" rows=\"4\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">${escapeHtml(expert.credentials || '')}</textarea>\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">LinkedIn URL</label>\n                        <input type=\"url\" id=\"edit-linkedin\" value=\"${escapeHtml(expert.linkedin_url || '')}\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    \n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Website URL</label>\n                        <input type=\"url\" id=\"edit-website\" value=\"${escapeHtml(expert.website_url || '')}\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                </div>\n            `;\n            \n            document.getElementById('edit-modal-content').innerHTML = editForm;\n            document.getElementById('edit-modal').classList.remove('hidden');\n        } else {\n            console.error('API Error:', data.message);\n            alert('Error: ' + (data.message || 'Failed to load expert data'));\n        }\n    } catch (error) {\n        console.error('Error loading expert for edit:', error);\n        alert('Error loading expert data');\n    }\n}\n\nasync function saveExpertProfile() {\n    if (!currentExpertId) return;\n    \n    const fullName = document.getElementById('edit-full-name').value.trim();\n    const bioShort = document.getElementById('edit-bio-short').value.trim();\n    const bioFull = document.getElementById('edit-bio-full').value.trim();\n    const expertiseRaw = document.getElementById('edit-expertise').value.trim();\n    const credentials = document.getElementById('edit-credentials').value.trim();\n    const yearsExperience = document.getElementById('edit-years-experience').value;\n    const linkedinUrl = document.getElementById('edit-linkedin').value.trim();\n    const websiteUrl = document.getElementById('edit-website').value.trim();\n    \n    const expertiseVerticals = expertiseRaw.split(',').map(v => v.trim()).filter(v => v);\n    \n    if (!fullName) {\n        alert('Full name is required');\n        return;\n    }\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/kyc.php', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                expert_id: currentExpertId,\n                update_profile: true,\n                full_name: fullName,\n                bio_short: bioShort,\n                bio_full: bioFull,\n                expertise_verticals: expertiseVerticals,\n                credentials: credentials,\n                years_of_experience: yearsExperience || null,\n                linkedin_url: linkedinUrl,\n                website_url: websiteUrl\n            })\n        });\n        \n        const data = await response.json();\n        \n        if (data.success) {\n            alert('Expert profile updated successfully!');\n            closeEditModal();\n            loadExperts();\n        } else {\n            alert('Error: ' + (data.message || 'Unknown error'));\n        }\n    } catch (error) {\n        console.error('Error saving expert profile:', error);\n        alert('Error saving expert profile');\n    }\n}\n\nfunction closeEditModal() {\n    document.getElementById('edit-modal').classList.add('hidden');\n    currentExpertId = null;\n}\n\nasync function deleteExpert(expertId) {\n    if (!confirm('Are you sure you want to delete this expert? This action cannot be undone.')) {\n        return;\n    }\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/experts.php', {\n            method: 'DELETE',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ expert_id: expertId })\n        });\n        \n        const data = await response.json();\n        if (data.success) {\n            alert('Expert deleted successfully');\n            loadExperts();\n        } else {\n            alert('Error deleting expert: ' + (data.message || 'Unknown error'));\n        }\n    } catch (error) {\n        console.error('Error deleting expert:', error);\n        alert('Error deleting expert. Please try again.');\n    }\n}\n\n// Load experts on page load\nloadExperts();\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n</div> <!-- Close admin-sidebar main content div -->\n","size_bytes":28345},"admin/admin-payouts.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Payout Management - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Payout Management</h1>\n        <p class=\"text-gray-600 mt-1\">Process and manage expert payouts</p>\n    </div>\n\n\n    <div class=\"p-6\">\n        <!-- Filter Tabs -->\n        <div class=\"bg-white rounded-lg shadow mb-6\">\n            <div class=\"border-b\">\n                <nav class=\"flex space-x-8 px-6\">\n                    <button onclick=\"filterPayouts('pending')\" class=\"border-b-2 border-primary text-primary py-4 px-1 font-medium\">Pending</button>\n                    <button onclick=\"filterPayouts('completed')\" class=\"border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-4 px-1\">Completed</button>\n                    <button onclick=\"filterPayouts('rejected')\" class=\"border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-4 px-1\">Rejected</button>\n                    <button onclick=\"filterPayouts('')\" class=\"border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-4 px-1\">All</button>\n                </nav>\n            </div>\n        </div>\n\n        <!-- Payouts Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                    <tr>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Expert</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Amount</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Request Date</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"payouts-table\" class=\"bg-white divide-y divide-gray-200\">\n                    <tr>\n                        <td colspan=\"5\" class=\"px-6 py-8 text-center text-gray-500\">Loading payouts...</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<!-- Process Payout Modal -->\n<div id=\"payout-modal\" class=\"hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n    <div class=\"bg-white rounded-lg p-8 max-w-lg w-full mx-4\">\n        <h3 class=\"text-xl font-bold mb-4\">Process Payout</h3>\n        <div id=\"payout-details\" class=\"mb-6\"></div>\n        <div class=\"space-y-4\">\n            <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Transaction ID</label>\n                <input type=\"text\" id=\"transaction-id\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg\" placeholder=\"Enter transaction ID\">\n            </div>\n            <div>\n                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Admin Notes</label>\n                <textarea id=\"admin-notes\" rows=\"3\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg\" placeholder=\"Add any notes...\"></textarea>\n            </div>\n        </div>\n        <div class=\"mt-6 flex space-x-4\">\n            <button onclick=\"processPayout('completed')\" class=\"flex-1 bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600\">Approve & Pay</button>\n            <button onclick=\"processPayout('rejected')\" class=\"flex-1 bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600\">Reject</button>\n            <button onclick=\"closePayoutModal()\" class=\"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400\">Cancel</button>\n        </div>\n    </div>\n</div>\n\n<script>\nlet currentPayoutId = null;\n\nasync function loadPayouts(status = 'pending') {\n    const url = status ? `/admin-panel/apis/admin/payouts.php?status=${status}` : '/admin-panel/apis/admin/payouts.php';\n    \n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n        \n        if (data.success) {\n            const tableHtml = data.payouts.map(payout => `\n                <tr>\n                    <td class=\"px-6 py-4\">\n                        <div>\n                            <p class=\"font-medium text-gray-900\">${payout.expert_name}</p>\n                            <p class=\"text-sm text-gray-600\">${payout.expert_email}</p>\n                        </div>\n                    </td>\n                    <td class=\"px-6 py-4 font-semibold text-gray-900\">$${parseFloat(payout.amount).toLocaleString()}</td>\n                    <td class=\"px-6 py-4 text-sm text-gray-600\">${new Date(payout.created_at).toLocaleDateString()}</td>\n                    <td class=\"px-6 py-4\">\n                        <span class=\"px-2 py-1 text-xs rounded-full ${\n                            payout.status === 'completed' ? 'bg-green-100 text-green-800' :\n                            payout.status === 'rejected' ? 'bg-red-100 text-red-800' :\n                            'bg-yellow-100 text-yellow-800'\n                        }\">${payout.status}</span>\n                    </td>\n                    <td class=\"px-6 py-4\">\n                        ${payout.status === 'pending' ? \n                            `<button onclick=\"viewPayout(${payout.id}, '${payout.expert_name}', ${payout.amount})\" class=\"text-primary hover:underline text-sm\">Process</button>` :\n                            `<span class=\"text-gray-400 text-sm\">${payout.status}</span>`\n                        }\n                    </td>\n                </tr>\n            `).join('');\n            \n            document.getElementById('payouts-table').innerHTML = tableHtml || '<tr><td colspan=\"5\" class=\"px-6 py-8 text-center text-gray-500\">No payouts found</td></tr>';\n        }\n    } catch (error) {\n        console.error('Error loading payouts:', error);\n    }\n}\n\nfunction filterPayouts(status) {\n    // Update active tab styling\n    document.querySelectorAll('nav button').forEach(btn => {\n        btn.className = 'border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-4 px-1';\n    });\n    event.target.className = 'border-b-2 border-primary text-primary py-4 px-1 font-medium';\n    \n    loadPayouts(status);\n}\n\nfunction viewPayout(payoutId, expertName, amount) {\n    currentPayoutId = payoutId;\n    document.getElementById('payout-details').innerHTML = `\n        <div class=\"bg-gray-50 p-4 rounded-lg\">\n            <p class=\"font-semibold text-gray-900\">${expertName}</p>\n            <p class=\"text-2xl font-bold text-primary mt-2\">$${parseFloat(amount).toLocaleString()}</p>\n        </div>\n    `;\n    document.getElementById('payout-modal').classList.remove('hidden');\n}\n\nasync function processPayout(status) {\n    if (!currentPayoutId) return;\n    \n    const transactionId = document.getElementById('transaction-id').value;\n    const adminNotes = document.getElementById('admin-notes').value;\n    \n    try {\n        const response = await fetch('/admin-panel/apis/admin/payouts.php', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                payout_id: currentPayoutId,\n                status: status,\n                transaction_id: transactionId,\n                admin_notes: adminNotes\n            })\n        });\n        \n        const data = await response.json();\n        if (data.success) {\n            alert('Payout processed successfully');\n            closePayoutModal();\n            loadPayouts('pending');\n        }\n    } catch (error) {\n        console.error('Error processing payout:', error);\n        alert('Error processing payout');\n    }\n}\n\nfunction closePayoutModal() {\n    document.getElementById('payout-modal').classList.add('hidden');\n    document.getElementById('transaction-id').value = '';\n    document.getElementById('admin-notes').value = '';\n    currentPayoutId = null;\n}\n\n// Load payouts on page load\nloadPayouts('pending');\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n</div> <!-- Close admin-sidebar main content div -->\n","size_bytes":8309},"admin/admin-users.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"User Management - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">User Management</h1>\n        <p class=\"text-gray-600 mt-1\">Manage all platform users</p>\n    </div>\n\n\n    <div class=\"p-6\">\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\n            <div class=\"flex items-center space-x-4\">\n                <select id=\"role-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Roles</option>\n                    <option value=\"learner\">Learners</option>\n                    <option value=\"expert\">Experts</option>\n                    <option value=\"admin\">Admins</option>\n                </select>\n                <select id=\"status-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Status</option>\n                    <option value=\"active\">Active</option>\n                    <option value=\"inactive\">Inactive</option>\n                    <option value=\"suspended\">Suspended</option>\n                </select>\n                <button onclick=\"loadUsers()\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600\">Apply Filters</button>\n            </div>\n        </div>\n\n        <!-- Users Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                    <tr>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">User</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Role</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Joined</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"users-table\" class=\"bg-white divide-y divide-gray-200\">\n                    <tr>\n                        <td colspan=\"5\" class=\"px-6 py-8 text-center text-gray-500\">Loading users...</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n\n<script>\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\nfunction formatDateIST(dateString) {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-IN', { \n        timeZone: 'Asia/Kolkata',\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n    });\n}\n\nasync function loadUsers() {\n    const role = document.getElementById('role-filter').value;\n    const status = document.getElementById('status-filter').value;\n    \n    let url = '/admin-panel/apis/admin/users.php?';\n    if (role) url += `role=${role}&`;\n    if (status) url += `status=${status}`;\n    \n    try {\n        const response = await window.AdminAPI.fetch(url);\n        const data = await response.json();\n        \n        if (data.success) {\n            const tableHtml = data.users.map(user => `\n                <tr>\n                    <td class=\"px-6 py-4\">\n                        <div>\n                            <p class=\"font-medium text-gray-900\">${escapeHtml(user.email)}</p>\n                            <p class=\"text-sm text-gray-600\">${escapeHtml(user.phone || 'No phone')}</p>\n                        </div>\n                    </td>\n                    <td class=\"px-6 py-4\">\n                        <span class=\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\">${escapeHtml(user.role)}</span>\n                    </td>\n                    <td class=\"px-6 py-4\">\n                        <span class=\"px-2 py-1 text-xs rounded-full ${\n                            user.status === 'active' ? 'bg-green-100 text-green-800' :\n                            user.status === 'suspended' ? 'bg-red-100 text-red-800' :\n                            'bg-gray-100 text-gray-800'\n                        }\">${escapeHtml(user.status)}</span>\n                    </td>\n                    <td class=\"px-6 py-4 text-sm text-gray-600\">${formatDateIST(user.created_at)}</td>\n                    <td class=\"px-6 py-4\">\n                        <select onchange=\"updateUserStatus(${user.id}, this.value)\" class=\"text-sm border border-gray-300 rounded px-2 py-1\">\n                            <option value=\"\">Change Status...</option>\n                            <option value=\"active\">Activate</option>\n                            <option value=\"inactive\">Deactivate</option>\n                            <option value=\"suspended\">Suspend</option>\n                        </select>\n                    </td>\n                </tr>\n            `).join('');\n            \n            document.getElementById('users-table').innerHTML = tableHtml || '<tr><td colspan=\"5\" class=\"px-6 py-8 text-center text-gray-500\">No users found</td></tr>';\n        }\n    } catch (error) {\n        console.error('Error loading users:', error);\n    }\n}\n\nasync function updateUserStatus(userId, status) {\n    if (!status) return;\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/users.php', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ user_id: userId, status: status })\n        });\n        \n        const data = await response.json();\n        if (data.success) {\n            alert('User status updated successfully');\n            loadUsers();\n        } else {\n            alert('Error: ' + (data.message || 'Unknown error'));\n        }\n    } catch (error) {\n        console.error('Error updating user status:', error);\n        alert('Error updating user status. Please try again.');\n    }\n}\n\n// Load users on page load\nloadUsers();\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n</div> <!-- Close admin-sidebar main content div -->\n","size_bytes":6359},"expert/expert-auth.php":{"content":"<?php\n$page_title = \"Expert Auth - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n    <div class=\"min-h-screen flex\">\n        <!-- Left Side - Image/Branding -->\n        <div class=\"hidden lg:block lg:w-1/2 bg-gradient-to-br from-accent to-yellow-600\">\n            <div class=\"flex items-center justify-center h-full text-white p-12\">\n                <div class=\"text-center\">\n                    <h3 class=\"text-4xl font-bold mb-6\">Share Your Expertise</h3>\n                    <p class=\"text-xl opacity-90 mb-8\">Join thousands of experts helping learners worldwide</p>\n                    <div class=\"space-y-4\">\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                            </svg>\n                            <span>Flexible Earnings</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                            </svg>\n                            <span>Global Reach</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                            </svg>\n                            <span>Analytics & Insights</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Right Side - Auth Form -->\n        <div class=\"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-20 xl:px-24\">\n            <div class=\"w-full max-w-md\">\n                <div class=\"text-center mb-8\">\n                    <h2 class=\"text-3xl font-bold text-gray-900\">Expert Portal</h2>\n                    <p class=\"mt-2 text-gray-600\">Sign in or create your account</p>\n                </div>\n\n                <!-- Toggle Tabs -->\n                <div class=\"flex border-b border-gray-200 mb-6\">\n                    <button id=\"signInTab\" class=\"flex-1 py-3 text-center font-medium border-b-2 border-accent text-accent\" onclick=\"switchTab('signin')\">\n                        Sign In\n                    </button>\n                    <button id=\"signUpTab\" class=\"flex-1 py-3 text-center font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700\" onclick=\"switchTab('signup')\">\n                        Sign Up\n                    </button>\n                </div>\n\n                <!-- Sign In Form -->\n                <form id=\"signInForm\" class=\"space-y-6\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address *</label>\n                        <input id=\"signInEmail\" type=\"email\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"your@email.com\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Password *</label>\n                        <input id=\"signInPassword\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"Enter your password\">\n                    </div>\n\n                    <div class=\"flex items-center justify-between\">\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                            <span class=\"ml-2 text-sm text-gray-600\">Remember me</span>\n                        </label>\n                        <a href=\"#\" class=\"text-sm text-accent hover:text-yellow-600\">Forgot password?</a>\n                    </div>\n\n                    <button type=\"submit\" class=\"w-full bg-accent text-white py-3 px-4 rounded-lg hover:bg-yellow-600 transition duration-200 font-semibold\">\n                        Sign In\n                    </button>\n                </form>\n\n                <!-- Sign Up Form -->\n                <form id=\"signUpForm\" class=\"space-y-6 hidden\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name *</label>\n                        <input id=\"expertName\" type=\"text\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"Enter your full name\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Mobile Number *</label>\n                        <div class=\"flex gap-2\">\n                            <select id=\"expertCountryCode\" class=\"w-32 px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                                <option value=\"+91\">🇮🇳 +91</option>\n                                <option value=\"+1\">🇺🇸 +1</option>\n                                <option value=\"+44\">🇬🇧 +44</option>\n                                <option value=\"+61\">🇦🇺 +61</option>\n                                <option value=\"+86\">🇨🇳 +86</option>\n                                <option value=\"+81\">🇯🇵 +81</option>\n                                <option value=\"+49\">🇩🇪 +49</option>\n                                <option value=\"+33\">🇫🇷 +33</option>\n                                <option value=\"+971\">🇦🇪 +971</option>\n                                <option value=\"+65\">🇸🇬 +65</option>\n                                <option value=\"+60\">🇲🇾 +60</option>\n                                <option value=\"+966\">🇸🇦 +966</option>\n                            </select>\n                            <input id=\"expertMobile\" type=\"tel\" required class=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"9876543210\">\n                        </div>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address *</label>\n                        <input id=\"expertEmail\" type=\"email\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"your@email.com\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Password *</label>\n                        <input id=\"expertPassword\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"Create a password\">\n                        <div class=\"mt-2\">\n                            <div class=\"flex items-center justify-between mb-1\">\n                                <span id=\"expertPasswordStrengthText\" class=\"text-xs font-medium text-gray-500\">Password strength</span>\n                            </div>\n                            <div class=\"h-2 bg-gray-200 rounded-full\">\n                                <div id=\"expertPasswordStrengthBar\" class=\"h-full rounded-full transition-all duration-300\" style=\"width: 0%\"></div>\n                            </div>\n                            <ul class=\"mt-2 text-xs text-gray-600 space-y-1\">\n                                <li id=\"expertPwLength\" class=\"flex items-center\"><span class=\"mr-2\">○</span> At least 8 characters</li>\n                                <li id=\"expertPwUppercase\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One uppercase letter</li>\n                                <li id=\"expertPwLowercase\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One lowercase letter</li>\n                                <li id=\"expertPwNumber\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One number</li>\n                            </ul>\n                        </div>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Repeat Password *</label>\n                        <input id=\"expertPasswordRepeat\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"Confirm your password\">\n                    </div>\n\n                    <button type=\"submit\" id=\"expertRegisterBtn\" class=\"w-full bg-accent text-white py-3 px-4 rounded-lg hover:bg-yellow-600 transition duration-200 font-semibold flex items-center justify-center\">\n                        <span id=\"expertRegisterText\">Create Account & Continue</span>\n                        <svg id=\"expertRegisterSpinner\" class=\"hidden animate-spin ml-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                        </svg>\n                    </button>\n                </form>\n\n                <div class=\"mt-8\">\n                    <div class=\"relative\">\n                        <div class=\"absolute inset-0 flex items-center\">\n                            <div class=\"w-full border-t border-gray-300\"></div>\n                        </div>\n                        <div class=\"relative flex justify-center text-sm\">\n                            <span class=\"px-2 bg-white text-gray-500\">Or continue with</span>\n                        </div>\n                    </div>\n\n                    <div class=\"mt-6 space-y-3\">\n                        <button type=\"button\" class=\"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition duration-200 flex items-center justify-center\">\n                            <svg class=\"w-5 h-5 mr-2\" viewBox=\"0 0 24 24\">\n                                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                            </svg>\n                            Sign in with Google\n                        </button>\n\n                        <button type=\"button\" class=\"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition duration-200\">\n                            Sign in with OTP\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n    // Tab switching\n    function switchTab(tab) {\n        const signInTab = document.getElementById('signInTab');\n        const signUpTab = document.getElementById('signUpTab');\n        const signInForm = document.getElementById('signInForm');\n        const signUpForm = document.getElementById('signUpForm');\n\n        if (tab === 'signin') {\n            signInTab.classList.add('border-accent', 'text-accent');\n            signInTab.classList.remove('border-transparent', 'text-gray-500');\n            signUpTab.classList.remove('border-accent', 'text-accent');\n            signUpTab.classList.add('border-transparent', 'text-gray-500');\n            signInForm.classList.remove('hidden');\n            signUpForm.classList.add('hidden');\n        } else {\n            signUpTab.classList.add('border-accent', 'text-accent');\n            signUpTab.classList.remove('border-transparent', 'text-gray-500');\n            signInTab.classList.remove('border-accent', 'text-accent');\n            signInTab.classList.add('border-transparent', 'text-gray-500');\n            signUpForm.classList.remove('hidden');\n            signInForm.classList.add('hidden');\n        }\n    }\n\n    // Sign In Form Handler\n    document.getElementById('signInForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('signInEmail').value.trim();\n        const password = document.getElementById('signInPassword').value;\n        \n        if (!email || !password) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Missing Information',\n                text: 'Please fill in all fields',\n                confirmButtonColor: '#F59E0B'\n            });\n            return;\n        }\n        \n        try {\n            const response = await fetch('/admin-panel/apis/expert/auth.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email: email,\n                    password: password\n                })\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                // Successful login\n                await Swal.fire({\n                    icon: 'success',\n                    title: 'Welcome Back!',\n                    text: 'Login successful',\n                    confirmButtonColor: '#F59E0B',\n                    timer: 1500,\n                    showConfirmButton: false\n                });\n                \n                // Check if expert needs to complete KYC\n                if (result.user.verification_status === 'pending' || !result.user.verification_status) {\n                    window.location.href = '?panel=expert&page=kyc';\n                } else {\n                    window.location.href = '?panel=expert&page=dashboard';\n                }\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Login Failed',\n                    text: result.message,\n                    confirmButtonColor: '#F59E0B'\n                });\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'An error occurred during login. Please try again.',\n                confirmButtonColor: '#F59E0B'\n            });\n        }\n    });\n\n    // Sign Up Form Handler\n    document.getElementById('signUpForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const name = document.getElementById('expertName').value.trim();\n        const countryCode = document.getElementById('expertCountryCode').value;\n        const mobile = document.getElementById('expertMobile').value.trim();\n        const email = document.getElementById('expertEmail').value.trim();\n        const password = document.getElementById('expertPassword').value;\n        const passwordRepeat = document.getElementById('expertPasswordRepeat').value;\n        \n        if (!name || !mobile || !email || !password || !passwordRepeat) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Missing Information',\n                text: 'Please fill in all required fields',\n                confirmButtonColor: '#F59E0B'\n            });\n            return;\n        }\n        \n        if (password.length < 8) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Weak Password',\n                text: 'Password must be at least 8 characters long',\n                confirmButtonColor: '#F59E0B'\n            });\n            return;\n        }\n        \n        if (password !== passwordRepeat) {\n            Swal.fire({\n                icon: 'error',\n                title: 'Password Mismatch',\n                text: 'Passwords do not match. Please try again.',\n                confirmButtonColor: '#F59E0B'\n            });\n            return;\n        }\n        \n        // Combine country code with mobile number\n        const fullMobile = countryCode + mobile;\n        \n        // Show loading spinner\n        const btn = document.getElementById('expertRegisterBtn');\n        const btnText = document.getElementById('expertRegisterText');\n        const spinner = document.getElementById('expertRegisterSpinner');\n        btn.disabled = true;\n        btnText.textContent = 'Creating Account...';\n        spinner.classList.remove('hidden');\n        \n        try {\n            const response = await fetch('/admin-panel/apis/expert/register.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    name: name,\n                    mobile: fullMobile,\n                    email: email,\n                    password: password\n                })\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                await Swal.fire({\n                    icon: 'success',\n                    title: 'Welcome to Nexpert.ai!',\n                    text: 'Registration successful! Please complete your profile setup.',\n                    confirmButtonColor: '#F59E0B',\n                    timer: 2000\n                });\n                window.location.href = '?panel=expert&page=settings#profile';\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Registration Failed',\n                    text: result.message,\n                    confirmButtonColor: '#F59E0B'\n                });\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'An error occurred during registration. Please try again.',\n                confirmButtonColor: '#F59E0B'\n            });\n        } finally {\n            // Hide loading spinner\n            btn.disabled = false;\n            btnText.textContent = 'Create Account & Continue';\n            spinner.classList.add('hidden');\n        }\n    });\n\n    // Password strength checker for expert registration\n    const expertPasswordInput = document.getElementById('expertPassword');\n    if (expertPasswordInput) {\n        expertPasswordInput.addEventListener('input', function() {\n            const password = this.value;\n            const strengthBar = document.getElementById('expertPasswordStrengthBar');\n            const strengthText = document.getElementById('expertPasswordStrengthText');\n            \n            const lengthCheck = document.getElementById('expertPwLength');\n            const uppercaseCheck = document.getElementById('expertPwUppercase');\n            const lowercaseCheck = document.getElementById('expertPwLowercase');\n            const numberCheck = document.getElementById('expertPwNumber');\n            \n            let strength = 0;\n            \n            // Check length\n            if (password.length >= 8) {\n                lengthCheck.classList.add('text-green-600');\n                lengthCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                lengthCheck.classList.remove('text-green-600');\n                lengthCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check uppercase\n            if (/[A-Z]/.test(password)) {\n                uppercaseCheck.classList.add('text-green-600');\n                uppercaseCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                uppercaseCheck.classList.remove('text-green-600');\n                uppercaseCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check lowercase\n            if (/[a-z]/.test(password)) {\n                lowercaseCheck.classList.add('text-green-600');\n                lowercaseCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                lowercaseCheck.classList.remove('text-green-600');\n                lowercaseCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check number\n            if (/[0-9]/.test(password)) {\n                numberCheck.classList.add('text-green-600');\n                numberCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                numberCheck.classList.remove('text-green-600');\n                numberCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Update strength bar and text\n            const percentage = (strength / 4) * 100;\n            strengthBar.style.width = percentage + '%';\n            \n            if (strength === 0) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300';\n                strengthText.textContent = 'Password strength';\n                strengthText.className = 'text-xs font-medium text-gray-500';\n            } else if (strength <= 2) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-red-500';\n                strengthText.textContent = 'Weak';\n                strengthText.className = 'text-xs font-medium text-red-600';\n            } else if (strength === 3) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-yellow-500';\n                strengthText.textContent = 'Medium';\n                strengthText.className = 'text-xs font-medium text-yellow-600';\n            } else {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-green-500';\n                strengthText.textContent = 'Strong';\n                strengthText.className = 'text-xs font-medium text-green-600';\n            }\n        });\n    }\n    </script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":23846},"expert/expert-booking-management.php":{"content":"<?php\n$page_title = \"Booking Management - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\n// Get expert profile ID\n$userId = $_SESSION['user_id'] ?? null;\n$expertProfileId = null;\n\nif ($userId) {\n    $stmt = $pdo->prepare(\"SELECT id FROM expert_profiles WHERE user_id = ?\");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    if ($profile) {\n        $expertProfileId = $profile['id'];\n    }\n}\n\n// Pagination\n$page = isset($_GET['booking_page']) ? (int)$_GET['booking_page'] : 1;\n$limit = 10;\n$offset = ($page - 1) * $limit;\n\n// Initialize stats\n$pendingCount = 0;\n$confirmedCount = 0;\n$thisWeekCount = 0;\n$thisMonthEarnings = 0;\n$bookings = [];\n$totalBookings = 0;\n\nif ($expertProfileId) {\n    // Get booking stats\n    $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM bookings WHERE expert_id = ? AND status = 'pending'\");\n    $stmt->execute([$expertProfileId]);\n    $pendingCount = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n    \n    $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM bookings WHERE expert_id = ? AND status = 'confirmed'\");\n    $stmt->execute([$expertProfileId]);\n    $confirmedCount = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n    \n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(*) as count FROM bookings \n        WHERE expert_id = ? \n        AND WEEK(session_datetime) = WEEK(CURRENT_DATE())\n        AND YEAR(session_datetime) = YEAR(CURRENT_DATE())\n    \");\n    $stmt->execute([$expertProfileId]);\n    $thisWeekCount = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n    \n    $stmt = $pdo->prepare(\"\n        SELECT COALESCE(SUM(p.amount), 0) as total\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.id\n        WHERE b.expert_id = ? \n        AND MONTH(b.session_datetime) = MONTH(CURRENT_DATE())\n        AND YEAR(b.session_datetime) = YEAR(CURRENT_DATE())\n    \");\n    $stmt->execute([$expertProfileId]);\n    $thisMonthEarnings = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;\n    \n    // Get total count for pagination\n    $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM bookings WHERE expert_id = ?\");\n    $stmt->execute([$expertProfileId]);\n    $totalBookings = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n    \n    // Get bookings with learner info\n    $stmt = $pdo->prepare(\"\n        SELECT b.*, lp.full_name as learner_name, u.email as learner_email, \n               lp.id as learner_profile_id, p.amount, p.status as payment_status\n        FROM bookings b\n        LEFT JOIN learner_profiles lp ON b.learner_id = lp.id\n        LEFT JOIN users u ON lp.user_id = u.id\n        LEFT JOIN payments p ON b.id = p.booking_id\n        WHERE b.expert_id = ?\n        ORDER BY b.session_datetime DESC\n        LIMIT ? OFFSET ?\n    \");\n    $stmt->execute([$expertProfileId, $limit, $offset]);\n    $bookings = $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n\n$totalPages = ceil($totalBookings / $limit);\n?>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-8\">\n        <!-- Header -->\n        <div class=\"flex flex-col sm:flex-row justify-between sm:items-center mb-6 sm:mb-8 gap-4\">\n            <div>\n                <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-2\">Booking Management</h1>\n                <p class=\"text-sm sm:text-base text-gray-600\">Manage your session requests and bookings</p>\n            </div>\n            <div class=\"flex flex-col sm:flex-row gap-2 sm:gap-3\">\n                <button id=\"exportBookings\" class=\"bg-white border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition text-sm\">\n                    Export Data\n                </button>\n                <a href=\"?panel=expert&page=settings#availability\" class=\"bg-accent text-white px-4 py-3 rounded-lg hover:bg-yellow-600 transition text-sm inline-block text-center\">\n                    Manage Availability\n                </a>\n            </div>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8\">\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-yellow-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\"><?php echo $pendingCount; ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">Pending Requests</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-green-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\"><?php echo $confirmedCount; ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">Confirmed Sessions</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-blue-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\"><?php echo $thisWeekCount; ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">This Week</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-purple-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\">₹<?php echo number_format($thisMonthEarnings, 0); ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">This Month</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Filters and Search -->\n        <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6 mb-6 sm:mb-8\">\n            <div class=\"flex flex-col space-y-4\">\n                <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\">\n                    <div class=\"relative sm:col-span-2 lg:col-span-1\">\n                        <input type=\"text\" placeholder=\"Search by learner name...\" class=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\">\n                        <svg class=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                        </svg>\n                    </div>\n                    \n                    <select class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\">\n                        <option>All Statuses</option>\n                        <option>Pending Approval</option>\n                        <option>Confirmed</option>\n                        <option>Completed</option>\n                        <option>Cancelled</option>\n                        <option>Rescheduled</option>\n                    </select>\n                    \n                    <select class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\">\n                        <option>All Time</option>\n                        <option>Today</option>\n                        <option>This Week</option>\n                        <option>This Month</option>\n                        <option>Custom Range</option>\n                    </select>\n                    \n                    <select class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\">\n                        <option>All Session Types</option>\n                        <option>One-time Session</option>\n                        <option>Package Sessions</option>\n                        <option>Subscription</option>\n                    </select>\n                </div>\n                \n                <div class=\"flex flex-col sm:flex-row gap-2 sm:gap-3\">\n                    <button class=\"w-full sm:w-auto px-4 py-3 bg-accent text-white rounded-lg hover:bg-yellow-600 transition text-sm\">Apply Filters</button>\n                    <button class=\"w-full sm:w-auto px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm\">Reset</button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Bookings Table -->\n        <div class=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n            <div class=\"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200\">\n                <div class=\"flex flex-col sm:flex-row justify-between sm:items-center gap-3\">\n                    <h2 class=\"text-lg sm:text-xl font-semibold text-gray-900\">Recent Bookings</h2>\n                    <div class=\"flex gap-2\">\n                        <button class=\"px-4 py-3 bg-accent text-white rounded text-sm\">Pending</button>\n                        <button class=\"px-4 py-3 bg-gray-200 text-gray-700 rounded text-sm\">All Bookings</button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"w-full\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Learner</th>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Session Details</th>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Date & Time</th>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Amount</th>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Status</th>\n                            <th class=\"text-left py-3 px-6 font-medium text-gray-700\">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <?php if (empty($bookings)): ?>\n                            <tr>\n                                <td colspan=\"6\" class=\"py-12 text-center\">\n                                    <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                                    </svg>\n                                    <p class=\"text-gray-600 mb-2\">No bookings yet</p>\n                                    <p class=\"text-sm text-gray-500\">Start accepting bookings to see them here!</p>\n                                </td>\n                            </tr>\n                        <?php else: ?>\n                            <?php foreach ($bookings as $booking): \n                                $statusClasses = [\n                                    'pending' => 'bg-yellow-100 text-yellow-800',\n                                    'confirmed' => 'bg-green-100 text-green-800',\n                                    'completed' => 'bg-blue-100 text-blue-800',\n                                    'cancelled' => 'bg-red-100 text-red-800',\n                                    'rescheduled' => 'bg-purple-100 text-purple-800'\n                                ];\n                                $statusClass = $statusClasses[$booking['status']] ?? 'bg-gray-100 text-gray-800';\n                            ?>\n                            <tr class=\"border-b border-gray-100 hover:bg-gray-50\">\n                                <td class=\"py-4 px-6\">\n                                    <div class=\"flex items-center\">\n                                        <div class=\"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center mr-3\">\n                                            <span class=\"text-gray-600 font-semibold\"><?php echo strtoupper(substr($booking['learner_name'] ?? 'U', 0, 1)); ?></span>\n                                        </div>\n                                        <div>\n                                            <p class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($booking['learner_name'] ?? 'Unknown'); ?></p>\n                                            <p class=\"text-gray-600 text-sm\"><?php echo htmlspecialchars($booking['learner_email'] ?? ''); ?></p>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class=\"py-4 px-6\">\n                                    <div>\n                                        <p class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($booking['session_topic'] ?? 'Session'); ?></p>\n                                        <p class=\"text-gray-600 text-sm\"><?php echo ($booking['duration'] ?? 60); ?> minutes</p>\n                                    </div>\n                                </td>\n                                <td class=\"py-4 px-6\">\n                                    <div>\n                                        <p class=\"font-medium text-gray-900\"><?php echo date('M d, Y', strtotime($booking['session_datetime'])); ?></p>\n                                        <p class=\"text-gray-600 text-sm\"><?php echo date('g:i A', strtotime($booking['session_datetime'])); ?> IST</p>\n                                    </div>\n                                </td>\n                                <td class=\"py-4 px-6\">\n                                    <span class=\"font-semibold text-gray-900\">₹<?php echo number_format($booking['amount'] ?? 0, 0); ?></span>\n                                </td>\n                                <td class=\"py-4 px-6\">\n                                    <span class=\"px-2 py-1 <?php echo $statusClass; ?> text-sm rounded-full\"><?php echo ucfirst($booking['status']); ?></span>\n                                </td>\n                                <td class=\"py-4 px-6\">\n                                    <div class=\"flex flex-wrap gap-2\">\n                                        <?php if ($booking['status'] === 'pending'): ?>\n                                            <button class=\"bg-green-600 text-white px-4 py-3 rounded text-sm hover:bg-green-700 transition\">Approve</button>\n                                            <button class=\"bg-red-600 text-white px-4 py-3 rounded text-sm hover:bg-red-700 transition\">Reject</button>\n                                        <?php elseif ($booking['status'] === 'confirmed'): ?>\n                                            <button class=\"bg-primary text-white px-4 py-3 rounded text-sm hover:bg-secondary transition\">Join Session</button>\n                                        <?php elseif ($booking['status'] === 'completed'): ?>\n                                            <button class=\"bg-gray-500 text-white px-4 py-3 rounded text-sm\">View Details</button>\n                                        <?php else: ?>\n                                            <button class=\"bg-gray-400 text-white px-4 py-3 rounded text-sm cursor-not-allowed\" disabled>No Action</button>\n                                        <?php endif; ?>\n                                    </div>\n                                </td>\n                            </tr>\n                            <?php endforeach; ?>\n                        <?php endif; ?>\n                    </tbody>\n                </table>\n            </div>\n            \n            <!-- Pagination -->\n            <?php if ($totalBookings > 0): ?>\n            <div class=\"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200\">\n                <div class=\"flex flex-col sm:flex-row justify-between sm:items-center gap-3 sm:gap-0\">\n                    <span class=\"text-xs sm:text-sm text-gray-600\">\n                        Showing <?php echo $offset + 1; ?> to <?php echo min($offset + $limit, $totalBookings); ?> of <?php echo $totalBookings; ?> bookings\n                    </span>\n                    <div class=\"flex flex-wrap gap-2\">\n                        <?php if ($page > 1): ?>\n                            <a href=\"?panel=expert&page=booking-management&booking_page=<?php echo $page - 1; ?>\" class=\"px-4 py-3 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm\">Previous</a>\n                        <?php else: ?>\n                            <button class=\"px-4 py-3 text-gray-500 bg-white border border-gray-300 rounded-lg disabled:opacity-50 cursor-not-allowed text-sm\" disabled>Previous</button>\n                        <?php endif; ?>\n                        \n                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>\n                            <?php if ($i == $page): ?>\n                                <button class=\"px-4 py-3 text-white bg-accent border border-accent rounded-lg text-sm min-w-[44px]\"><?php echo $i; ?></button>\n                            <?php else: ?>\n                                <a href=\"?panel=expert&page=booking-management&booking_page=<?php echo $i; ?>\" class=\"px-4 py-3 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm min-w-[44px] text-center\"><?php echo $i; ?></a>\n                            <?php endif; ?>\n                        <?php endfor; ?>\n                        \n                        <?php if ($page < $totalPages): ?>\n                            <a href=\"?panel=expert&page=booking-management&booking_page=<?php echo $page + 1; ?>\" class=\"px-4 py-3 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm\">Next</a>\n                        <?php else: ?>\n                            <button class=\"px-4 py-3 text-gray-500 bg-white border border-gray-300 rounded-lg disabled:opacity-50 cursor-not-allowed text-sm\" disabled>Next</button>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n            <?php endif; ?>\n        </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20241},"expert/expert-earnings.php":{"content":"<?php\n$page_title = \"Earnings Dashboard - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\n// Get expert profile ID\n$userId = $_SESSION['user_id'] ?? null;\n$expertProfileId = null;\n\nif ($userId) {\n    $stmt = $pdo->prepare(\"SELECT id FROM expert_profiles WHERE user_id = ?\");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    if ($profile) {\n        $expertProfileId = $profile['id'];\n    }\n}\n\n// Initialize earnings data\n$totalEarnings = 0;\n$availablePayout = 0;\n$sessionsThisMonth = 0;\n$avgPerSession = 0;\n$payoutHistory = [];\n\nif ($expertProfileId) {\n    // Get total earnings from completed bookings\n    $stmt = $pdo->prepare(\"\n        SELECT COALESCE(SUM(p.amount), 0) as total\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.id\n        WHERE b.expert_id = ? AND p.status = 'completed'\n    \");\n    $stmt->execute([$expertProfileId]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $totalEarnings = $result['total'] ?? 0;\n    \n    // Available for payout (completed but not yet paid out)\n    $availablePayout = $totalEarnings; // In a real system, subtract already paid amounts\n    \n    // Sessions this month\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(*) as count\n        FROM bookings\n        WHERE expert_id = ? \n        AND MONTH(session_datetime) = MONTH(CURRENT_DATE())\n        AND YEAR(session_datetime) = YEAR(CURRENT_DATE())\n        AND status = 'completed'\n    \");\n    $stmt->execute([$expertProfileId]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $sessionsThisMonth = $result['count'] ?? 0;\n    \n    // Average per session\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(*) as session_count\n        FROM bookings\n        WHERE expert_id = ? AND status = 'completed'\n    \");\n    $stmt->execute([$expertProfileId]);\n    $sessionCount = $stmt->fetch(PDO::FETCH_ASSOC)['session_count'] ?? 0;\n    \n    if ($sessionCount > 0) {\n        $avgPerSession = round($totalEarnings / $sessionCount, 2);\n    }\n    \n    // Get payout history (most recent payments)\n    $stmt = $pdo->prepare(\"\n        SELECT p.*, b.session_datetime, lp.full_name as learner_name\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.id\n        LEFT JOIN learner_profiles lp ON b.learner_id = lp.id\n        WHERE b.expert_id = ? AND p.status = 'completed'\n        ORDER BY p.created_at DESC\n        LIMIT 10\n    \");\n    $stmt->execute([$expertProfileId]);\n    $payoutHistory = $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n?>\n    <div class=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-8\">\n        <!-- Header -->\n        <div class=\"flex flex-col sm:flex-row justify-between sm:items-center mb-6 sm:mb-8 gap-4\">\n            <div>\n                <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-2\">Earnings Dashboard</h1>\n                <p class=\"text-sm sm:text-base text-gray-600\">Track your income, payments, and financial performance</p>\n            </div>\n            <div class=\"flex flex-col sm:flex-row gap-2 sm:gap-3\">\n                <select id=\"periodFilter\" class=\"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm\">\n                    <option value=\"month\">This Month</option>\n                    <option value=\"last_month\">Last Month</option>\n                    <option value=\"last_3_months\">Last 3 Months</option>\n                    <option value=\"year\">This Year</option>\n                </select>\n                <button class=\"bg-accent text-white px-4 py-3 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                    Request Payout\n                </button>\n            </div>\n        </div>\n\n        <!-- Earnings Summary Cards -->\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8\">\n            <div class=\"bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-lg p-4 sm:p-6 text-white\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <p class=\"text-green-100 text-xs sm:text-sm\">Total Earnings</p>\n                        <p class=\"text-2xl sm:text-3xl font-bold\">₹<?php echo number_format($totalEarnings, 0); ?></p>\n                        <p class=\"text-green-100 text-xs sm:text-sm mt-1\">All time earnings</p>\n                    </div>\n                    <div class=\"p-2 sm:p-3 bg-green-400 rounded-full\">\n                        <svg class=\"w-6 h-6 sm:w-8 sm:h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-blue-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\">₹<?php echo number_format($availablePayout, 0); ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">Available for Payout</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-purple-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\">₹<?php echo number_format($avgPerSession, 0); ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">Avg. Per Session</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 sm:p-3 bg-orange-500 rounded-full\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-3 sm:ml-4\">\n                        <p class=\"text-xl sm:text-2xl font-semibold text-gray-900\"><?php echo $sessionsThisMonth; ?></p>\n                        <p class=\"text-gray-600 text-xs sm:text-sm\">Sessions This Month</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8\">\n            <!-- Revenue Chart -->\n            <div class=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                <div class=\"flex flex-col sm:flex-row justify-between sm:items-center mb-4 sm:mb-6 gap-3\">\n                    <h2 class=\"text-lg sm:text-xl font-semibold text-gray-900\">Revenue Trend</h2>\n                    <div class=\"flex gap-2\">\n                        <button id=\"viewMonthly\" class=\"view-btn px-4 py-3 bg-accent text-white rounded text-sm\" data-view=\"monthly\">Monthly</button>\n                        <button id=\"viewWeekly\" class=\"view-btn px-4 py-3 bg-gray-200 text-gray-700 rounded text-sm\" data-view=\"weekly\">Weekly</button>\n                        <button id=\"viewDaily\" class=\"view-btn px-4 py-3 bg-gray-200 text-gray-700 rounded text-sm\" data-view=\"daily\">Daily</button>\n                    </div>\n                </div>\n                \n                <div class=\"h-80\">\n                    <canvas id=\"revenueChart\"></canvas>\n                </div>\n            </div>\n\n            <!-- Quick Stats -->\n            <div class=\"space-y-4 sm:space-y-6\">\n                <!-- This Month Performance -->\n                <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                    <h3 class=\"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4\">This Month Performance</h3>\n                    <div class=\"space-y-4\">\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Sessions Completed</span>\n                            <div class=\"text-right\">\n                                <span class=\"font-semibold text-gray-900\"><?php echo $sessionsThisMonth; ?></span>\n                            </div>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Total Earnings</span>\n                            <div class=\"text-right\">\n                                <span class=\"font-semibold text-gray-900\">₹<?php echo number_format($totalEarnings, 0); ?></span>\n                            </div>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Avg. Per Session</span>\n                            <div class=\"text-right\">\n                                <span class=\"font-semibold text-gray-900\">₹<?php echo number_format($avgPerSession, 0); ?></span>\n                            </div>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Available Payout</span>\n                            <div class=\"text-right\">\n                                <span class=\"font-semibold text-gray-900\">₹<?php echo number_format($availablePayout, 0); ?></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Recent Payments Summary -->\n                <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                    <h3 class=\"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4\">Recent Payments</h3>\n                    <?php if (!empty($payoutHistory)): ?>\n                    <div class=\"space-y-3\">\n                        <?php foreach (array_slice($payoutHistory, 0, 5) as $payment): ?>\n                        <div class=\"flex justify-between items-center py-2 border-b border-gray-100 last:border-0\">\n                            <div>\n                                <p class=\"font-medium text-gray-900 text-sm\"><?php echo htmlspecialchars($payment['learner_name'] ?? 'Unknown'); ?></p>\n                                <p class=\"text-gray-600 text-xs\"><?php echo date('M d, Y', strtotime($payment['created_at'])); ?></p>\n                            </div>\n                            <span class=\"font-semibold text-green-600\">₹<?php echo number_format($payment['amount'], 0); ?></span>\n                        </div>\n                        <?php endforeach; ?>\n                    </div>\n                    <?php else: ?>\n                    <div class=\"text-center py-8\">\n                        <svg class=\"w-12 h-12 text-gray-400 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                        <p class=\"text-gray-600 text-sm\">No payment history yet</p>\n                    </div>\n                    <?php endif; ?>\n                </div>\n\n                <!-- Payment Methods -->\n                <div class=\"bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n                    <h3 class=\"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4\">Quick Actions</h3>\n                    <div class=\"space-y-3\">\n                        <button class=\"w-full bg-accent text-white px-4 py-3 rounded-lg hover:bg-yellow-600 transition text-sm font-semibold\">\n                            Request Payout\n                        </button>\n                        <button class=\"w-full bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition text-sm font-semibold\">\n                            Download Report\n                        </button>\n                        <button class=\"w-full bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition text-sm font-semibold\">\n                            View Tax Documents\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Payout History -->\n        <div class=\"mt-6 sm:mt-8 bg-white rounded-lg shadow-lg p-4 sm:p-6\">\n            <div class=\"flex flex-col sm:flex-row justify-between sm:items-center mb-4 sm:mb-6 gap-3\">\n                <h2 class=\"text-lg sm:text-xl font-semibold text-gray-900\">Payout History</h2>\n                <button class=\"text-accent hover:text-yellow-600 text-sm font-medium text-left sm:text-right\">View All Transactions</button>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"w-full\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Date</th>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Amount</th>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Sessions</th>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Method</th>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Status</th>\n                            <th class=\"text-left py-3 px-3 sm:px-4 font-medium text-gray-700 text-xs sm:text-sm\">Transaction ID</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <?php if (empty($payoutHistory)): ?>\n                            <tr>\n                                <td colspan=\"6\" class=\"py-8 text-center text-gray-500 text-sm\">\n                                    No payment history yet. Start accepting bookings to earn!\n                                </td>\n                            </tr>\n                        <?php else: ?>\n                            <?php foreach ($payoutHistory as $payment): ?>\n                                <tr class=\"border-b border-gray-100\">\n                                    <td class=\"py-3 px-3 sm:px-4 text-xs sm:text-sm\"><?php echo date('M d, Y', strtotime($payment['created_at'])); ?></td>\n                                    <td class=\"py-3 px-3 sm:px-4 text-xs sm:text-sm\">\n                                        <span class=\"font-semibold text-gray-900\">₹<?php echo number_format($payment['amount'], 0); ?></span>\n                                    </td>\n                                    <td class=\"py-3 px-3 sm:px-4 text-xs sm:text-sm\"><?php echo $payment['learner_name'] ?? 'Unknown'; ?></td>\n                                    <td class=\"py-3 px-3 sm:px-4 text-xs sm:text-sm\"><?php echo ucfirst($payment['payment_method']); ?></td>\n                                    <td class=\"py-3 px-3 sm:px-4\">\n                                        <?php \n                                        $statusClass = $payment['status'] === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';\n                                        ?>\n                                        <span class=\"px-2 py-1 <?php echo $statusClass; ?> text-xs rounded-full\"><?php echo ucfirst($payment['status']); ?></span>\n                                    </td>\n                                    <td class=\"py-3 px-3 sm:px-4\">\n                                        <span class=\"font-mono text-xs text-gray-600\"><?php echo $payment['transaction_id'] ?? 'N/A'; ?></span>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        <?php endif; ?>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n\n    <!-- Chart.js Script -->\n    <script>\n        let revenueChart = null;\n        let currentPeriod = 'month';\n        let currentView = 'monthly';\n\n        // Initialize chart\n        async function loadChartData() {\n            try {\n                const response = await fetch(`/admin-panel/apis/expert/earnings-data.php?period=${currentPeriod}&view=${currentView}`);\n                const result = await response.json();\n                \n                if (result.success) {\n                    updateChart(result.labels, result.data);\n                }\n            } catch (error) {\n                console.error('Failed to load chart data:', error);\n            }\n        }\n\n        function updateChart(labels, data) {\n            const ctx = document.getElementById('revenueChart').getContext('2d');\n            \n            if (revenueChart) {\n                revenueChart.destroy();\n            }\n            \n            revenueChart = new Chart(ctx, {\n                type: 'line',\n                data: {\n                    labels: labels,\n                    datasets: [{\n                        label: 'Revenue (₹)',\n                        data: data,\n                        borderColor: '#F59E0B',\n                        backgroundColor: 'rgba(245, 158, 11, 0.1)',\n                        borderWidth: 3,\n                        fill: true,\n                        tension: 0.4\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            display: false\n                        }\n                    },\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            ticks: {\n                                callback: function(value) {\n                                    return '₹' + value.toLocaleString();\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n\n        // Period filter change handler\n        document.getElementById('periodFilter')?.addEventListener('change', function() {\n            currentPeriod = this.value;\n            loadChartData();\n        });\n\n        // View buttons click handler\n        document.querySelectorAll('.view-btn').forEach(btn => {\n            btn.addEventListener('click', function() {\n                // Update active state\n                document.querySelectorAll('.view-btn').forEach(b => {\n                    b.classList.remove('bg-accent', 'text-white');\n                    b.classList.add('bg-gray-200', 'text-gray-700');\n                });\n                this.classList.remove('bg-gray-200', 'text-gray-700');\n                this.classList.add('bg-accent', 'text-white');\n                \n                // Update view and reload data\n                currentView = this.dataset.view;\n                loadChartData();\n            });\n        });\n\n        // Load initial data\n        loadChartData();\n    </script>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20570},"expert/expert-learner-management.php":{"content":"<?php\n$page_title = \"Learner Management - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\n// Get expert profile ID\n$userId = $_SESSION['user_id'] ?? null;\n$expertProfileId = null;\n\nif ($userId) {\n    $stmt = $pdo->prepare(\"SELECT id FROM expert_profiles WHERE user_id = ?\");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    if ($profile) {\n        $expertProfileId = $profile['id'];\n    }\n}\n\n// Initialize data\n$totalLearners = 0;\n$activeLearners = 0;\n$avgProgress = 0;\n$avgSatisfaction = 0;\n$learners = [];\n\nif ($expertProfileId) {\n    // Get total unique learners\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(DISTINCT b.learner_id) as total\n        FROM bookings b\n        WHERE b.expert_id = ?\n    \");\n    $stmt->execute([$expertProfileId]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $totalLearners = $result['total'] ?? 0;\n    \n    // Get active learners (with bookings in the last 30 days)\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(DISTINCT b.learner_id) as active\n        FROM bookings b\n        WHERE b.expert_id = ? \n        AND b.session_datetime >= DATE_SUB(NOW(), INTERVAL 30 DAY)\n    \");\n    $stmt->execute([$expertProfileId]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $activeLearners = $result['active'] ?? 0;\n    \n    // Get average satisfaction from reviews\n    $stmt = $pdo->prepare(\"\n        SELECT AVG(rating) as avg_rating\n        FROM reviews\n        WHERE expert_id = ? AND status = 'approved'\n    \");\n    $stmt->execute([$expertProfileId]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    $avgSatisfaction = round($result['avg_rating'] ?? 0, 1);\n    \n    // Get learners with their data\n    $stmt = $pdo->prepare(\"\n        SELECT DISTINCT \n            u.id as user_id,\n            u.email,\n            lp.id as learner_profile_id,\n            lp.full_name,\n            lp.profile_photo,\n            COUNT(DISTINCT b.id) as total_sessions,\n            SUM(CASE WHEN b.status = 'completed' THEN 1 ELSE 0 END) as completed_sessions,\n            SUM(CASE WHEN b.status = 'pending' OR b.status = 'confirmed' THEN 1 ELSE 0 END) as upcoming_sessions,\n            MAX(b.session_datetime) as last_session_date,\n            MIN(CASE WHEN b.session_datetime > NOW() THEN b.session_datetime ELSE NULL END) as next_session_date,\n            AVG(r.rating) as avg_rating,\n            COALESCE(lpr.progress_percentage, 0) as progress_percentage\n        FROM bookings b\n        JOIN learner_profiles lp ON b.learner_id = lp.id\n        JOIN users u ON lp.user_id = u.id\n        LEFT JOIN reviews r ON b.id = r.booking_id AND r.expert_id = ?\n        LEFT JOIN learner_progress lpr ON lpr.learner_id = lp.id AND lpr.expert_id = ?\n        WHERE b.expert_id = ?\n        GROUP BY u.id, u.email, lp.id, lp.full_name, lp.profile_photo, lpr.progress_percentage\n        ORDER BY last_session_date DESC\n    \");\n    $stmt->execute([$expertProfileId, $expertProfileId, $expertProfileId]);\n    $learners = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    // Calculate average progress\n    if (count($learners) > 0) {\n        $totalProgress = array_sum(array_column($learners, 'progress_percentage'));\n        $avgProgress = round($totalProgress / count($learners), 0);\n    }\n}\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n        <!-- Header -->\n        <div class=\"flex justify-between items-center mb-8\">\n            <div>\n                <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Learner Management</h1>\n                <p class=\"text-gray-600\">Track and manage your learners' progress and engagement</p>\n            </div>\n            <div class=\"flex space-x-3\">\n                <button class=\"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition text-sm\">\n                    Export Data\n                </button>\n                <button class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                    Send Bulk Message\n                </button>\n            </div>\n        </div>\n\n        <!-- Summary Cards -->\n        <div class=\"grid md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-blue-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalLearners; ?></p>\n                        <p class=\"text-gray-600 text-sm\">Total Learners</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-green-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $activeLearners; ?></p>\n                        <p class=\"text-gray-600 text-sm\">Active This Month</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-yellow-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $avgProgress; ?>%</p>\n                        <p class=\"text-gray-600 text-sm\">Avg. Progress Rate</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-purple-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $avgSatisfaction > 0 ? $avgSatisfaction : 'N/A'; ?></p>\n                        <p class=\"text-gray-600 text-sm\">Avg. Satisfaction</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Filters and Search -->\n        <div class=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n            <div class=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\">\n                <div class=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n                    <div class=\"relative\">\n                        <input type=\"text\" placeholder=\"Search by name or email...\" class=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        <svg class=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                        </svg>\n                    </div>\n                    \n                    <select class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        <option>All Status</option>\n                        <option>Active</option>\n                        <option>Completed Program</option>\n                        <option>On Hold</option>\n                        <option>Inactive</option>\n                    </select>\n                    \n                    <select class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        <option>All Programs</option>\n                        <option>UX Bootcamp</option>\n                        <option>Career Coaching</option>\n                        <option>Portfolio Review</option>\n                        <option>One-time Sessions</option>\n                    </select>\n                    \n                    <select class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        <option>Sort by Name</option>\n                        <option>Sort by Progress</option>\n                        <option>Sort by Last Session</option>\n                        <option>Sort by Start Date</option>\n                    </select>\n                </div>\n                \n                <button class=\"px-4 py-2 bg-accent text-white rounded-lg hover:bg-yellow-600 transition text-sm\">Apply Filters</button>\n            </div>\n        </div>\n\n        <!-- Learners Grid -->\n        <div class=\"grid lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8\">\n            <?php if (count($learners) > 0): ?>\n                <?php foreach ($learners as $learner): \n                    $progress = round($learner['progress_percentage'] ?? 0);\n                    $rating = round($learner['avg_rating'] ?? 0, 1);\n                    $hasUpcoming = $learner['upcoming_sessions'] > 0;\n                    $hasCompleted = $learner['completed_sessions'] == $learner['total_sessions'];\n                    \n                    $progressColor = 'bg-accent';\n                    if ($progress >= 80) $progressColor = 'bg-green-500';\n                    else if ($progress >= 50) $progressColor = 'bg-blue-500';\n                    else if ($progress >= 20) $progressColor = 'bg-orange-500';\n                    \n                    $statusBadge = 'bg-gray-100 text-gray-800';\n                    $statusText = 'Inactive';\n                    if ($hasUpcoming) {\n                        $statusBadge = 'bg-green-100 text-green-800';\n                        $statusText = 'Active';\n                    } else if ($hasCompleted) {\n                        $statusBadge = 'bg-blue-100 text-blue-800';\n                        $statusText = 'Completed';\n                    }\n                    \n                    $profilePhoto = !empty($learner['profile_photo']) ? $learner['profile_photo'] : 'attached_assets/stock_images/diverse_professional_1d96e39f.jpg';\n                ?>\n                <div class=\"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition\">\n                    <div class=\"flex items-center justify-between mb-4\">\n                        <div class=\"flex items-center\">\n                            <img src=\"<?php echo htmlspecialchars($profilePhoto); ?>\" alt=\"<?php echo htmlspecialchars($learner['full_name']); ?>\" class=\"w-12 h-12 rounded-full mr-3 object-cover\">\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\"><?php echo htmlspecialchars($learner['full_name']); ?></h3>\n                                <p class=\"text-gray-600 text-sm\"><?php echo htmlspecialchars($learner['email']); ?></p>\n                            </div>\n                        </div>\n                        <div class=\"relative\">\n                            <button class=\"text-gray-400 hover:text-gray-600\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"mb-4\">\n                        <div class=\"flex justify-between items-center mb-2\">\n                            <span class=\"text-sm text-gray-600\">Progress</span>\n                            <span class=\"text-sm font-semibold text-gray-900\"><?php echo $progress; ?>%</span>\n                        </div>\n                        <div class=\"w-full bg-gray-200 rounded-full h-2\">\n                            <div class=\"<?php echo $progressColor; ?> h-2 rounded-full\" style=\"width: <?php echo $progress; ?>%\"></div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n                        <div>\n                            <span class=\"text-gray-600\">Sessions:</span>\n                            <span class=\"font-semibold ml-1\"><?php echo $learner['completed_sessions']; ?>/<?php echo $learner['total_sessions']; ?></span>\n                        </div>\n                        <div>\n                            <?php if ($learner['next_session_date']): ?>\n                                <span class=\"text-gray-600\">Next:</span>\n                                <span class=\"font-semibold ml-1\"><?php echo date('M j', strtotime($learner['next_session_date'])); ?></span>\n                            <?php elseif ($learner['last_session_date']): ?>\n                                <span class=\"text-gray-600\">Last:</span>\n                                <span class=\"font-semibold ml-1\"><?php echo date('M j', strtotime($learner['last_session_date'])); ?></span>\n                            <?php else: ?>\n                                <span class=\"text-gray-600\">-</span>\n                            <?php endif; ?>\n                        </div>\n                        <div>\n                            <span class=\"text-gray-600\">Rating:</span>\n                            <span class=\"font-semibold ml-1\"><?php echo $rating > 0 ? $rating . ' ★' : 'N/A'; ?></span>\n                        </div>\n                        <div>\n                            <span class=\"text-gray-600\">Status:</span>\n                            <span class=\"px-2 py-0.5 <?php echo $statusBadge; ?> rounded-full text-xs\"><?php echo $statusText; ?></span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex space-x-2\">\n                        <button class=\"flex-1 bg-primary text-white py-2 px-3 rounded-lg hover:bg-secondary transition text-sm\">\n                            View Details\n                        </button>\n                        <button class=\"bg-gray-200 text-gray-700 py-2 px-3 rounded-lg hover:bg-gray-300 transition text-sm\">\n                            Message\n                        </button>\n                    </div>\n                </div>\n                <?php endforeach; ?>\n            <?php else: ?>\n                <div class=\"col-span-full bg-white rounded-lg shadow-lg p-12 text-center\">\n                    <svg class=\"w-16 h-16 mx-auto text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                    </svg>\n                    <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">No Learners Yet</h3>\n                    <p class=\"text-gray-600 mb-6\">You don't have any learners yet. Start accepting bookings to see your learners here.</p>\n                    <a href=\"?panel=expert&page=dashboard\" class=\"inline-block bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition\">\n                        Go to Dashboard\n                    </a>\n                </div>\n            <?php endif; ?>\n        </div>\n\n        <!-- Bulk Actions & Reminders -->\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex justify-between items-center mb-6\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">Quick Actions & Reminders</h2>\n                <button class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                    Schedule Reminder\n                </button>\n            </div>\n            \n            <div class=\"grid md:grid-cols-3 gap-6\">\n                <!-- Recent Activity -->\n                <div class=\"border border-gray-200 rounded-lg p-4\">\n                    <h3 class=\"font-semibold text-gray-900 mb-3\">Recent Activity</h3>\n                    <div class=\"py-8 text-center\">\n                        <svg class=\"w-12 h-12 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                        <p class=\"text-sm text-gray-500\">Activity tracking</p>\n                        <p class=\"text-xs text-gray-400 mt-1\">Coming soon</p>\n                    </div>\n                </div>\n\n                <!-- Upcoming Reminders -->\n                <div class=\"border border-gray-200 rounded-lg p-4\">\n                    <h3 class=\"font-semibold text-gray-900 mb-3\">Upcoming Reminders</h3>\n                    <div class=\"py-8 text-center\">\n                        <svg class=\"w-12 h-12 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"></path>\n                        </svg>\n                        <p class=\"text-sm text-gray-500\">Reminder system</p>\n                        <p class=\"text-xs text-gray-400 mt-1\">Coming soon</p>\n                    </div>\n                </div>\n\n                <!-- Quick Actions -->\n                <div class=\"border border-gray-200 rounded-lg p-4\">\n                    <h3 class=\"font-semibold text-gray-900 mb-3\">Quick Actions</h3>\n                    <div class=\"space-y-3\">\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📧 Send Progress Report\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📅 Schedule Group Session\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📝 Create Assignment\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📊 Export Progress Data\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Learner Detail Modal (Hidden by default) -->\n    <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50\" id=\"learnerModal\">\n        <div class=\"flex items-center justify-center min-h-screen p-4\">\n            <div class=\"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6\">\n                <div class=\"flex justify-between items-center mb-6\">\n                    <h3 class=\"text-xl font-semibold text-gray-900\">Learner Details - Aarav Patel</h3>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n                \n                <div class=\"grid grid-cols-2 gap-6\">\n                    <div>\n                        <h4 class=\"font-medium text-gray-900 mb-3\">Progress Overview</h4>\n                        <div class=\"space-y-2 text-sm\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Current Program:</span>\n                                <span class=\"font-medium\">UX Bootcamp</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Sessions Completed:</span>\n                                <span class=\"font-medium\">6 of 8</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Progress:</span>\n                                <span class=\"font-medium\">75%</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Next Session:</span>\n                                <span class=\"font-medium\">Sep 30, 2:00 PM</span>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <h4 class=\"font-medium text-gray-900 mb-3\">Recent Activity</h4>\n                        <div class=\"space-y-2 text-sm\">\n                            <div class=\"text-gray-700\">✅ Completed Assignment #3</div>\n                            <div class=\"text-gray-700\">📝 Session notes updated</div>\n                            <div class=\"text-gray-700\">⭐ Rated last session 4.8/5</div>\n                            <div class=\"text-gray-700\">📅 Booked next session</div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"mt-6 flex justify-end space-x-3\">\n                    <button class=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition\">Close</button>\n                    <button class=\"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition\">Send Message</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":23866},"expert/expert-notifications.php":{"content":"<?php\n$page_title = \"Notifications - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n            </div>\n            <div class=\"flex space-x-3\">\n                <button class=\"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition text-sm\">\n                    Mark All Read\n                </button>\n                <button class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                    Settings\n                </button>\n            </div>\n        </div>\n\n        <!-- Notification Filters -->\n        <div class=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n            <div class=\"flex flex-wrap gap-4\">\n                <button class=\"px-4 py-2 bg-accent text-white rounded-lg text-sm\">All (12)</button>\n                <button class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm\">Booking Requests (5)</button>\n                <button class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm\">Messages (3)</button>\n                <button class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm\">Payments (2)</button>\n                <button class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm\">System (2)</button>\n            </div>\n        </div>\n\n        <div class=\"grid lg:grid-cols-3 gap-8\">\n            <!-- Main Notifications List -->\n            <div class=\"lg:col-span-2 space-y-4\">\n                <!-- Unread Notification 1 -->\n                <div class=\"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 shadow-sm\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-blue-500 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">New Booking Request</h3>\n                                <p class=\"text-gray-700 mb-2\">Aarav Patel has requested a UX Design Consultation session for Sep 28, 2:00 PM IST. Package includes portfolio review and career guidance.</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    2 hours ago\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"flex space-x-2\">\n                            <button class=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition\">Approve</button>\n                            <button class=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition\">Decline</button>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Unread Notification 2 -->\n                <div class=\"bg-green-50 border-l-4 border-green-500 rounded-lg p-6 shadow-sm\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-green-500 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">Payment Received</h3>\n                                <p class=\"text-gray-700 mb-2\">Payment of ₹1,500 received from Sneha Gupta for Career Transition Coaching session scheduled on Sep 29.</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    3 hours ago\n                                </div>\n                            </div>\n                        </div>\n                        <button class=\"text-green-600 hover:text-green-700 text-sm\">View Details</button>\n                    </div>\n                </div>\n\n                <!-- Unread Notification 3 -->\n                <div class=\"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-6 shadow-sm\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-purple-500 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">New Message</h3>\n                                <p class=\"text-gray-700 mb-2\">Rahul Sharma sent you a message: \"Thank you for the portfolio review session! Could you share the design resources you mentioned?\"</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    4 hours ago\n                                </div>\n                            </div>\n                        </div>\n                        <button class=\"text-purple-600 hover:text-purple-700 text-sm\">Reply</button>\n                    </div>\n                </div>\n\n                <!-- Read Notification 1 -->\n                <div class=\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm opacity-75\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-gray-400 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">Session Rated</h3>\n                                <p class=\"text-gray-700 mb-2\">Ananya Singh rated your UX Research Workshop session 5 stars with review: \"Excellent session! Learned so much about user research methodologies.\"</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    Yesterday\n                                </div>\n                            </div>\n                        </div>\n                        <button class=\"text-gray-400 text-sm\">Read</button>\n                    </div>\n                </div>\n\n                <!-- Read Notification 2 -->\n                <div class=\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm opacity-75\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-gray-400 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">Assignment Submitted</h3>\n                                <p class=\"text-gray-700 mb-2\">Vikram Kumar submitted his Design Systems assignment for review. The assignment includes component library documentation and usage guidelines.</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    Yesterday\n                                </div>\n                            </div>\n                        </div>\n                        <button class=\"text-gray-400 text-sm\">Read</button>\n                    </div>\n                </div>\n\n                <!-- Read Notification 3 -->\n                <div class=\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm opacity-75\">\n                    <div class=\"flex items-start justify-between\">\n                        <div class=\"flex items-start\">\n                            <div class=\"p-2 bg-gray-400 rounded-full mr-4\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">Payout Processed</h3>\n                                <p class=\"text-gray-700 mb-2\">Your monthly payout of ₹42,500 has been processed and will be credited to your account ending in 1234 within 2-3 business days.</p>\n                                <div class=\"flex items-center text-sm text-gray-600\">\n                                    <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                    </svg>\n                                    2 days ago\n                                </div>\n                            </div>\n                        </div>\n                        <button class=\"text-gray-400 text-sm\">Read</button>\n                    </div>\n                </div>\n\n                <!-- Load More -->\n                <div class=\"text-center py-6\">\n                    <button class=\"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition\">\n                        Load More Notifications\n                    </button>\n                </div>\n            </div>\n\n            <!-- Sidebar -->\n            <div class=\"space-y-6\">\n                <!-- Quick Stats -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Today's Summary</h3>\n                    <div class=\"space-y-3\">\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">New Bookings</span>\n                            <span class=\"font-semibold text-blue-600\">3</span>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Messages</span>\n                            <span class=\"font-semibold text-purple-600\">5</span>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Completed Sessions</span>\n                            <span class=\"font-semibold text-green-600\">2</span>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600\">Earnings Today</span>\n                            <span class=\"font-semibold text-accent\">₹3,000</span>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Upcoming Sessions -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Upcoming Sessions</h3>\n                    <div class=\"space-y-4\">\n                        <div class=\"border border-gray-200 rounded-lg p-3\">\n                            <div class=\"flex items-center mb-2\">\n                                <img src=\"https://via.placeholder.com/32x32\" alt=\"Aarav\" class=\"w-8 h-8 rounded-full mr-2\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900 text-sm\">Aarav Patel</p>\n                                    <p class=\"text-gray-600 text-xs\">UX Consultation</p>\n                                </div>\n                            </div>\n                            <div class=\"text-xs text-gray-600\">\n                                Today, 2:00 PM - 3:00 PM IST\n                            </div>\n                        </div>\n                        \n                        <div class=\"border border-gray-200 rounded-lg p-3\">\n                            <div class=\"flex items-center mb-2\">\n                                <img src=\"https://via.placeholder.com/32x32\" alt=\"Sneha\" class=\"w-8 h-8 rounded-full mr-2\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900 text-sm\">Sneha Gupta</p>\n                                    <p class=\"text-gray-600 text-xs\">Career Coaching</p>\n                                </div>\n                            </div>\n                            <div class=\"text-xs text-gray-600\">\n                                Tomorrow, 10:00 AM - 11:30 AM IST\n                            </div>\n                        </div>\n                        \n                        <div class=\"border border-gray-200 rounded-lg p-3\">\n                            <div class=\"flex items-center mb-2\">\n                                <img src=\"https://via.placeholder.com/32x32\" alt=\"Ananya\" class=\"w-8 h-8 rounded-full mr-2\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900 text-sm\">Ananya Singh</p>\n                                    <p class=\"text-gray-600 text-xs\">Research Workshop</p>\n                                </div>\n                            </div>\n                            <div class=\"text-xs text-gray-600\">\n                                Oct 5, 11:00 AM - 12:30 PM IST\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <button class=\"w-full mt-4 text-accent hover:text-yellow-600 text-sm font-medium\">\n                        View All Sessions →\n                    </button>\n                </div>\n\n                <!-- Quick Actions -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\n                    <div class=\"space-y-3\">\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📧 Send Message to Learner\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📅 Block Time Slot\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📝 Create Assignment\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            ⚙️ Update Profile\n                        </button>\n                    </div>\n                </div>\n\n                <!-- Notification Settings -->\n                <div class=\"bg-gray-50 rounded-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Notification Preferences</h3>\n                    <div class=\"space-y-3\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">Email notifications</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">Push notifications</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">SMS notifications</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">Daily summary</span>\n                        </div>\n                    </div>\n                    \n                    <button class=\"w-full mt-4 bg-accent text-white py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                        Update Preferences\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20649},"expert/expert-profile-setup.php":{"content":"<?php\n$page_title = \"Profile Setup - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-4xl mx-auto px-4 py-8\">\n        <!-- Header -->\n        <div class=\"mb-8 text-center\">\n            <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Complete Your Expert Profile</h1>\n            <p class=\"text-gray-600\">Set up your profile to start connecting with learners worldwide</p>\n        </div>\n\n        <!-- Step Indicator -->\n        <div class=\"mb-8\">\n            <div class=\"flex items-center justify-center\">\n                <!-- Step 1 -->\n                <div id=\"step1Indicator\" class=\"flex items-center\">\n                    <div class=\"w-10 h-10 bg-accent text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        1\n                    </div>\n                    <span class=\"ml-2 text-sm text-accent font-medium hidden sm:inline\">Profile Info</span>\n                </div>\n                <div id=\"line1\" class=\"w-16 h-1 bg-gray-300 mx-2\"></div>\n                <!-- Step 2 -->\n                <div id=\"step2Indicator\" class=\"flex items-center\">\n                    <div class=\"w-10 h-10 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        2\n                    </div>\n                    <span class=\"ml-2 text-sm text-gray-500 font-medium hidden sm:inline\">Pricing</span>\n                </div>\n                <div id=\"line2\" class=\"w-16 h-1 bg-gray-300 mx-2\"></div>\n                <!-- Step 3 -->\n                <div id=\"step3Indicator\" class=\"flex items-center\">\n                    <div class=\"w-10 h-10 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        3\n                    </div>\n                    <span class=\"ml-2 text-sm text-gray-500 font-medium hidden sm:inline\">Availability</span>\n                </div>\n            </div>\n        </div>\n\n        <!-- Step Content -->\n        <div class=\"bg-white rounded-lg shadow-lg p-6 md:p-8\">\n            <!-- Step 1: Profile Information -->\n            <div id=\"step1Content\" class=\"step-content\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Profile Information</h2>\n                \n                <!-- Profile Photo -->\n                <div class=\"flex items-center space-x-6 mb-6\">\n                    <div id=\"profilePhotoPreview\" class=\"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-gray-400\">\n                        <svg class=\"w-12 h-12\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\n                        </svg>\n                    </div>\n                    <div>\n                        <input type=\"file\" id=\"profilePhotoInput\" accept=\"image/*\" class=\"hidden\">\n                        <button type=\"button\" id=\"uploadPhotoBtn\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition\">\n                            Upload Photo\n                        </button>\n                        <p class=\"text-gray-600 text-sm mt-2\">JPG, PNG up to 5MB</p>\n                    </div>\n                </div>\n\n                <!-- Basic Info -->\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name *</label>\n                        <input type=\"text\" id=\"fullName\" placeholder=\"Enter your full name\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Professional Title *</label>\n                        <input type=\"text\" id=\"tagline\" placeholder=\"e.g., Senior UX Designer, Business Coach\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                    </div>\n\n                    <div class=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Years of Experience *</label>\n                            <select id=\"experience\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                <option value=\"\">Select years</option>\n                                <option value=\"2\">1-2 years</option>\n                                <option value=\"4\">3-5 years</option>\n                                <option value=\"7\">5-8 years</option>\n                                <option value=\"9\">8-10 years</option>\n                                <option value=\"10\">10+ years</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Location *</label>\n                            <input type=\"text\" id=\"location\" placeholder=\"City, Country\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                        </div>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Professional Bio *</label>\n                        <textarea rows=\"4\" id=\"bioText\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Tell learners about your background, experience, and what makes you unique...\"></textarea>\n                        <p class=\"text-gray-500 text-sm mt-1\">Minimum 100 characters</p>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Primary Expert Category *</label>\n                        <select id=\"category\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            <option value=\"\">Select category</option>\n                            <option value=\"coach\">Coach</option>\n                            <option value=\"mentor\">Mentor</option>\n                            <option value=\"consultant\">Consultant</option>\n                            <option value=\"trainer\">Trainer</option>\n                            <option value=\"freelancer\">Freelancer</option>\n                        </select>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Expertise Tags *</label>\n                        <div id=\"expertiseTags\" class=\"flex flex-wrap gap-2 mb-3\"></div>\n                        <input type=\"text\" id=\"expertiseInput\" placeholder=\"Add expertise tags (press Enter)\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                        <p class=\"text-gray-500 text-sm mt-1\">Add skills, tools, or areas of expertise. Max 10 tags.</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Step 2: Pricing Models -->\n            <div id=\"step2Content\" class=\"step-content hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Pricing Models</h2>\n                \n                <div class=\"space-y-6\">\n                    <!-- Per Session -->\n                    <div class=\"border border-gray-200 rounded-lg p-5\">\n                        <div class=\"flex items-center justify-between mb-4\">\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Per Session</h3>\n                                <p class=\"text-gray-600 text-sm\">One-time sessions</p>\n                            </div>\n                            <label class=\"relative inline-flex items-center cursor-pointer\">\n                                <input type=\"checkbox\" id=\"enablePerSession\" class=\"sr-only peer\">\n                                <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                            </label>\n                        </div>\n                        <div class=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">60 minutes</label>\n                                <div class=\"flex\">\n                                    <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                    <input type=\"number\" id=\"price60\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                </div>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">30 minutes</label>\n                                <div class=\"flex\">\n                                    <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                    <input type=\"number\" id=\"price30\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Package Deal -->\n                    <div class=\"border border-gray-200 rounded-lg p-5\">\n                        <div class=\"flex items-center justify-between mb-4\">\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Package Deal</h3>\n                                <p class=\"text-gray-600 text-sm\">Multiple sessions with discount</p>\n                            </div>\n                            <label class=\"relative inline-flex items-center cursor-pointer\">\n                                <input type=\"checkbox\" id=\"enablePackage\" class=\"sr-only peer\">\n                                <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                            </label>\n                        </div>\n                        <div class=\"grid grid-cols-3 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">4 Sessions</label>\n                                <div class=\"flex\">\n                                    <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                    <input type=\"number\" id=\"package4\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                </div>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">8 Sessions</label>\n                                <div class=\"flex\">\n                                    <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                    <input type=\"number\" id=\"package8\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                </div>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">12 Sessions</label>\n                                <div class=\"flex\">\n                                    <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                    <input type=\"number\" id=\"package12\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Subscription -->\n                    <div class=\"border border-gray-200 rounded-lg p-5\">\n                        <div class=\"flex items-center justify-between mb-4\">\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Monthly Subscription</h3>\n                                <p class=\"text-gray-600 text-sm\">Ongoing mentorship</p>\n                            </div>\n                            <label class=\"relative inline-flex items-center cursor-pointer\">\n                                <input type=\"checkbox\" id=\"enableSubscription\" class=\"sr-only peer\">\n                                <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                            </label>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Monthly Price</label>\n                            <div class=\"flex\">\n                                <span class=\"inline-flex items-center px-3 py-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500\">₹</span>\n                                <input type=\"number\" id=\"subscriptionPrice\" placeholder=\"0\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                <span class=\"inline-flex items-center px-3 py-2 rounded-r-lg border border-l-0 border-gray-300 bg-gray-50 text-gray-500\">/month</span>\n                            </div>\n                            <p class=\"text-gray-500 text-sm mt-1\">Includes 4 sessions + unlimited chat support</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Step 3: Availability -->\n            <div id=\"step3Content\" class=\"step-content hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Availability Schedule</h2>\n                \n                <div class=\"mb-6\">\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Timezone</label>\n                    <select id=\"timezone\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                        <option>UTC (Coordinated Universal Time)</option>\n                        <option>EST (Eastern Standard Time)</option>\n                        <option>PST (Pacific Standard Time)</option>\n                        <option>IST (India Standard Time)</option>\n                        <option>GMT (Greenwich Mean Time)</option>\n                    </select>\n                </div>\n\n                <div class=\"space-y-3\">\n                    <!-- Monday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"monday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"monday\" class=\"font-medium text-gray-700\">Monday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"mondayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"mondayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Tuesday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"tuesday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"tuesday\" class=\"font-medium text-gray-700\">Tuesday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"tuesdayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"tuesdayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Wednesday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"wednesday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"wednesday\" class=\"font-medium text-gray-700\">Wednesday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"wednesdayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"wednesdayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Thursday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"thursday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"thursday\" class=\"font-medium text-gray-700\">Thursday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"thursdayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"thursdayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Friday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"friday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"friday\" class=\"font-medium text-gray-700\">Friday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"fridayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"fridayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Saturday -->\n                    <div class=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"saturday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"saturday\" class=\"font-medium text-gray-700\">Saturday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"saturdayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"saturdayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <!-- Sunday -->\n                    <div class=\"flex items-center justify-between py-3\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"sunday\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <label for=\"sunday\" class=\"font-medium text-gray-700\">Sunday</label>\n                        </div>\n                        <div class=\"flex items-center space-x-2\">\n                            <select id=\"sundayStart\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>9:00 AM</option>\n                                <option>10:00 AM</option>\n                                <option>11:00 AM</option>\n                                <option>12:00 PM</option>\n                                <option>1:00 PM</option>\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                            </select>\n                            <span class=\"text-gray-500\">to</span>\n                            <select id=\"sundayEnd\" class=\"px-3 py-1 border border-gray-300 rounded text-sm\">\n                                <option>2:00 PM</option>\n                                <option>3:00 PM</option>\n                                <option>4:00 PM</option>\n                                <option>5:00 PM</option>\n                                <option>6:00 PM</option>\n                                <option>7:00 PM</option>\n                                <option>8:00 PM</option>\n                                <option>9:00 PM</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Navigation Buttons -->\n            <div class=\"flex justify-between mt-8 pt-6 border-t border-gray-200\">\n                <button id=\"prevBtn\" class=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed\" disabled>\n                    Previous\n                </button>\n                <button id=\"nextBtn\" class=\"px-6 py-3 bg-accent text-white rounded-lg hover:bg-yellow-600 transition\">\n                    Next Step\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        let currentStep = 1;\n        const totalSteps = 3;\n        const expertiseTags = [];\n\n        // Load basic info from registration\n        const basicInfo = JSON.parse(sessionStorage.getItem('expertBasicInfo') || '{}');\n        if (basicInfo.name) {\n            document.getElementById('fullName').value = basicInfo.name;\n        }\n\n        // Step Navigation\n        function showStep(step) {\n            // Hide all steps\n            document.querySelectorAll('.step-content').forEach(el => el.classList.add('hidden'));\n            \n            // Show current step\n            document.getElementById(`step${step}Content`).classList.remove('hidden');\n            \n            // Update indicators\n            for (let i = 1; i <= totalSteps; i++) {\n                const indicator = document.getElementById(`step${i}Indicator`).querySelector('div');\n                const label = document.getElementById(`step${i}Indicator`).querySelector('span');\n                const line = document.getElementById(`line${i}`);\n                \n                if (i < step) {\n                    indicator.className = 'w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-semibold';\n                    indicator.textContent = '✓';\n                    label.className = 'ml-2 text-sm text-green-600 font-medium hidden sm:inline';\n                    if (line) line.className = 'w-16 h-1 bg-green-500 mx-2';\n                } else if (i === step) {\n                    indicator.className = 'w-10 h-10 bg-accent text-white rounded-full flex items-center justify-center text-sm font-semibold';\n                    indicator.textContent = i;\n                    label.className = 'ml-2 text-sm text-accent font-medium hidden sm:inline';\n                } else {\n                    indicator.className = 'w-10 h-10 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-semibold';\n                    indicator.textContent = i;\n                    label.className = 'ml-2 text-sm text-gray-500 font-medium hidden sm:inline';\n                    if (line) line.className = 'w-16 h-1 bg-gray-300 mx-2';\n                }\n            }\n            \n            // Update buttons\n            document.getElementById('prevBtn').disabled = step === 1;\n            document.getElementById('nextBtn').textContent = step === totalSteps ? 'Complete Profile' : 'Next Step';\n        }\n\n        // Previous Button\n        document.getElementById('prevBtn').addEventListener('click', () => {\n            if (currentStep > 1) {\n                currentStep--;\n                showStep(currentStep);\n            }\n        });\n\n        // Next Button\n        document.getElementById('nextBtn').addEventListener('click', () => {\n            if (currentStep < totalSteps) {\n                currentStep++;\n                showStep(currentStep);\n            } else {\n                // Save profile (placeholder)\n                alert('Profile setup complete! Redirecting to dashboard...');\n                window.location.href = '?panel=expert&page=dashboard';\n            }\n        });\n\n        // Profile Photo Upload\n        document.getElementById('uploadPhotoBtn').addEventListener('click', () => {\n            document.getElementById('profilePhotoInput').click();\n        });\n\n        document.getElementById('profilePhotoInput').addEventListener('change', function(e) {\n            const file = e.target.files[0];\n            if (file) {\n                const reader = new FileReader();\n                reader.onload = function(e) {\n                    const preview = document.getElementById('profilePhotoPreview');\n                    preview.innerHTML = `<img src=\"${e.target.result}\" class=\"w-24 h-24 rounded-full object-cover\">`;\n                };\n                reader.readAsDataURL(file);\n            }\n        });\n\n        // Expertise Tags\n        document.getElementById('expertiseInput').addEventListener('keypress', function(e) {\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                const tag = this.value.trim();\n                if (tag && expertiseTags.length < 10 && !expertiseTags.includes(tag)) {\n                    expertiseTags.push(tag);\n                    updateExpertiseTags();\n                    this.value = '';\n                }\n            }\n        });\n\n        function updateExpertiseTags() {\n            const container = document.getElementById('expertiseTags');\n            container.innerHTML = expertiseTags.map(tag => `\n                <span class=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-accent/10 text-accent\">\n                    ${tag}\n                    <button onclick=\"removeTag('${tag}')\" class=\"ml-2 focus:outline-none\">\n                        <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                    </button>\n                </span>\n            `).join('');\n        }\n\n        function removeTag(tag) {\n            const index = expertiseTags.indexOf(tag);\n            if (index > -1) {\n                expertiseTags.splice(index, 1);\n                updateExpertiseTags();\n            }\n        }\n\n        // Initialize\n        showStep(1);\n    </script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":36046},"expert/expert-session-execution.php":{"content":"<?php\n$page_title = \"Session Execution - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                            </svg>\n                            Learner: Aarav Patel\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                            </svg>\n                            Today, 2:00 PM - 3:00 PM IST\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                            </svg>\n                            Duration: 60 minutes\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Session Status and Timer -->\n                <div class=\"text-right\">\n                    <div class=\"mb-4\">\n                        <span class=\"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full\">Session Active</span>\n                    </div>\n                    <div class=\"text-2xl font-mono font-bold text-primary mb-2\">24:35</div>\n                    <div class=\"text-sm text-gray-600\">Remaining</div>\n                </div>\n            </div>\n\n            <!-- Quick Actions -->\n            <div class=\"flex space-x-4 mt-6 pt-6 border-t border-gray-200\">\n                <button class=\"bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition font-semibold flex items-center\">\n                    <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"></path>\n                    </svg>\n                    Join Video Call\n                </button>\n                <button class=\"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                    <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\"></path>\n                    </svg>\n                    Share Screen\n                </button>\n                <button class=\"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                    <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"></path>\n                    </svg>\n                    Start Recording\n                </button>\n                <button class=\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition flex items-center\">\n                    <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                    </svg>\n                    End Session\n                </button>\n            </div>\n        </div>\n\n        <div class=\"grid lg:grid-cols-3 gap-8\">\n            <!-- Main Content Area -->\n            <div class=\"lg:col-span-2 space-y-8\">\n                <!-- Session Notes -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Session Notes</h2>\n                        <div class=\"flex space-x-2\">\n                            <button class=\"text-gray-600 hover:text-gray-800 text-sm\">Auto-save: On</button>\n                            <button class=\"bg-accent text-white px-3 py-1 rounded text-sm hover:bg-yellow-600\">Save</button>\n                        </div>\n                    </div>\n                    \n                    <!-- Rich Text Editor Toolbar -->\n                    <div class=\"border border-gray-300 rounded-t-lg p-2 bg-gray-50 flex space-x-2\">\n                        <button class=\"p-1 hover:bg-gray-200 rounded\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 4h8a4 4 0 110 8H6z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"p-1 hover:bg-gray-200 rounded\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2\"></path>\n                            </svg>\n                        </button>\n                        <div class=\"border-l border-gray-300 mx-2\"></div>\n                        <button class=\"p-1 hover:bg-gray-200 rounded font-bold text-sm\">B</button>\n                        <button class=\"p-1 hover:bg-gray-200 rounded italic text-sm\">I</button>\n                        <button class=\"p-1 hover:bg-gray-200 rounded underline text-sm\">U</button>\n                        <div class=\"border-l border-gray-300 mx-2\"></div>\n                        <button class=\"p-1 hover:bg-gray-200 rounded\">\n                            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 10h16M4 14h16M4 18h16\"></path>\n                            </svg>\n                        </button>\n                    </div>\n                    \n                    <textarea rows=\"12\" class=\"w-full px-4 py-3 border border-gray-300 border-t-0 rounded-b-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent resize-none\" placeholder=\"Document your session notes, key discussions, learner progress, and action items...\">\nSession Date: September 28, 2025\nLearner: Aarav Patel\nTopic: UX Design Portfolio Review\n\nKey Discussion Points:\n• Reviewed current portfolio structure and visual hierarchy\n• Discussed case study presentation best practices\n• Identified areas for improvement in user research documentation\n\nLearner Strengths:\n• Strong visual design skills\n• Good understanding of design principles\n• Enthusiastic and receptive to feedback\n\nAreas for Improvement:\n• Need to strengthen UX research methodology\n• Case studies lack clear problem statements\n• Portfolio needs better storytelling structure\n\nAction Items for Learner:\n1. Revise portfolio case studies with clear problem/solution framework\n2. Add user research documentation for 2 main projects\n3. Create a design process timeline for each case study\n4. Schedule follow-up session in 2 weeks\n\nResources Shared:\n• UX Portfolio Guidelines document\n• Case study template\n• User research methodology cheat sheet\n\nNext Session Focus:\n• Review updated portfolio case studies\n• Deep dive into user research techniques\n• Prepare for upcoming job interviews\n                    </textarea>\n                </div>\n\n                <!-- Resource Upload Section -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Share Resources</h2>\n                        <button class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition text-sm\">\n                            Upload File\n                        </button>\n                    </div>\n                    \n                    <!-- Drag and Drop Area -->\n                    <div class=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6 hover:border-accent transition\">\n                        <svg class=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\n                            <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                        </svg>\n                        <div class=\"mt-4\">\n                            <p class=\"text-lg text-gray-600\">Drop files here or click to browse</p>\n                            <p class=\"text-sm text-gray-500 mt-1\">PDFs, Documents, Images up to 50MB</p>\n                        </div>\n                    </div>\n                    \n                    <!-- Uploaded Files -->\n                    <div class=\"space-y-3\">\n                        <div class=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                            <div class=\"flex items-center\">\n                                <svg class=\"w-8 h-8 text-red-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"></path>\n                                </svg>\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">UX Portfolio Guidelines.pdf</p>\n                                    <p class=\"text-sm text-gray-600\">2.4 MB • Uploaded just now</p>\n                                </div>\n                            </div>\n                            <div class=\"flex space-x-2\">\n                                <button class=\"text-primary hover:text-secondary text-sm\">Share</button>\n                                <button class=\"text-red-600 hover:text-red-700 text-sm\">Remove</button>\n                            </div>\n                        </div>\n                        \n                        <div class=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                            <div class=\"flex items-center\">\n                                <svg class=\"w-8 h-8 text-green-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                                </svg>\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Case Study Template.docx</p>\n                                    <p class=\"text-sm text-gray-600\">856 KB • Uploaded just now</p>\n                                </div>\n                            </div>\n                            <div class=\"flex space-x-2\">\n                                <button class=\"text-primary hover:text-secondary text-sm\">Share</button>\n                                <button class=\"text-red-600 hover:text-red-700 text-sm\">Remove</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Assignment Creation -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Create Assignment</h2>\n                        <button class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                            Send Assignment\n                        </button>\n                    </div>\n                    \n                    <form class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Assignment Title</label>\n                            <input type=\"text\" placeholder=\"e.g., Portfolio Case Study Revision\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        </div>\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Due Date</label>\n                            <input type=\"date\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                        </div>\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Instructions</label>\n                            <textarea rows=\"4\" placeholder=\"Provide detailed instructions for the assignment...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\nBased on our session discussion, please revise your portfolio with the following:\n\n1. Update your main case study to include:\n   - Clear problem statement (what user problem you're solving)\n   - Research methodology and findings\n   - Design process timeline\n   - Final solution with key metrics/results\n\n2. Add user research documentation for at least 2 projects\n\n3. Create a compelling narrative that shows your design thinking process\n\n4. Include mockups and prototypes with brief explanations\n\nPlease share your updated portfolio link before our next session.\n                            </textarea>\n                        </div>\n                        \n                        <div class=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Estimated Time</label>\n                                <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                                    <option>2-3 hours</option>\n                                    <option>4-5 hours</option>\n                                    <option>6-8 hours</option>\n                                    <option>1-2 days</option>\n                                    <option>1 week</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Difficulty Level</label>\n                                <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\">\n                                    <option>Beginner</option>\n                                    <option>Intermediate</option>\n                                    <option>Advanced</option>\n                                </select>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <!-- Sidebar -->\n            <div class=\"space-y-6\">\n                <!-- Learner Profile -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <div class=\"text-center mb-4\">\n                        <img src=\"https://via.placeholder.com/80x80\" alt=\"Aarav Patel\" class=\"w-20 h-20 rounded-full mx-auto mb-3\">\n                        <h3 class=\"font-semibold text-gray-900\">Aarav Patel</h3>\n                        <p class=\"text-gray-600 text-sm\">UX Designer</p>\n                        <p class=\"text-gray-500 text-xs\">Member since Aug 2025</p>\n                    </div>\n                    \n                    <div class=\"space-y-3 text-sm\">\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Sessions with you:</span>\n                            <span class=\"font-medium\">3</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Current level:</span>\n                            <span class=\"font-medium\">Beginner</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Goals:</span>\n                            <span class=\"font-medium\">Career transition</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Timezone:</span>\n                            <span class=\"font-medium\">IST</span>\n                        </div>\n                    </div>\n                    \n                    <button class=\"w-full mt-4 bg-primary text-white py-2 rounded-lg hover:bg-secondary transition text-sm\">\n                        View Full Profile\n                    </button>\n                </div>\n\n                <!-- Session Agenda -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Session Agenda</h3>\n                    <div class=\"space-y-3\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700 line-through\">Introduction & Goals (5 min)</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700 line-through\">Portfolio Review (20 min)</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700 line-through\">Case Study Deep Dive (20 min)</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">Next Steps & Assignment (10 min)</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mr-3\">\n                            <span class=\"text-sm text-gray-700\">Q&A & Wrap-up (5 min)</span>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Quick Actions -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\n                    <div class=\"space-y-3\">\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📝 Send Quick Message\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📅 Schedule Follow-up\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            📊 View Progress Report\n                        </button>\n                        <button class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition\">\n                            ⭐ Rate This Session\n                        </button>\n                    </div>\n                </div>\n\n                <!-- Technical Info -->\n                <div class=\"bg-gray-50 rounded-lg p-4\">\n                    <h4 class=\"font-medium text-gray-900 mb-3\">Session Info</h4>\n                    <div class=\"space-y-2 text-xs text-gray-600\">\n                        <div class=\"flex justify-between\">\n                            <span>Connection:</span>\n                            <span class=\"text-green-600\">Stable</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span>Recording:</span>\n                            <span class=\"text-red-600\">Not Started</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span>Screen Share:</span>\n                            <span class=\"text-gray-500\">Inactive</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span>Session ID:</span>\n                            <span class=\"font-mono\">SES-001-2025</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":22880},"expert/expert-workflow-builder.php":{"content":"<?php\n$page_title = \"Workflow Builder - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n\n        <div class=\"grid lg:grid-cols-3 gap-8\">\n            <!-- Main Content -->\n            <div class=\"lg:col-span-2 space-y-8\">\n                <!-- AI Template Section -->\n                <div class=\"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-200\">\n                    <div class=\"flex items-center mb-4\">\n                        <div class=\"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <h2 class=\"text-xl font-semibold text-gray-900\">AI-Powered Workflow Generator</h2>\n                            <p class=\"text-gray-600 text-sm\">Let AI create a customized workflow based on your expertise</p>\n                        </div>\n                    </div>\n                    \n                    <div class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">What type of workflow do you want to create?</label>\n                            <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\">\n                                <option>UX Design Mentorship Program</option>\n                                <option>Business Strategy Consultation</option>\n                                <option>Career Coaching Journey</option>\n                                <option>Technical Skill Training</option>\n                                <option>Creative Project Guidance</option>\n                                <option>Custom Workflow</option>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Session Duration & Frequency</label>\n                            <div class=\"grid grid-cols-2 gap-4\">\n                                <select class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\">\n                                    <option>4 weeks program</option>\n                                    <option>8 weeks program</option>\n                                    <option>12 weeks program</option>\n                                    <option>Custom duration</option>\n                                </select>\n                                <select class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\">\n                                    <option>Weekly sessions</option>\n                                    <option>Bi-weekly sessions</option>\n                                    <option>One-time session</option>\n                                </select>\n                            </div>\n                        </div>\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Workflow Description</label>\n                            <textarea rows=\"4\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm\" placeholder=\"Describe how you want the workflow to be structured. Include your teaching style, specific goals, key milestones, and any unique approaches you'd like to incorporate...\"></textarea>\n                            <p class=\"text-xs text-gray-500 mt-1\">This description will help AI generate a workflow that matches your teaching style and objectives.</p>\n                        </div>\n                        \n                        <button class=\"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition font-semibold flex items-center justify-center\">\n                            <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                            </svg>\n                            Generate AI Workflow\n                        </button>\n                    </div>\n                </div>\n\n                <!-- Manual Workflow Builder -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <div class=\"flex justify-between items-center mb-6\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Manual Workflow Builder</h2>\n                        <button class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition text-sm\">\n                            + Add Step\n                        </button>\n                    </div>\n                    \n                    <!-- Workflow Steps -->\n                    <div class=\"space-y-6\">\n                        <!-- Step 1 -->\n                        <div class=\"border border-gray-200 rounded-lg p-4\">\n                            <div class=\"flex items-center justify-between mb-4\">\n                                <div class=\"flex items-center\">\n                                    <div class=\"w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center text-sm font-semibold mr-3\">1</div>\n                                    <h3 class=\"font-semibold text-gray-900\">Discovery Session</h3>\n                                </div>\n                                <div class=\"flex space-x-2\">\n                                    <button class=\"text-gray-400 hover:text-gray-600\">\n                                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"></path>\n                                        </svg>\n                                    </button>\n                                    <button class=\"text-gray-400 hover:text-red-600\">\n                                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                                        </svg>\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            <div class=\"space-y-4\">\n                                <div>\n                                    <label class=\"block text-sm font-medium text-gray-700 mb-1\">Step Description</label>\n                                    <textarea rows=\"2\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\" placeholder=\"Describe what happens in this step...\">Understanding learner's background, goals, and current skill level</textarea>\n                                </div>\n                                \n                                <div class=\"grid grid-cols-2 gap-4\">\n                                    <div>\n                                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Duration</label>\n                                        <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm\">\n                                            <option>60 minutes</option>\n                                            <option>90 minutes</option>\n                                            <option>30 minutes</option>\n                                        </select>\n                                    </div>\n                                    <div>\n                                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Deliverables</label>\n                                        <input type=\"text\" placeholder=\"Skills assessment, goals document\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm\">\n                                    </div>\n                                </div>\n\n                                <!-- Assignments for this step -->\n                                <div>\n                                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Pre-session Assignment</label>\n                                    <div class=\"border border-gray-200 rounded-lg p-3 bg-gray-50\">\n                                        <input type=\"text\" placeholder=\"Assignment title\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none mb-2 text-sm\">\n                                        <textarea rows=\"2\" placeholder=\"Assignment description and instructions...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none text-sm\"></textarea>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Step 2 -->\n                        <div class=\"border border-gray-200 rounded-lg p-4\">\n                            <div class=\"flex items-center justify-between mb-4\">\n                                <div class=\"flex items-center\">\n                                    <div class=\"w-8 h-8 bg-accent text-white rounded-full flex items-center justify-center text-sm font-semibold mr-3\">2</div>\n                                    <h3 class=\"font-semibold text-gray-900\">Foundation Building</h3>\n                                </div>\n                                <div class=\"flex space-x-2\">\n                                    <button class=\"text-gray-400 hover:text-gray-600\">\n                                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"></path>\n                                        </svg>\n                                    </button>\n                                    <button class=\"text-gray-400 hover:text-red-600\">\n                                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                                        </svg>\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            <div class=\"space-y-4\">\n                                <div>\n                                    <label class=\"block text-sm font-medium text-gray-700 mb-1\">Step Description</label>\n                                    <textarea rows=\"2\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm\" placeholder=\"Describe what happens in this step...\">Core principles and fundamental concepts introduction</textarea>\n                                </div>\n                                \n                                <div class=\"grid grid-cols-2 gap-4\">\n                                    <div>\n                                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Duration</label>\n                                        <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm\">\n                                            <option>60 minutes</option>\n                                            <option>90 minutes</option>\n                                            <option>30 minutes</option>\n                                        </select>\n                                    </div>\n                                    <div>\n                                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Deliverables</label>\n                                        <input type=\"text\" placeholder=\"Resource kit, practice exercises\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm\">\n                                    </div>\n                                </div>\n\n                                <!-- Assignments for this step -->\n                                <div>\n                                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Practice Assignment</label>\n                                    <div class=\"border border-gray-200 rounded-lg p-3 bg-gray-50\">\n                                        <input type=\"text\" placeholder=\"Assignment title\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none mb-2 text-sm\">\n                                        <textarea rows=\"2\" placeholder=\"Assignment description and instructions...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none text-sm\"></textarea>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Add Step Button -->\n                        <div class=\"text-center\">\n                            <button class=\"border-2 border-dashed border-gray-300 text-gray-500 py-4 px-6 rounded-lg hover:border-accent hover:text-accent transition flex items-center justify-center w-full\">\n                                <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                                </svg>\n                                Add Another Step\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Workflow Summary -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-6\">Workflow Summary</h2>\n                    \n                    <div class=\"space-y-4\">\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Total Duration:</span>\n                            <span class=\"font-semibold\">4 weeks</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Number of Sessions:</span>\n                            <span class=\"font-semibold\">4 sessions</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Total Hours:</span>\n                            <span class=\"font-semibold\">6 hours</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Assignments:</span>\n                            <span class=\"font-semibold\">4 assignments</span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"mt-6 pt-6 border-t border-gray-200\">\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-lg font-semibold text-gray-900\">Recommended Price:</span>\n                            <span class=\"text-2xl font-bold text-accent\">₹5,400</span>\n                        </div>\n                        <p class=\"text-gray-500 text-sm mt-1\">Based on your hourly rate and session count</p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Sidebar -->\n            <div class=\"space-y-6\">\n                <!-- Templates Library -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Template Library</h3>\n                    \n                    <div class=\"space-y-3\">\n                        <div class=\"border border-gray-200 rounded-lg p-3 hover:border-accent cursor-pointer transition\">\n                            <h4 class=\"font-medium text-gray-900 text-sm\">UX Bootcamp</h4>\n                            <p class=\"text-gray-600 text-xs\">8-week comprehensive program</p>\n                        </div>\n                        \n                        <div class=\"border border-gray-200 rounded-lg p-3 hover:border-accent cursor-pointer transition\">\n                            <h4 class=\"font-medium text-gray-900 text-sm\">Career Transition</h4>\n                            <p class=\"text-gray-600 text-xs\">6-week guidance program</p>\n                        </div>\n                        \n                        <div class=\"border border-gray-200 rounded-lg p-3 hover:border-accent cursor-pointer transition\">\n                            <h4 class=\"font-medium text-gray-900 text-sm\">Skills Assessment</h4>\n                            <p class=\"text-gray-600 text-xs\">One-time evaluation session</p>\n                        </div>\n                        \n                        <div class=\"border border-gray-200 rounded-lg p-3 hover:border-accent cursor-pointer transition\">\n                            <h4 class=\"font-medium text-gray-900 text-sm\">Business Strategy</h4>\n                            <p class=\"text-gray-600 text-xs\">4-week consultation program</p>\n                        </div>\n                    </div>\n                    \n                    <button class=\"w-full mt-4 text-accent hover:text-yellow-600 text-sm font-medium\">\n                        Browse All Templates →\n                    </button>\n                </div>\n\n                <!-- Quick Tips -->\n                <div class=\"bg-green-50 rounded-lg p-6\">\n                    <h3 class=\"text-lg font-semibold text-green-900 mb-4\">💡 Best Practices</h3>\n                    <ul class=\"space-y-2 text-sm text-green-800\">\n                        <li class=\"flex items-start\">\n                            <span class=\"mr-2\">•</span>\n                            <span>Keep steps focused and actionable</span>\n                        </li>\n                        <li class=\"flex items-start\">\n                            <span class=\"mr-2\">•</span>\n                            <span>Include assignments between sessions</span>\n                        </li>\n                        <li class=\"flex items-start\">\n                            <span class=\"mr-2\">•</span>\n                            <span>Set clear deliverables for each step</span>\n                        </li>\n                        <li class=\"flex items-start\">\n                            <span class=\"mr-2\">•</span>\n                            <span>Allow flexibility for learner pace</span>\n                        </li>\n                    </ul>\n                </div>\n\n                <!-- Action Buttons -->\n                <div class=\"space-y-3\">\n                    <button class=\"w-full bg-accent text-white py-3 px-6 rounded-lg hover:bg-yellow-600 transition font-semibold\">\n                        Save Workflow\n                    </button>\n                    <button class=\"w-full border border-gray-300 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-50 transition\">\n                        Save as Template\n                    </button>\n                    <button class=\"w-full bg-primary text-white py-3 px-6 rounded-lg hover:bg-secondary transition\">\n                        Publish & Make Available\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20849},"includes/footer.php":{"content":"</body>\n</html>\n","size_bytes":16},"includes/header.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <?php if (isset($panel_type) && $panel_type === 'admin' && isset($_SESSION['csrf_token'])): ?>\n    <meta name=\"csrf-token\" content=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n    <?php endif; ?>\n    <title><?php echo isset($page_title) ? $page_title : 'Nexpert.ai - Global Expert Learning Platform'; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#3B82F6',\n                        secondary: '#1E40AF',\n                        accent: '#F59E0B',\n                        saffron: '#FF6B35',\n                        emerald: '#10B981'\n                    }\n                }\n            }\n        }\n    </script>\n    <!-- Expert Panel JavaScript -->\n    <script src=\"/admin-panel/js/expert-panel.js\"></script>\n    <?php if (isset($panel_type) && $panel_type === 'admin'): ?>\n    <!-- Admin API JavaScript -->\n    <script src=\"/admin-panel/js/admin-api.js\"></script>\n    <script src=\"/admin-panel/js/admin-logout.js\"></script>\n    <?php endif; ?>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n","size_bytes":1397},"includes/navigation.php":{"content":"<?php\n$panel_type = isset($panel_type) ? $panel_type : 'home';\n\nif ($panel_type === 'home'): ?>\n    <nav class=\"bg-white shadow-lg sticky top-0 z-50\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"flex justify-between items-center py-4\">\n                <h1 class=\"text-xl sm:text-2xl font-bold text-primary\">Nexpert.ai</h1>\n                \n                <!-- Desktop Menu -->\n                <div class=\"hidden md:flex items-center space-x-8\">\n                    <a href=\"#categories\" class=\"text-gray-600 hover:text-primary transition\">Categories</a>\n                    <a href=\"#how-it-works\" class=\"text-gray-600 hover:text-primary transition\">How It Works</a>\n                    <a href=\"#experts\" class=\"text-gray-600 hover:text-primary transition\">Top Experts</a>\n                    <a href=\"#testimonials\" class=\"text-gray-600 hover:text-primary transition\">Success Stories</a>\n                    <a href=\"?panel=learner&page=auth\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition\">Learner Login</a>\n                    <a href=\"?panel=expert&page=auth\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition\">Expert Login</a>\n                </div>\n\n                <!-- Mobile Hamburger Button -->\n                <button id=\"home-mobile-menu-btn\" class=\"md:hidden p-2 text-gray-600 hover:text-primary\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\"></path>\n                    </svg>\n                </button>\n            </div>\n\n            <!-- Mobile Menu -->\n            <div id=\"home-mobile-menu\" class=\"hidden md:hidden pb-4\">\n                <div class=\"flex flex-col space-y-3\">\n                    <a href=\"#categories\" class=\"text-gray-600 hover:text-primary transition px-2 py-2\">Categories</a>\n                    <a href=\"#how-it-works\" class=\"text-gray-600 hover:text-primary transition px-2 py-2\">How It Works</a>\n                    <a href=\"#experts\" class=\"text-gray-600 hover:text-primary transition px-2 py-2\">Top Experts</a>\n                    <a href=\"#testimonials\" class=\"text-gray-600 hover:text-primary transition px-2 py-2\">Success Stories</a>\n                    <a href=\"?panel=learner&page=auth\" class=\"bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition text-center\">Learner Login</a>\n                    <a href=\"?panel=expert&page=auth\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition text-center\">Expert Login</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n<?php elseif ($panel_type === 'learner'): \n    $isLoggedIn = isset($_SESSION['user_id']) && isset($_SESSION['role']) && $_SESSION['role'] === 'learner';\n    $currentPage = $_GET['page'] ?? '';\n?>\n    <nav class=\"bg-white shadow-lg sticky top-0 z-50\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"flex justify-between items-center py-4\">\n                <a href=\"/\" class=\"text-xl sm:text-2xl font-bold text-primary\">Nexpert.ai</a>\n                \n                <!-- Desktop Menu -->\n                <div class=\"hidden md:flex items-center space-x-6\">\n                    <?php if ($isLoggedIn): ?>\n                        <a href=\"?panel=learner&page=dashboard\" class=\"text-gray-600 hover:text-primary\">Dashboard</a>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-600 hover:text-primary\">Browse Experts</a>\n                        <a href=\"?panel=learner&page=my-programs\" class=\"text-gray-600 hover:text-primary\">My Programs</a>\n                        <a href=\"?panel=learner&page=profile\" class=\"text-gray-600 hover:text-primary\">Profile</a>\n                        <div class=\"relative\">\n                            <button class=\"text-gray-600 hover:text-primary relative\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-5 5-5-5h5v-3a1 1 0 011-1h3a1 1 0 011 1v3z\"></path>\n                                </svg>\n                                <span class=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">3</span>\n                            </button>\n                        </div>\n                        <img src=\"attached_assets/stock_images/professional_busines_a5bb892c.jpg\" alt=\"Profile\" class=\"w-8 h-8 rounded-full object-cover\">\n                        <button id=\"learner-logout-btn\" class=\"text-gray-600 hover:text-red-600 transition flex items-center space-x-1\">\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"></path>\n                            </svg>\n                            <span class=\"text-sm font-medium\">Logout</span>\n                        </button>\n                    <?php else: ?>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-600 hover:text-primary\">Browse Experts</a>\n                        <a href=\"?panel=learner&page=auth\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition\">Learner Login</a>\n                        <a href=\"?panel=expert&page=auth\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition\">Expert Login</a>\n                    <?php endif; ?>\n                </div>\n\n                <!-- Mobile Hamburger Button -->\n                <button id=\"learner-mobile-menu-btn\" class=\"md:hidden p-2 text-gray-600 hover:text-primary\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\"></path>\n                    </svg>\n                </button>\n            </div>\n\n            <!-- Mobile Menu -->\n            <div id=\"learner-mobile-menu\" class=\"hidden md:hidden pb-4\">\n                <div class=\"flex flex-col space-y-3\">\n                    <?php if ($isLoggedIn): ?>\n                        <a href=\"?panel=learner&page=dashboard\" class=\"text-gray-600 hover:text-primary px-2 py-2\">Dashboard</a>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-600 hover:text-primary px-2 py-2\">Browse Experts</a>\n                        <a href=\"?panel=learner&page=my-programs\" class=\"text-gray-600 hover:text-primary px-2 py-2\">My Programs</a>\n                        <a href=\"?panel=learner&page=profile\" class=\"text-gray-600 hover:text-primary px-2 py-2\">Profile</a>\n                        <div class=\"flex items-center justify-between px-2 py-2\">\n                            <span class=\"text-gray-600\">Notifications</span>\n                            <span class=\"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">3</span>\n                        </div>\n                        <button id=\"learner-logout-btn-mobile\" class=\"text-left text-gray-600 hover:text-red-600 transition px-2 py-2\">Logout</button>\n                    <?php else: ?>\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-600 hover:text-primary px-2 py-2\">Browse Experts</a>\n                        <a href=\"?panel=learner&page=auth\" class=\"bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition text-center\">Learner Login</a>\n                        <a href=\"?panel=expert&page=auth\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition text-center\">Expert Login</a>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n    </nav>\n<?php elseif ($panel_type === 'expert'): \n    $isLoggedIn = isset($_SESSION['user_id']) && isset($_SESSION['role']) && $_SESSION['role'] === 'expert';\n?>\n    <nav class=\"bg-white shadow-lg sticky top-0 z-50\">\n        <div class=\"max-w-7xl mx-auto px-4\">\n            <div class=\"flex justify-between items-center py-4\">\n                <a href=\"/\" class=\"text-xl sm:text-2xl font-bold text-accent\">Nexpert.ai</a>\n                \n                <!-- Desktop Menu -->\n                <div class=\"hidden md:flex items-center space-x-6\">\n                    <?php if ($isLoggedIn): ?>\n                        <a href=\"?panel=expert&page=dashboard\" class=\"text-gray-600 hover:text-accent\">Dashboard</a>\n                        <a href=\"?panel=expert&page=my-programs\" class=\"text-gray-600 hover:text-accent\">My Programs</a>\n                        <a href=\"?panel=expert&page=earnings\" class=\"text-gray-600 hover:text-accent\">Earnings</a>\n                        <a href=\"?panel=expert&page=booking-management\" class=\"text-gray-600 hover:text-accent\">Bookings</a>\n                        <a href=\"?panel=expert&page=learner-management\" class=\"text-gray-600 hover:text-accent\">Learners</a>\n                        <div class=\"relative\">\n                            <button class=\"text-gray-600 hover:text-accent\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-5 5-5-5h5v-3a1 1 0 011-1h3a1 1 0 011 1v3z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                        <a href=\"?panel=expert&page=settings\" class=\"block\">\n                            <img id=\"expert-nav-photo\" src=\"attached_assets/stock_images/diverse_professional_478267b3.jpg\" alt=\"Profile\" class=\"w-8 h-8 rounded-full object-cover cursor-pointer hover:ring-2 hover:ring-accent transition\">\n                        </a>\n                        <button id=\"expert-logout-btn\" class=\"text-gray-600 hover:text-red-600 transition flex items-center space-x-1\">\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"></path>\n                            </svg>\n                            <span class=\"text-sm font-medium\">Logout</span>\n                        </button>\n                    <?php endif; ?>\n                </div>\n\n                <!-- Mobile Hamburger Button -->\n                <button id=\"expert-mobile-menu-btn\" class=\"md:hidden p-2 text-gray-600 hover:text-accent\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\"></path>\n                    </svg>\n                </button>\n            </div>\n\n            <!-- Mobile Menu -->\n            <div id=\"expert-mobile-menu\" class=\"hidden md:hidden pb-4\">\n                <div class=\"flex flex-col space-y-3\">\n                    <?php if ($isLoggedIn): ?>\n                        <a href=\"?panel=expert&page=dashboard\" class=\"text-gray-600 hover:text-accent px-2 py-2\">Dashboard</a>\n                        <a href=\"?panel=expert&page=my-programs\" class=\"text-gray-600 hover:text-accent px-2 py-2\">My Programs</a>\n                        <a href=\"?panel=expert&page=earnings\" class=\"text-gray-600 hover:text-accent px-2 py-2\">Earnings</a>\n                        <a href=\"?panel=expert&page=booking-management\" class=\"text-gray-600 hover:text-accent px-2 py-2\">Bookings</a>\n                        <a href=\"?panel=expert&page=learner-management\" class=\"text-gray-600 hover:text-accent px-2 py-2\">Learners</a>\n                        <a href=\"?panel=expert&page=settings\" class=\"text-gray-600 hover:text-accent px-2 py-2\">Settings</a>\n                        <button id=\"expert-logout-btn-mobile\" class=\"text-left text-gray-600 hover:text-red-600 transition px-2 py-2\">Logout</button>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n    </nav>\n<?php endif; ?>\n\n<script>\n// Hamburger menu toggles\nconst homeMobileMenuBtn = document.getElementById('home-mobile-menu-btn');\nconst homeMobileMenu = document.getElementById('home-mobile-menu');\nif (homeMobileMenuBtn && homeMobileMenu) {\n    homeMobileMenuBtn.addEventListener('click', () => {\n        homeMobileMenu.classList.toggle('hidden');\n    });\n}\n\nconst learnerMobileMenuBtn = document.getElementById('learner-mobile-menu-btn');\nconst learnerMobileMenu = document.getElementById('learner-mobile-menu');\nif (learnerMobileMenuBtn && learnerMobileMenu) {\n    learnerMobileMenuBtn.addEventListener('click', () => {\n        learnerMobileMenu.classList.toggle('hidden');\n    });\n}\n\nconst expertMobileMenuBtn = document.getElementById('expert-mobile-menu-btn');\nconst expertMobileMenu = document.getElementById('expert-mobile-menu');\nif (expertMobileMenuBtn && expertMobileMenu) {\n    expertMobileMenuBtn.addEventListener('click', () => {\n        expertMobileMenu.classList.toggle('hidden');\n    });\n}\n\n// Learner logout handlers (desktop and mobile)\nconst learnerLogoutBtn = document.getElementById('learner-logout-btn');\nconst learnerLogoutBtnMobile = document.getElementById('learner-logout-btn-mobile');\nconst handleLearnerLogout = async function() {\n    if (confirm('Are you sure you want to logout?')) {\n        try {\n            const response = await fetch('/admin-panel/apis/learner/auth.php', {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                window.location.href = '/';\n            } else {\n                alert('Logout failed. Please try again.');\n            }\n        } catch (error) {\n            console.error('Logout error:', error);\n            alert('Logout failed. Please try again.');\n        }\n    }\n};\nif (learnerLogoutBtn) learnerLogoutBtn.addEventListener('click', handleLearnerLogout);\nif (learnerLogoutBtnMobile) learnerLogoutBtnMobile.addEventListener('click', handleLearnerLogout);\n\n// Expert logout handlers (desktop and mobile)\nconst expertLogoutBtn = document.getElementById('expert-logout-btn');\nconst expertLogoutBtnMobile = document.getElementById('expert-logout-btn-mobile');\nconst handleExpertLogout = async function() {\n    if (confirm('Are you sure you want to logout?')) {\n        try {\n            const response = await fetch('/admin-panel/apis/expert/auth.php', {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                window.location.href = '/';\n            } else {\n                alert('Logout failed. Please try again.');\n            }\n        } catch (error) {\n            console.error('Logout error:', error);\n            alert('Logout failed. Please try again.');\n        }\n    }\n};\nif (expertLogoutBtn) expertLogoutBtn.addEventListener('click', handleExpertLogout);\nif (expertLogoutBtnMobile) expertLogoutBtnMobile.addEventListener('click', handleExpertLogout);\n\n// Load expert profile photo in navigation\nconst expertNavPhoto = document.getElementById('expert-nav-photo');\nif (expertNavPhoto) {\n    fetch('/admin-panel/apis/expert/profile.php?user_id=<?php echo $_SESSION[\"user_id\"] ?? \"\"; ?>')\n        .then(response => response.json())\n        .then(result => {\n            if (result.success && result.data.profile_photo) {\n                expertNavPhoto.src = result.data.profile_photo;\n            }\n        })\n        .catch(error => console.error('Error loading profile photo:', error));\n}\n</script>\n","size_bytes":16293},"learner/learner-auth.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n$page_title = \"Learner Auth - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n    <div class=\"min-h-screen flex\">\n        <!-- Left Side - Image/Branding -->\n        <div class=\"hidden lg:block lg:w-1/2 bg-gradient-to-br from-primary to-secondary\">\n            <div class=\"flex items-center justify-center h-full text-white p-12\">\n                <div class=\"text-center\">\n                    <h3 class=\"text-4xl font-bold mb-6\">Start Your Learning Journey</h3>\n                    <p class=\"text-xl opacity-90 mb-8\">Connect with expert mentors and accelerate your growth</p>\n                    <div class=\"space-y-4\">\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                            </svg>\n                            <span>1-on-1 Expert Sessions</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                            </svg>\n                            <span>Flexible Scheduling</span>\n                        </div>\n                        <div class=\"flex items-center\">\n                            <svg class=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                            </svg>\n                            <span>Progress Tracking</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Right Side - Auth Form -->\n        <div class=\"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-20 xl:px-24\">\n            <div class=\"w-full max-w-md\">\n                <div class=\"text-center mb-8\">\n                    <h2 class=\"text-3xl font-bold text-gray-900\">Learner Portal</h2>\n                    <p class=\"mt-2 text-gray-600\">Sign in or create your account</p>\n                </div>\n\n                <!-- Toggle Tabs -->\n                <div class=\"flex border-b border-gray-200 mb-6\">\n                    <button id=\"signInTab\" class=\"flex-1 py-3 text-center font-medium border-b-2 border-primary text-primary\" onclick=\"switchTab('signin')\">\n                        Sign In\n                    </button>\n                    <button id=\"signUpTab\" class=\"flex-1 py-3 text-center font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700\" onclick=\"switchTab('signup')\">\n                        Sign Up\n                    </button>\n                </div>\n\n                <!-- Sign In Form -->\n                <form id=\"signInForm\" class=\"space-y-6\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address *</label>\n                        <input id=\"signInEmail\" type=\"email\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"your@email.com\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Password *</label>\n                        <input id=\"signInPassword\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"Enter your password\">\n                    </div>\n\n                    <div class=\"flex items-center justify-between\">\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded\">\n                            <span class=\"ml-2 text-sm text-gray-600\">Remember me</span>\n                        </label>\n                        <a href=\"#\" class=\"text-sm text-primary hover:text-secondary\">Forgot password?</a>\n                    </div>\n\n                    <button type=\"submit\" class=\"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-secondary transition duration-200 font-semibold\">\n                        Sign In\n                    </button>\n                </form>\n\n                <!-- Sign Up Form -->\n                <form id=\"signUpForm\" class=\"space-y-6 hidden\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name *</label>\n                        <input id=\"learnerName\" type=\"text\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"Enter your full name\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Mobile Number *</label>\n                        <div class=\"flex gap-2\">\n                            <select id=\"learnerCountryCode\" class=\"w-32 px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                                <option value=\"+91\">🇮🇳 +91</option>\n                                <option value=\"+1\">🇺🇸 +1</option>\n                                <option value=\"+44\">🇬🇧 +44</option>\n                                <option value=\"+61\">🇦🇺 +61</option>\n                                <option value=\"+86\">🇨🇳 +86</option>\n                                <option value=\"+81\">🇯🇵 +81</option>\n                                <option value=\"+49\">🇩🇪 +49</option>\n                                <option value=\"+33\">🇫🇷 +33</option>\n                                <option value=\"+971\">🇦🇪 +971</option>\n                                <option value=\"+65\">🇸🇬 +65</option>\n                                <option value=\"+60\">🇲🇾 +60</option>\n                                <option value=\"+966\">🇸🇦 +966</option>\n                            </select>\n                            <input id=\"learnerMobile\" type=\"tel\" required class=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"9876543210\">\n                        </div>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address *</label>\n                        <input id=\"learnerEmail\" type=\"email\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"your@email.com\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Password *</label>\n                        <input id=\"learnerPassword\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"Create a password\">\n                        <div class=\"mt-2\">\n                            <div class=\"flex items-center justify-between mb-1\">\n                                <span id=\"learnerPasswordStrengthText\" class=\"text-xs font-medium text-gray-500\">Password strength</span>\n                            </div>\n                            <div class=\"h-2 bg-gray-200 rounded-full\">\n                                <div id=\"learnerPasswordStrengthBar\" class=\"h-full rounded-full transition-all duration-300\" style=\"width: 0%\"></div>\n                            </div>\n                            <ul class=\"mt-2 text-xs text-gray-600 space-y-1\">\n                                <li id=\"learnerPwLength\" class=\"flex items-center\"><span class=\"mr-2\">○</span> At least 8 characters</li>\n                                <li id=\"learnerPwUppercase\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One uppercase letter</li>\n                                <li id=\"learnerPwLowercase\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One lowercase letter</li>\n                                <li id=\"learnerPwNumber\" class=\"flex items-center\"><span class=\"mr-2\">○</span> One number</li>\n                            </ul>\n                        </div>\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Repeat Password *</label>\n                        <input id=\"learnerPasswordRepeat\" type=\"password\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"Confirm your password\">\n                    </div>\n\n                    <button type=\"submit\" id=\"learnerRegisterBtn\" class=\"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-secondary transition duration-200 font-semibold flex items-center justify-center\">\n                        <span id=\"learnerRegisterText\">Create Account</span>\n                        <svg id=\"learnerRegisterSpinner\" class=\"hidden animate-spin ml-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                        </svg>\n                    </button>\n                </form>\n\n                <div class=\"mt-8\">\n                    <div class=\"relative\">\n                        <div class=\"absolute inset-0 flex items-center\">\n                            <div class=\"w-full border-t border-gray-300\"></div>\n                        </div>\n                        <div class=\"relative flex justify-center text-sm\">\n                            <span class=\"px-2 bg-white text-gray-500\">Or continue with</span>\n                        </div>\n                    </div>\n\n                    <div class=\"mt-6 space-y-3\">\n                        <button type=\"button\" class=\"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition duration-200 flex items-center justify-center\">\n                            <svg class=\"w-5 h-5 mr-2\" viewBox=\"0 0 24 24\">\n                                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                            </svg>\n                            Sign in with Google\n                        </button>\n\n                        <button type=\"button\" class=\"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition duration-200\">\n                            Sign in with OTP\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n    // Tab switching\n    function switchTab(tab) {\n        const signInTab = document.getElementById('signInTab');\n        const signUpTab = document.getElementById('signUpTab');\n        const signInForm = document.getElementById('signInForm');\n        const signUpForm = document.getElementById('signUpForm');\n\n        if (tab === 'signin') {\n            signInTab.classList.add('border-primary', 'text-primary');\n            signInTab.classList.remove('border-transparent', 'text-gray-500');\n            signUpTab.classList.remove('border-primary', 'text-primary');\n            signUpTab.classList.add('border-transparent', 'text-gray-500');\n            signInForm.classList.remove('hidden');\n            signUpForm.classList.add('hidden');\n        } else {\n            signUpTab.classList.add('border-primary', 'text-primary');\n            signUpTab.classList.remove('border-transparent', 'text-gray-500');\n            signInTab.classList.remove('border-primary', 'text-primary');\n            signInTab.classList.add('border-transparent', 'text-gray-500');\n            signUpForm.classList.remove('hidden');\n            signInForm.classList.add('hidden');\n        }\n    }\n\n    // Sign In Form Handler\n    document.getElementById('signInForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('signInEmail').value.trim();\n        const password = document.getElementById('signInPassword').value;\n        \n        if (!email || !password) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Missing Information',\n                text: 'Please fill in all fields',\n                confirmButtonColor: '#3B82F6'\n            });\n            return;\n        }\n        \n        try {\n            const response = await fetch('/admin-panel/apis/learner/auth.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    email: email,\n                    password: password\n                })\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                await Swal.fire({\n                    icon: 'success',\n                    title: 'Welcome Back!',\n                    text: 'Login successful',\n                    confirmButtonColor: '#3B82F6',\n                    timer: 1500,\n                    showConfirmButton: false\n                });\n                // Check if there's a redirect URL, otherwise go to dashboard\n                const redirectUrl = result.redirect_url || '?panel=learner&page=dashboard';\n                window.location.href = redirectUrl;\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Login Failed',\n                    text: result.message,\n                    confirmButtonColor: '#3B82F6'\n                });\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'An error occurred during login. Please try again.',\n                confirmButtonColor: '#3B82F6'\n            });\n        }\n    });\n\n    // Sign Up Form Handler\n    document.getElementById('signUpForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const name = document.getElementById('learnerName').value.trim();\n        const countryCode = document.getElementById('learnerCountryCode').value;\n        const mobile = document.getElementById('learnerMobile').value.trim();\n        const email = document.getElementById('learnerEmail').value.trim();\n        const password = document.getElementById('learnerPassword').value;\n        const passwordRepeat = document.getElementById('learnerPasswordRepeat').value;\n        \n        if (!name || !mobile || !email || !password || !passwordRepeat) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Missing Information',\n                text: 'Please fill in all required fields',\n                confirmButtonColor: '#3B82F6'\n            });\n            return;\n        }\n        \n        if (password.length < 8) {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Weak Password',\n                text: 'Password must be at least 8 characters long',\n                confirmButtonColor: '#3B82F6'\n            });\n            return;\n        }\n        \n        if (password !== passwordRepeat) {\n            Swal.fire({\n                icon: 'error',\n                title: 'Password Mismatch',\n                text: 'Passwords do not match. Please try again.',\n                confirmButtonColor: '#3B82F6'\n            });\n            return;\n        }\n        \n        const fullMobile = countryCode + mobile;\n        \n        // Show loading spinner\n        const btn = document.getElementById('learnerRegisterBtn');\n        const btnText = document.getElementById('learnerRegisterText');\n        const spinner = document.getElementById('learnerRegisterSpinner');\n        btn.disabled = true;\n        btnText.textContent = 'Creating Account...';\n        spinner.classList.remove('hidden');\n        \n        try {\n            const response = await fetch('/admin-panel/apis/learner/register.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    name: name,\n                    mobile: fullMobile,\n                    email: email,\n                    password: password\n                })\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                await Swal.fire({\n                    icon: 'success',\n                    title: 'Welcome to Nexpert.ai!',\n                    text: 'Registration successful!',\n                    confirmButtonColor: '#3B82F6',\n                    timer: 2000\n                });\n                // Check if there's a redirect URL, otherwise go to dashboard\n                const redirectUrl = result.redirect_url || '?panel=learner&page=dashboard';\n                window.location.href = redirectUrl;\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Registration Failed',\n                    text: result.message,\n                    confirmButtonColor: '#3B82F6'\n                });\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'An error occurred during registration. Please try again.',\n                confirmButtonColor: '#3B82F6'\n            });\n        } finally {\n            // Hide loading spinner\n            btn.disabled = false;\n            btnText.textContent = 'Create Account';\n            spinner.classList.add('hidden');\n        }\n    });\n\n    // Password strength checker for learner registration\n    const learnerPasswordInput = document.getElementById('learnerPassword');\n    if (learnerPasswordInput) {\n        learnerPasswordInput.addEventListener('input', function() {\n            const password = this.value;\n            const strengthBar = document.getElementById('learnerPasswordStrengthBar');\n            const strengthText = document.getElementById('learnerPasswordStrengthText');\n            \n            const lengthCheck = document.getElementById('learnerPwLength');\n            const uppercaseCheck = document.getElementById('learnerPwUppercase');\n            const lowercaseCheck = document.getElementById('learnerPwLowercase');\n            const numberCheck = document.getElementById('learnerPwNumber');\n            \n            let strength = 0;\n            \n            // Check length\n            if (password.length >= 8) {\n                lengthCheck.classList.add('text-green-600');\n                lengthCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                lengthCheck.classList.remove('text-green-600');\n                lengthCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check uppercase\n            if (/[A-Z]/.test(password)) {\n                uppercaseCheck.classList.add('text-green-600');\n                uppercaseCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                uppercaseCheck.classList.remove('text-green-600');\n                uppercaseCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check lowercase\n            if (/[a-z]/.test(password)) {\n                lowercaseCheck.classList.add('text-green-600');\n                lowercaseCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                lowercaseCheck.classList.remove('text-green-600');\n                lowercaseCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Check number\n            if (/[0-9]/.test(password)) {\n                numberCheck.classList.add('text-green-600');\n                numberCheck.querySelector('span').textContent = '✓';\n                strength++;\n            } else {\n                numberCheck.classList.remove('text-green-600');\n                numberCheck.querySelector('span').textContent = '○';\n            }\n            \n            // Update strength bar and text\n            const percentage = (strength / 4) * 100;\n            strengthBar.style.width = percentage + '%';\n            \n            if (strength === 0) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300';\n                strengthText.textContent = 'Password strength';\n                strengthText.className = 'text-xs font-medium text-gray-500';\n            } else if (strength <= 2) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-red-500';\n                strengthText.textContent = 'Weak';\n                strengthText.className = 'text-xs font-medium text-red-600';\n            } else if (strength === 3) {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-yellow-500';\n                strengthText.textContent = 'Medium';\n                strengthText.className = 'text-xs font-medium text-yellow-600';\n            } else {\n                strengthBar.className = 'h-full rounded-full transition-all duration-300 bg-green-500';\n                strengthText.textContent = 'Strong';\n                strengthText.className = 'text-xs font-medium text-green-600';\n            }\n        });\n    }\n    </script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":23271},"learner/learner-booking.php":{"content":"<?php\n$page_title = \"Book Session - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n<div class=\"bg-gradient-to-br from-blue-50 via-white to-purple-50 min-h-screen py-8\">\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <!-- Enhanced Header -->\n        <div class=\"mb-8\">\n            <div class=\"flex items-center gap-3 mb-3\">\n                <a href=\"?panel=learner&page=browse-experts\" class=\"text-gray-600 hover:text-primary transition-colors\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"></path>\n                    </svg>\n                </a>\n                <h1 class=\"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent\">\n                    Book a Session\n                </h1>\n            </div>\n            <p class=\"text-gray-600 ml-9\">Schedule a personalized session with your expert</p>\n        </div>\n\n        <div class=\"grid lg:grid-cols-3 gap-8\">\n            <!-- Expert Info Card - Enhanced -->\n            <div class=\"bg-white rounded-2xl shadow-2xl p-8 h-fit border border-gray-100 transform hover:scale-105 transition-transform duration-300\">\n                <!-- Expert Profile Section -->\n                <div class=\"flex items-start gap-4 mb-6 pb-6 border-b border-gray-200\">\n                    <div class=\"relative group\">\n                        <div class=\"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full opacity-75 group-hover:opacity-100 blur transition duration-300\"></div>\n                        <div id=\"expert-photo\" class=\"relative w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden flex items-center justify-center ring-4 ring-white shadow-lg\">\n                            <div class=\"animate-pulse\">\n                                <svg class=\"w-12 h-12 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"flex-1\">\n                        <h3 id=\"expert-name\" class=\"text-xl font-bold text-gray-900 mb-1\">\n                            <span class=\"inline-block animate-pulse bg-gray-200 rounded px-3 py-1\">Loading...</span>\n                        </h3>\n                        <p id=\"expert-title\" class=\"text-gray-600 text-sm mb-2\">\n                            <span class=\"inline-block animate-pulse bg-gray-100 rounded px-2 py-0.5\">Loading...</span>\n                        </p>\n                        <div class=\"flex items-center gap-2\">\n                            <div id=\"expert-rating-stars\" class=\"flex text-yellow-400 text-lg\">\n                                ☆☆☆☆☆\n                            </div>\n                            <span id=\"expert-rating-value\" class=\"text-gray-700 text-sm font-semibold\">(0.0)</span>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Session Details Card -->\n                <div class=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 mb-6\">\n                    <h4 class=\"font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                        Session Details\n                    </h4>\n                    <div class=\"space-y-3\">\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600 text-sm\">Duration:</span>\n                            <span class=\"text-gray-900 font-semibold bg-white px-3 py-1 rounded-lg\">60 minutes</span>\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <span class=\"text-gray-600 text-sm\">Format:</span>\n                            <span class=\"text-gray-900 font-semibold bg-white px-3 py-1 rounded-lg flex items-center gap-1\">\n                                <svg class=\"w-4 h-4 text-green-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path d=\"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z\"></path>\n                                </svg>\n                                Video Call\n                            </span>\n                        </div>\n                        <div class=\"flex justify-between items-center pt-3 border-t border-blue-200\">\n                            <span class=\"text-gray-600 text-sm\">Session Fee:</span>\n                            <span id=\"session-price\" class=\"text-2xl font-bold text-primary\">₹0</span>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Selected Time Display -->\n                <div class=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-5 mb-6 border-2 border-green-200\">\n                    <h4 class=\"font-bold text-gray-900 mb-3 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                        Selected Time\n                    </h4>\n                    <div id=\"selected-datetime\" class=\"text-gray-600 text-sm\">\n                        Please select a date and time\n                    </div>\n                </div>\n                \n                <!-- Confirm Button -->\n                <button id=\"confirm-booking-btn\" disabled class=\"group relative w-full bg-gradient-to-r from-primary to-blue-600 text-white px-6 py-4 rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-bold text-lg shadow-lg hover:shadow-2xl disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed disabled:transform-none transform hover:-translate-y-1\">\n                    <span class=\"flex items-center justify-center gap-2\">\n                        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"></path>\n                        </svg>\n                        Proceed to Payment\n                    </span>\n                </button>\n            </div>\n\n            <!-- Booking Calendar - Enhanced -->\n            <div class=\"lg:col-span-2 bg-white rounded-2xl shadow-2xl p-8 border border-gray-100\">\n                <div class=\"flex items-center gap-3 mb-8\">\n                    <div class=\"w-1 h-8 bg-gradient-to-b from-primary to-blue-600 rounded-full\"></div>\n                    <h3 class=\"text-2xl font-bold text-gray-900\">Select Date & Time</h3>\n                </div>\n                \n                <!-- Date Selection -->\n                <div class=\"mb-10\">\n                    <label class=\"block text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                        Choose a Date\n                    </label>\n                    <input type=\"date\" id=\"session-date\" \n                           class=\"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-primary text-lg transition-all duration-200\">\n                </div>\n\n                <!-- Time Slots -->\n                <div>\n                    <label class=\"block text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                        Available Time Slots\n                    </label>\n                    <div id=\"time-slots-container\" class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 mb-8\">\n                        <div class=\"col-span-full text-center py-12\">\n                            <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                            </svg>\n                            <p class=\"text-gray-500\">Please select a date first</p>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Availability Info -->\n                <div id=\"availability-info\" class=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6\">\n                    <h4 class=\"text-sm font-bold text-blue-900 mb-4 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                        Weekly Availability\n                    </h4>\n                    <div id=\"availability-schedule\" class=\"text-sm text-blue-800\">\n                        <div class=\"flex items-center gap-2\">\n                            <div class=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\"></div>\n                            Loading availability...\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\n(function() {\n    'use strict';\n\n    let expertData = null;\n    let selectedDate = null;\n    let selectedTime = null;\n\n    // Get expert ID from URL\n    const urlParams = new URLSearchParams(window.location.search);\n    const expertId = urlParams.get('expert_id');\n\n    if (!expertId) {\n        alert('No expert selected');\n        window.location.href = '/?panel=learner&page=browse-experts';\n        return;\n    }\n\n    // Set minimum date to today\n    const dateInput = document.getElementById('session-date');\n    const today = new Date().toISOString().split('T')[0];\n    dateInput.min = today;\n\n    // Load expert and availability data\n    async function loadExpertData() {\n        try {\n            const response = await fetch(`/admin-panel/apis/learner/booking.php?expert_id=${expertId}`);\n            const result = await response.json();\n\n            if (!result.success) {\n                alert(result.message || 'Failed to load expert data');\n                window.location.href = '/?panel=learner&page=browse-experts';\n                return;\n            }\n\n            expertData = result.data;\n            renderExpertInfo();\n            renderAvailabilitySchedule();\n        } catch (error) {\n            console.error('Error:', error);\n            alert('Failed to load expert data');\n        }\n    }\n\n    function renderExpertInfo() {\n        document.getElementById('expert-name').textContent = expertData.name || 'Expert';\n        document.getElementById('expert-title').textContent = expertData.professional_title || 'Professional';\n        \n        const rating = Math.max(0, Math.min(5, Math.floor(Number(expertData.avg_rating) || 0)));\n        document.getElementById('expert-rating-stars').textContent = '★'.repeat(rating) + '☆'.repeat(5 - rating);\n        document.getElementById('expert-rating-value').textContent = `(${(Number(expertData.avg_rating) || 0).toFixed(1)})`;\n        \n        const hourlyRate = Number(expertData.hourly_rate) || 0;\n        document.getElementById('session-price').textContent = `₹${hourlyRate}`;\n        \n        if (expertData.profile_photo) {\n            const photoContainer = document.getElementById('expert-photo');\n            photoContainer.innerHTML = `<img src=\"${expertData.profile_photo}\" alt=\"${expertData.name}\" class=\"w-full h-full object-cover\">`;\n        }\n    }\n\n    function renderAvailabilitySchedule() {\n        const container = document.getElementById('availability-schedule');\n        // Database uses 0=Monday, 6=Sunday\n        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n        \n        if (!expertData.availability || expertData.availability.length === 0) {\n            container.innerHTML = '<p class=\"text-gray-600\">No availability set. Please contact the expert.</p>';\n            return;\n        }\n\n        const schedule = {};\n        expertData.availability.forEach(slot => {\n            const day = days[parseInt(slot.day_of_week)];\n            if (!schedule[day]) {\n                schedule[day] = [];\n            }\n            schedule[day].push(`${slot.start_time} - ${slot.end_time}`);\n        });\n\n        const html = Object.entries(schedule).map(([day, times]) => \n            `<div class=\"flex justify-between py-2 border-b border-blue-100 last:border-0\">\n                <span class=\"font-semibold text-blue-900\">${day}:</span>\n                <span class=\"text-blue-700\">${times.join(', ')}</span>\n            </div>`\n        ).join('');\n        \n        container.innerHTML = html;\n    }\n\n    function getAvailableTimeSlotsForDate(date) {\n        // JavaScript getDay() returns 0=Sunday, 6=Saturday\n        // Database uses 0=Monday, 6=Sunday\n        let dayOfWeek = new Date(date).getDay();\n        dayOfWeek = dayOfWeek === 0 ? 6 : dayOfWeek - 1; // Convert to database format\n        const availability = expertData.availability.filter(slot => parseInt(slot.day_of_week) === dayOfWeek);\n        \n        const timeSlots = [];\n        availability.forEach(slot => {\n            const [startHour, startMin] = slot.start_time.split(':').map(Number);\n            const [endHour, endMin] = slot.end_time.split(':').map(Number);\n            \n            for (let hour = startHour; hour < endHour; hour++) {\n                timeSlots.push(`${String(hour).padStart(2, '0')}:00`);\n                if (hour + 0.5 < endHour || (hour + 1 === endHour && endMin >= 30)) {\n                    timeSlots.push(`${String(hour).padStart(2, '0')}:30`);\n                }\n            }\n        });\n        \n        return timeSlots;\n    }\n\n    function renderTimeSlots() {\n        const container = document.getElementById('time-slots-container');\n        \n        if (!selectedDate) {\n            container.innerHTML = `\n                <div class=\"col-span-full text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                    <p class=\"text-gray-500\">Please select a date first</p>\n                </div>`;\n            return;\n        }\n\n        const slots = getAvailableTimeSlotsForDate(selectedDate);\n        \n        if (slots.length === 0) {\n            container.innerHTML = `\n                <div class=\"col-span-full text-center py-12\">\n                    <svg class=\"w-16 h-16 text-red-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                    <p class=\"text-gray-500 font-medium\">No slots available for this date</p>\n                    <p class=\"text-gray-400 text-sm mt-1\">Please try another day</p>\n                </div>`;\n            return;\n        }\n\n        container.innerHTML = slots.map(time => `\n            <button class=\"time-slot-btn group px-4 py-3 border-2 border-gray-200 rounded-xl hover:border-primary hover:bg-blue-50 transition-all duration-200 text-sm font-semibold text-gray-700 hover:text-primary hover:shadow-md transform hover:-translate-y-0.5\"\n                    data-time=\"${time}\">\n                <div class=\"flex items-center justify-center gap-1\">\n                    <svg class=\"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                    ${time}\n                </div>\n            </button>\n        `).join('');\n\n        document.querySelectorAll('.time-slot-btn').forEach(btn => {\n            btn.addEventListener('click', function() {\n                document.querySelectorAll('.time-slot-btn').forEach(b => {\n                    b.classList.remove('border-primary', 'bg-blue-100', 'text-primary', 'ring-4', 'ring-blue-100');\n                    b.classList.add('border-gray-200', 'text-gray-700');\n                });\n                this.classList.remove('border-gray-200', 'text-gray-700');\n                this.classList.add('border-primary', 'bg-blue-100', 'text-primary', 'ring-4', 'ring-blue-100');\n                \n                selectedTime = this.dataset.time;\n                updateSelectedDateTime();\n            });\n        });\n    }\n\n    function updateSelectedDateTime() {\n        const container = document.getElementById('selected-datetime');\n        const confirmBtn = document.getElementById('confirm-booking-btn');\n        \n        if (selectedDate && selectedTime) {\n            const date = new Date(selectedDate);\n            const formattedDate = date.toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' });\n            container.innerHTML = `\n                <div class=\"flex items-center gap-2 mb-2\">\n                    <svg class=\"w-5 h-5 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>\n                    </svg>\n                    <span class=\"font-bold text-green-800\">Time Selected</span>\n                </div>\n                <div class=\"font-semibold text-gray-900 text-lg\">${formattedDate}</div>\n                <div class=\"text-primary font-bold text-xl mt-1\">${selectedTime}</div>\n            `;\n            confirmBtn.disabled = false;\n        } else {\n            container.innerHTML = `\n                <div class=\"flex items-center gap-2 text-gray-500\">\n                    <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                    Please select a date and time\n                </div>\n            `;\n            confirmBtn.disabled = true;\n        }\n    }\n\n    // Event listeners\n    dateInput.addEventListener('change', function() {\n        selectedDate = this.value;\n        selectedTime = null;\n        renderTimeSlots();\n        updateSelectedDateTime();\n    });\n\n    document.getElementById('confirm-booking-btn').addEventListener('click', function() {\n        if (!selectedDate || !selectedTime) {\n            alert('Please select a date and time');\n            return;\n        }\n\n        const sessionDateTime = `${selectedDate} ${selectedTime}:00`;\n        const hourlyRate = Number(expertData.hourly_rate) || 0;\n        \n        window.location.href = `/?panel=learner&page=payments&expert_id=${expertId}&datetime=${encodeURIComponent(sessionDateTime)}&amount=${hourlyRate}`;\n    });\n\n    // Initialize\n    loadExpertData();\n})();\n</script>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":21154},"learner/learner-browse-experts.php":{"content":"<?php\n$page_title = \"Browse Experts - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8\">\n        <!-- Header -->\n        <div class=\"mb-4 sm:mb-6\">\n            <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-2\">Browse Experts</h1>\n            <p class=\"text-sm sm:text-base text-gray-600\">Find the perfect expert to accelerate your learning journey</p>\n        </div>\n\n        <!-- Mobile Filter/Sort Icons -->\n        <div class=\"flex md:hidden justify-between items-center mb-4 gap-3\">\n            <button id=\"mobile-filter-btn\" class=\"flex items-center justify-center gap-2 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition flex-1\" style=\"min-height: 44px;\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"></path>\n                </svg>\n                Filter\n            </button>\n            <button id=\"mobile-sort-btn\" class=\"flex items-center justify-center gap-2 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition flex-1\" style=\"min-height: 44px;\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4\"></path>\n                </svg>\n                Sort\n            </button>\n        </div>\n\n        <!-- Filters - Top Bar for Desktop Only -->\n        <div class=\"hidden md:block bg-white rounded-lg shadow-lg p-4 mb-6\">\n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <!-- Search -->\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Search</label>\n                    <input type=\"text\" id=\"search-input\" placeholder=\"Search experts...\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm\">\n                </div>\n\n                <!-- Category -->\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Category</label>\n                    <select id=\"category-select\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm\">\n                        <option>All Categories</option>\n                        <option>Coaches</option>\n                        <option>Mentors</option>\n                        <option>Consultants</option>\n                        <option>Trainers</option>\n                        <option>Freelancers</option>\n                    </select>\n                </div>\n\n                <!-- Price Range -->\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Price Range</label>\n                    <select id=\"price-select\" name=\"price\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm\">\n                        <option value=\"\">All Prices</option>\n                        <option value=\"under_500\">Under ₹500</option>\n                        <option value=\"500_1000\">₹500 - ₹1,000</option>\n                        <option value=\"1000_2000\">₹1,000 - ₹2,000</option>\n                        <option value=\"2000_plus\">₹2,000+</option>\n                    </select>\n                </div>\n\n                <!-- Rating -->\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Minimum Rating</label>\n                    <select id=\"rating-select\" name=\"rating\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm\">\n                        <option value=\"\">All Ratings</option>\n                        <option value=\"4plus\">4+ Stars</option>\n                        <option value=\"4.5plus\">4.5+ Stars</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n\n        <!-- Desktop Sort Bar -->\n        <div class=\"hidden md:flex justify-between items-center mb-6\">\n            <span id=\"result-count\" class=\"text-sm sm:text-base text-gray-600\">Loading experts...</span>\n            <div class=\"flex items-center gap-2\">\n                <span class=\"text-sm text-gray-600\">Sort:</span>\n                <select id=\"sort-select\" class=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm\">\n                    <option value=\"relevance\">Relevance</option>\n                    <option value=\"price_low_high\">Price: Low to High</option>\n                    <option value=\"price_high_low\">Price: High to Low</option>\n                    <option value=\"rating\">Rating</option>\n                    <option value=\"newest\">Newest</option>\n                </select>\n            </div>\n        </div>\n\n        <!-- Mobile Result Count -->\n        <div class=\"md:hidden mb-4\">\n            <span id=\"result-count-mobile\" class=\"text-sm text-gray-600\">Loading experts...</span>\n        </div>\n\n        <!-- Experts Grid -->\n        <div>\n                <!-- AI Loading Indicator -->\n                <div id=\"ai-loader\" class=\"hidden\">\n                    <div class=\"flex flex-col items-center justify-center py-20\">\n                        <div class=\"relative\">\n                            <!-- Animated AI Brain/Circuit -->\n                            <div class=\"relative w-32 h-32\">\n                                <!-- Outer rotating ring -->\n                                <div class=\"absolute inset-0 border-4 border-blue-200 rounded-full animate-spin\" style=\"border-top-color: #3B82F6;\"></div>\n                                \n                                <!-- Inner pulsing circle -->\n                                <div class=\"absolute inset-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full animate-pulse flex items-center justify-center\">\n                                    <svg class=\"w-12 h-12 text-white animate-pulse\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"></path>\n                                    </svg>\n                                </div>\n                                \n                                <!-- Orbiting dots -->\n                                <div class=\"absolute top-0 left-1/2 w-3 h-3 bg-blue-500 rounded-full -ml-1.5 animate-ping\"></div>\n                                <div class=\"absolute bottom-0 left-1/2 w-3 h-3 bg-purple-500 rounded-full -ml-1.5 animate-ping\" style=\"animation-delay: 0.5s;\"></div>\n                            </div>\n                        </div>\n                        \n                        <!-- Loading Text -->\n                        <div class=\"mt-8 text-center\">\n                            <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">AI is finding your perfect experts</h3>\n                            <p class=\"text-gray-600\">Analyzing profiles and matching expertise...</p>\n                            \n                            <!-- Animated dots -->\n                            <div class=\"flex justify-center items-center space-x-2 mt-4\">\n                                <div class=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n                                <div class=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style=\"animation-delay: 0.2s;\"></div>\n                                <div class=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style=\"animation-delay: 0.4s;\"></div>\n                            </div>\n                        </div>\n                        \n                        <!-- Background Animation Grid -->\n                        <div class=\"absolute inset-0 overflow-hidden pointer-events-none opacity-10\">\n                            <div class=\"absolute top-1/4 left-1/4 w-16 h-16 border-2 border-blue-500 rounded-lg animate-float\"></div>\n                            <div class=\"absolute top-1/3 right-1/4 w-12 h-12 border-2 border-purple-500 rounded-lg animate-float-delay\"></div>\n                            <div class=\"absolute bottom-1/3 left-1/3 w-14 h-14 border-2 border-indigo-500 rounded-lg animate-pulse-slow\"></div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Expert Cards Grid -->\n                <div id=\"experts-grid\" class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6\">\n                    <!-- Experts will be loaded dynamically -->\n                </div>\n\n            <!-- Pagination -->\n            <div class=\"flex justify-center mt-8\">\n                <nav class=\"flex space-x-2\">\n                    <button class=\"px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">Previous</button>\n                    <button class=\"px-3 py-2 text-white bg-primary border border-primary rounded-lg\">1</button>\n                    <button class=\"px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">2</button>\n                    <button class=\"px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">3</button>\n                    <button class=\"px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">Next</button>\n                </nav>\n            </div>\n        </div>\n    </div>\n\n<!-- Mobile Filter Modal -->\n<div id=\"filter-modal\" class=\"hidden fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\n        <div class=\"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\" id=\"filter-modal-backdrop\"></div>\n        \n        <div class=\"inline-block w-full max-w-lg overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle\">\n            <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6\">\n                <div class=\"flex justify-between items-center mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Filters</h3>\n                    <button id=\"close-filter-modal\" class=\"text-gray-400 hover:text-gray-500\">\n                        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n\n                <div class=\"space-y-4\">\n                    <!-- Search -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Search</label>\n                        <input type=\"text\" id=\"mobile-search-input\" placeholder=\"Search experts...\" class=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n\n                    <!-- Category -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Category</label>\n                        <select id=\"mobile-category-select\" class=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option>All Categories</option>\n                            <option>Coaches</option>\n                            <option>Mentors</option>\n                            <option>Consultants</option>\n                            <option>Trainers</option>\n                            <option>Freelancers</option>\n                        </select>\n                    </div>\n\n                    <!-- Price Range -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Price Range</label>\n                        <select id=\"mobile-price-select\" class=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"\">All Prices</option>\n                            <option value=\"under_500\">Under ₹500</option>\n                            <option value=\"500_1000\">₹500 - ₹1,000</option>\n                            <option value=\"1000_2000\">₹1,000 - ₹2,000</option>\n                            <option value=\"2000_plus\">₹2,000+</option>\n                        </select>\n                    </div>\n\n                    <!-- Rating -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Minimum Rating</label>\n                        <select id=\"mobile-rating-select\" class=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"\">All Ratings</option>\n                            <option value=\"4plus\">4+ Stars</option>\n                            <option value=\"4.5plus\">4.5+ Stars</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"mt-6 flex gap-3\">\n                    <button id=\"clear-filters\" class=\"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition\">\n                        Clear All\n                    </button>\n                    <button id=\"apply-filters\" class=\"flex-1 px-4 py-3 bg-primary text-white rounded-lg font-medium hover:bg-secondary transition\">\n                        Apply Filters\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Mobile Sort Modal -->\n<div id=\"sort-modal\" class=\"hidden fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\n        <div class=\"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\" id=\"sort-modal-backdrop\"></div>\n        \n        <div class=\"inline-block w-full max-w-lg overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle\">\n            <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6\">\n                <div class=\"flex justify-between items-center mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Sort By</h3>\n                    <button id=\"close-sort-modal\" class=\"text-gray-400 hover:text-gray-500\">\n                        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n\n                <div class=\"space-y-2\">\n                    <button class=\"mobile-sort-option w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition font-medium\" data-value=\"relevance\">\n                        Relevance\n                    </button>\n                    <button class=\"mobile-sort-option w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition\" data-value=\"price_low_high\">\n                        Price: Low to High\n                    </button>\n                    <button class=\"mobile-sort-option w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition\" data-value=\"price_high_low\">\n                        Price: High to Low\n                    </button>\n                    <button class=\"mobile-sort-option w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition\" data-value=\"rating\">\n                        Rating\n                    </button>\n                    <button class=\"mobile-sort-option w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 transition\" data-value=\"newest\">\n                        Newest\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script src=\"/admin-panel/js/learner-browse-experts.js\"></script>\n<script>\n// Mobile Filter and Sort Modal Handlers\ndocument.addEventListener('DOMContentLoaded', function() {\n    const filterModal = document.getElementById('filter-modal');\n    const sortModal = document.getElementById('sort-modal');\n    const mobileFilterBtn = document.getElementById('mobile-filter-btn');\n    const mobileSortBtn = document.getElementById('mobile-sort-btn');\n    const closeFilterModal = document.getElementById('close-filter-modal');\n    const closeSortModal = document.getElementById('close-sort-modal');\n    const filterModalBackdrop = document.getElementById('filter-modal-backdrop');\n    const sortModalBackdrop = document.getElementById('sort-modal-backdrop');\n\n    // Open filter modal\n    if (mobileFilterBtn) {\n        mobileFilterBtn.addEventListener('click', () => {\n            filterModal.classList.remove('hidden');\n        });\n    }\n\n    // Open sort modal\n    if (mobileSortBtn) {\n        mobileSortBtn.addEventListener('click', () => {\n            sortModal.classList.remove('hidden');\n        });\n    }\n\n    // Close filter modal\n    if (closeFilterModal) {\n        closeFilterModal.addEventListener('click', () => {\n            filterModal.classList.add('hidden');\n        });\n    }\n\n    if (filterModalBackdrop) {\n        filterModalBackdrop.addEventListener('click', () => {\n            filterModal.classList.add('hidden');\n        });\n    }\n\n    // Close sort modal\n    if (closeSortModal) {\n        closeSortModal.addEventListener('click', () => {\n            sortModal.classList.add('hidden');\n        });\n    }\n\n    if (sortModalBackdrop) {\n        sortModalBackdrop.addEventListener('click', () => {\n            sortModal.classList.add('hidden');\n        });\n    }\n\n    // Apply filters\n    const applyFiltersBtn = document.getElementById('apply-filters');\n    if (applyFiltersBtn) {\n        applyFiltersBtn.addEventListener('click', () => {\n            filterModal.classList.add('hidden');\n        });\n    }\n\n    // Clear filters\n    const clearFiltersBtn = document.getElementById('clear-filters');\n    if (clearFiltersBtn) {\n        clearFiltersBtn.addEventListener('click', () => {\n            document.getElementById('mobile-search-input').value = '';\n            document.getElementById('mobile-category-select').selectedIndex = 0;\n            document.getElementById('mobile-price-select').selectedIndex = 0;\n            document.getElementById('mobile-rating-select').selectedIndex = 0;\n        });\n    }\n\n    // Mobile sort options\n    const sortOptions = document.querySelectorAll('.mobile-sort-option');\n    sortOptions.forEach(option => {\n        option.addEventListener('click', () => {\n            const value = option.getAttribute('data-value');\n            const desktopSortSelect = document.getElementById('sort-select');\n            if (desktopSortSelect) {\n                desktopSortSelect.value = value;\n                desktopSortSelect.dispatchEvent(new Event('change'));\n            }\n            sortModal.classList.add('hidden');\n        });\n    });\n});\n</script>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20094},"learner/learner-dashboard.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Check if user is logged in as learner\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n    // Save the current URL to redirect back after login\n    $_SESSION['redirect_after_login'] = $_SERVER['REQUEST_URI'];\n    header('Location: ?panel=learner&page=auth');\n    exit;\n}\n\n$page_title = \"Dashboard - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n        <!-- Header -->\n        <div class=\"mb-8\">\n            <h1 id=\"welcome-message\" class=\"text-3xl font-bold text-gray-900 mb-2\">Welcome back!</h1>\n            <p class=\"text-gray-600\">Here's what's happening with your learning journey</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-primary rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p id=\"total-sessions\" class=\"text-2xl font-semibold text-gray-900\">0</p>\n                        <p class=\"text-gray-600 text-sm\">Total Sessions</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-green-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p id=\"completed-sessions\" class=\"text-2xl font-semibold text-gray-900\">0</p>\n                        <p class=\"text-gray-600 text-sm\">Completed</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-accent rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p id=\"progress\" class=\"text-2xl font-semibold text-gray-900\">0%</p>\n                        <p class=\"text-gray-600 text-sm\">Progress</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-3 bg-purple-500 rounded-full\">\n                        <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p id=\"active-experts\" class=\"text-2xl font-semibold text-gray-900\">0</p>\n                        <p class=\"text-gray-600 text-sm\">Active Experts</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid lg:grid-cols-3 gap-8\">\n            <!-- Upcoming Sessions -->\n            <div class=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\">\n                <div class=\"flex justify-between items-center mb-6\">\n                    <h2 class=\"text-xl font-semibold\">Upcoming Sessions</h2>\n                    <a href=\"?panel=learner&page=booking\" class=\"text-primary hover:text-secondary text-sm\">View All</a>\n                </div>\n                <div id=\"upcoming-sessions\" class=\"space-y-4\">\n                    <p class=\"text-gray-500 text-center py-8\">Loading sessions...</p>\n                </div>\n            </div>\n\n            <!-- Quick Actions & Progress -->\n            <div class=\"space-y-6\">\n                <!-- Quick Actions -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h2 class=\"text-xl font-semibold mb-4\">Quick Actions</h2>\n                    <div class=\"space-y-3\">\n                        <a href=\"?panel=learner&page=browse-experts\" class=\"block w-full bg-primary text-white py-3 px-4 rounded-lg text-center hover:bg-secondary transition\">\n                            Find New Expert\n                        </a>\n                        <a href=\"?panel=learner&page=booking\" class=\"block w-full border border-gray-300 text-gray-700 py-3 px-4 rounded-lg text-center hover:bg-gray-50 transition\">\n                            Schedule Session\n                        </a>\n                        <a href=\"?panel=learner&page=profile\" class=\"block w-full border border-gray-300 text-gray-700 py-3 px-4 rounded-lg text-center hover:bg-gray-50 transition\">\n                            Update Profile\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Recent Activity -->\n                <div class=\"bg-white rounded-lg shadow-lg p-6\">\n                    <h2 class=\"text-xl font-semibold mb-4\">Recent Activity</h2>\n                    <div id=\"recent-activity\" class=\"space-y-3\">\n                        <p class=\"text-gray-500 text-sm\">Loading...</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Recent Sessions -->\n        <div class=\"mt-8 bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex justify-between items-center mb-6\">\n                <h2 class=\"text-xl font-semibold\">Recent Sessions</h2>\n                <a href=\"#\" class=\"text-primary hover:text-secondary text-sm\">View All</a>\n            </div>\n            <div class=\"overflow-x-auto\">\n                <table class=\"w-full\">\n                    <thead>\n                        <tr class=\"border-b border-gray-200\">\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Expert</th>\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Topic</th>\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Date</th>\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Duration</th>\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Status</th>\n                            <th class=\"text-left py-3 px-4 font-medium text-gray-700\">Action</th>\n                        </tr>\n                    </thead>\n                    <tbody id=\"recent-sessions-table\">\n                        <tr>\n                            <td colspan=\"6\" class=\"py-8 text-center text-gray-500\">Loading sessions...</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    </div>\n\n<script>\n// Escape HTML to prevent XSS\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\ndocument.addEventListener('DOMContentLoaded', async function() {\n    try {\n        const response = await fetch('/admin-panel/apis/learner/dashboard.php');\n        const result = await response.json();\n        \n        if (result.success) {\n            const data = result.data;\n            \n            // Update welcome message (using textContent for safety)\n            document.getElementById('welcome-message').textContent = `Welcome back, ${data.profile.full_name}!`;\n            \n            // Update stats\n            document.getElementById('total-sessions').textContent = data.stats.total_sessions;\n            document.getElementById('completed-sessions').textContent = data.stats.completed_sessions;\n            document.getElementById('progress').textContent = data.stats.progress + '%';\n            document.getElementById('active-experts').textContent = data.stats.active_experts;\n            \n            // Render upcoming sessions\n            const upcomingContainer = document.getElementById('upcoming-sessions');\n            if (data.upcoming_sessions.length === 0) {\n                upcomingContainer.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No upcoming sessions. <a href=\"?panel=learner&page=browse-experts\" class=\"text-primary\">Browse experts</a> to book a session.</p>';\n            } else {\n                upcomingContainer.innerHTML = data.upcoming_sessions.map(session => {\n                    const sessionDate = new Date(session.session_datetime);\n                    const formattedDate = sessionDate.toLocaleString('en-IN', {\n                        timeZone: 'Asia/Kolkata',\n                        month: 'short',\n                        day: 'numeric',\n                        hour: 'numeric',\n                        minute: '2-digit',\n                        hour12: true\n                    });\n                    \n                    return `\n                        <div class=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition\">\n                            <div class=\"flex justify-between items-start\">\n                                <div class=\"flex\">\n                                    <img src=\"${escapeHtml(session.profile_photo || 'attached_assets/stock_images/diverse_professional_1d96e39f.jpg')}\" \n                                         alt=\"${escapeHtml(session.expert_name)}\" \n                                         class=\"w-12 h-12 rounded-full mr-4 object-cover\">\n                                    <div>\n                                        <h3 class=\"font-semibold\">${escapeHtml(session.expert_name)}</h3>\n                                        <p class=\"text-gray-600 text-sm\">${escapeHtml(session.tagline || 'Expert Session')}</p>\n                                        <div class=\"flex items-center mt-2 text-sm text-gray-500\">\n                                            <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                                            </svg>\n                                            ${formattedDate}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"flex space-x-2\">\n                                    <span class=\"px-3 py-1 ${session.status === 'confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'} text-sm rounded\">${escapeHtml(session.status)}</span>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                }).join('');\n            }\n            \n            // Render recent activity\n            const activityContainer = document.getElementById('recent-activity');\n            if (data.recent_activity.length === 0) {\n                activityContainer.innerHTML = '<p class=\"text-gray-500 text-sm\">No recent activity</p>';\n            } else {\n                activityContainer.innerHTML = data.recent_activity.slice(0, 3).map(activity => {\n                    const updatedDate = new Date(activity.updated_at);\n                    const timeAgo = getTimeAgo(updatedDate);\n                    const statusColors = {\n                        'completed': 'bg-green-500',\n                        'confirmed': 'bg-blue-500',\n                        'pending': 'bg-yellow-500',\n                        'cancelled': 'bg-red-500'\n                    };\n                    \n                    return `\n                        <div class=\"flex items-center\">\n                            <div class=\"w-2 h-2 ${statusColors[activity.status] || 'bg-gray-500'} rounded-full mr-3\"></div>\n                            <div class=\"text-sm\">\n                                <p class=\"text-gray-900\">${activity.status === 'completed' ? 'Completed' : 'Booked'} session with ${escapeHtml(activity.expert_name)}</p>\n                                <p class=\"text-gray-500\">${timeAgo}</p>\n                            </div>\n                        </div>\n                    `;\n                }).join('');\n            }\n            \n            // Render recent sessions table\n            const tableBody = document.getElementById('recent-sessions-table');\n            if (data.recent_sessions.length === 0) {\n                tableBody.innerHTML = '<tr><td colspan=\"6\" class=\"py-8 text-center text-gray-500\">No completed sessions yet</td></tr>';\n            } else {\n                tableBody.innerHTML = data.recent_sessions.map(session => {\n                    const sessionDate = new Date(session.session_datetime);\n                    const formattedDate = sessionDate.toLocaleDateString('en-IN', {\n                        timeZone: 'Asia/Kolkata',\n                        month: 'short',\n                        day: 'numeric',\n                        year: 'numeric'\n                    });\n                    \n                    return `\n                        <tr class=\"border-b border-gray-100\">\n                            <td class=\"py-3 px-4\">\n                                <div class=\"flex items-center\">\n                                    <img src=\"${escapeHtml(session.profile_photo || 'attached_assets/stock_images/diverse_professional_1d96e39f.jpg')}\" \n                                         alt=\"${escapeHtml(session.expert_name)}\" \n                                         class=\"w-8 h-8 rounded-full mr-3 object-cover\">\n                                    <span>${escapeHtml(session.expert_name)}</span>\n                                </div>\n                            </td>\n                            <td class=\"py-3 px-4\">${escapeHtml(session.tagline || 'Expert Session')}</td>\n                            <td class=\"py-3 px-4\">${formattedDate}</td>\n                            <td class=\"py-3 px-4\">${session.duration_minutes} min</td>\n                            <td class=\"py-3 px-4\">\n                                <span class=\"px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full\">Completed</span>\n                            </td>\n                            <td class=\"py-3 px-4\">\n                                <button class=\"text-primary hover:text-secondary text-sm\">View Details</button>\n                            </td>\n                        </tr>\n                    `;\n                }).join('');\n            }\n        } else {\n            console.error('Error loading dashboard:', result.message);\n        }\n    } catch (error) {\n        console.error('Error:', error);\n    }\n});\n\nfunction getTimeAgo(date) {\n    const seconds = Math.floor((new Date() - date) / 1000);\n    const intervals = {\n        year: 31536000,\n        month: 2592000,\n        week: 604800,\n        day: 86400,\n        hour: 3600,\n        minute: 60\n    };\n    \n    for (const [unit, secondsInUnit] of Object.entries(intervals)) {\n        const interval = Math.floor(seconds / secondsInUnit);\n        if (interval >= 1) {\n            return `${interval} ${unit}${interval !== 1 ? 's' : ''} ago`;\n        }\n    }\n    return 'just now';\n}\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":16366},"learner/learner-expert-profile.php":{"content":"<?php\n$page_title = \"Expert Profile - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n<!-- Expert Profile Hero Section -->\n<div class=\"bg-gradient-to-r from-primary to-blue-700 py-16 md:py-20\">\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex flex-col md:flex-row items-center md:items-start gap-8 md:gap-12\">\n            <!-- Expert Photo -->\n            <div class=\"relative group\">\n                <div id=\"expert-photo\" class=\"relative w-40 h-40 md:w-48 md:h-48 rounded-full bg-white shadow-xl overflow-hidden flex items-center justify-center ring-4 ring-white/50\">\n                    <div class=\"animate-pulse\">\n                        <svg class=\"w-20 h-20 text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <!-- Verification Badge -->\n                <div class=\"absolute bottom-2 right-2 bg-green-500 rounded-full p-2 shadow-lg ring-4 ring-white\">\n                    <svg class=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"></path>\n                    </svg>\n                </div>\n            </div>\n            \n            <!-- Expert Info -->\n            <div class=\"flex-1 text-center md:text-left\">\n                <div class=\"mb-4\">\n                    <div class=\"flex items-center justify-center md:justify-start gap-3 mb-2\">\n                        <h1 id=\"expert-name\" class=\"text-3xl md:text-4xl font-bold text-white\">\n                            <span class=\"inline-block animate-pulse bg-white/20 rounded px-4 py-2\">Loading...</span>\n                        </h1>\n                        <span class=\"px-3 py-1 bg-green-500 text-white text-sm rounded-full font-semibold\">\n                            ✓ Verified\n                        </span>\n                    </div>\n                    <p id=\"expert-title\" class=\"text-xl text-blue-100 mb-3\">\n                        <span class=\"inline-block animate-pulse bg-white/10 rounded px-3 py-1\">Loading...</span>\n                    </p>\n                    <div class=\"flex items-center justify-center md:justify-start text-blue-100 gap-4 text-sm\">\n                        <span class=\"flex items-center gap-1\">\n                            <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fill-rule=\"evenodd\" d=\"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z\" clip-rule=\"evenodd\"></path>\n                            </svg>\n                            <span id=\"expert-location\">India</span>\n                        </span>\n                        <span class=\"flex items-center gap-1\">\n                            <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\" clip-rule=\"evenodd\"></path>\n                            </svg>\n                            Responds in 2 hours\n                        </span>\n                    </div>\n                </div>\n                \n                <!-- Rating & Reviews -->\n                <div class=\"flex items-center justify-center md:justify-start gap-3 mb-6\">\n                    <div id=\"expert-rating-stars\" class=\"flex text-yellow-400 text-xl\">\n                        ☆☆☆☆☆\n                    </div>\n                    <div class=\"flex items-center gap-2\">\n                        <span id=\"expert-rating-value\" class=\"text-white font-bold\">(0.0)</span>\n                        <span id=\"expert-review-count\" class=\"text-blue-200 text-sm\">• 0 reviews</span>\n                    </div>\n                </div>\n                \n                <!-- Skills Tags -->\n                <div id=\"expert-skills\" class=\"flex flex-wrap gap-2 justify-center md:justify-start mb-6\">\n                    <!-- Skills loaded dynamically -->\n                </div>\n                \n                <!-- Price & Actions -->\n                <div class=\"bg-white/10 backdrop-blur-sm rounded-xl p-6 inline-block\">\n                    <div class=\"flex flex-col sm:flex-row items-center gap-6\">\n                        <div class=\"text-center sm:text-left\">\n                            <div class=\"flex items-baseline gap-2\">\n                                <span id=\"expert-hourly-rate\" class=\"text-4xl font-bold text-white\">₹0</span>\n                                <span class=\"text-blue-200\">/hour</span>\n                            </div>\n                            <p class=\"text-blue-200 text-sm mt-1\">Starting price per session</p>\n                        </div>\n                        <div class=\"flex flex-col sm:flex-row gap-3\">\n                            <a id=\"book-session-btn\" href=\"?panel=learner&page=booking\" class=\"bg-white text-primary px-6 py-3 rounded-lg hover:bg-gray-100 transition font-semibold flex items-center gap-2\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                                </svg>\n                                Book Session\n                            </a>\n                            <button class=\"border-2 border-white text-white px-6 py-3 rounded-lg hover:bg-white hover:text-primary transition font-semibold flex items-center gap-2\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"></path>\n                                </svg>\n                                Message\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Main Content -->\n<div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n    <!-- Tabs -->\n    <div class=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n        <div class=\"border-b border-gray-200\">\n            <nav class=\"flex space-x-8 px-8\">\n                <button class=\"py-4 px-2 border-b-2 border-primary text-primary font-semibold transition-colors\">\n                    About\n                </button>\n                <button class=\"py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium transition-colors\">\n                    Experience\n                </button>\n                <button class=\"py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium transition-colors\">\n                    Reviews\n                </button>\n            </nav>\n        </div>\n\n        <!-- Tab Content -->\n        <div class=\"p-8 lg:p-12\">\n            <div class=\"grid lg:grid-cols-3 gap-12\">\n                <!-- Main Content -->\n                <div class=\"lg:col-span-2\">\n                    <!-- Bio Section -->\n                    <div class=\"mb-10\">\n                        <h2 class=\"text-2xl font-bold text-gray-900 mb-4\">About Expert</h2>\n                        <div id=\"expert-bio\" class=\"text-gray-700 leading-relaxed whitespace-pre-line\">\n                            <div class=\"space-y-3\">\n                                <div class=\"h-4 bg-gray-200 rounded animate-pulse w-full\"></div>\n                                <div class=\"h-4 bg-gray-200 rounded animate-pulse w-5/6\"></div>\n                                <div class=\"h-4 bg-gray-200 rounded animate-pulse w-4/6\"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Stats Cards -->\n                    <div class=\"grid grid-cols-3 gap-6\">\n                        <div class=\"bg-blue-50 rounded-xl p-6 text-center hover:shadow-lg transition\">\n                            <div class=\"mb-2\">\n                                <svg class=\"w-10 h-10 mx-auto text-primary\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path d=\"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z\"></path>\n                                </svg>\n                            </div>\n                            <div id=\"expert-total-sessions\" class=\"text-3xl font-bold text-primary mb-1\">0</div>\n                            <div class=\"text-gray-600 text-sm font-medium\">Sessions</div>\n                        </div>\n                        <div class=\"bg-green-50 rounded-xl p-6 text-center hover:shadow-lg transition\">\n                            <div class=\"mb-2\">\n                                <svg class=\"w-10 h-10 mx-auto text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fill-rule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clip-rule=\"evenodd\"></path>\n                                </svg>\n                            </div>\n                            <div id=\"expert-experience-years\" class=\"text-3xl font-bold text-green-600 mb-1\">0</div>\n                            <div class=\"text-gray-600 text-sm font-medium\">Years Exp</div>\n                        </div>\n                        <div class=\"bg-yellow-50 rounded-xl p-6 text-center hover:shadow-lg transition\">\n                            <div class=\"mb-2\">\n                                <svg class=\"w-10 h-10 mx-auto text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"></path>\n                                </svg>\n                            </div>\n                            <div id=\"expert-total-reviews\" class=\"text-3xl font-bold text-yellow-600 mb-1\">0</div>\n                            <div class=\"text-gray-600 text-sm font-medium\">Reviews</div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Sidebar -->\n                <div class=\"space-y-6\">\n                    <!-- Verification Card -->\n                    <div class=\"bg-green-50 rounded-xl p-6 border border-green-200\">\n                        <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Verification Status</h3>\n                        <div class=\"flex items-start gap-4\">\n                            <div class=\"flex-shrink-0 bg-green-500 rounded-full p-2\">\n                                <svg class=\"w-6 h-6 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path>\n                                </svg>\n                            </div>\n                            <div>\n                                <div class=\"font-bold text-gray-900 mb-1\">Verified Expert</div>\n                                <div class=\"text-sm text-gray-600\">Identity & credentials verified by Nexpert.ai</div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Quick Actions -->\n                    <div class=\"bg-blue-50 rounded-xl p-6 border border-blue-200\">\n                        <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Quick Actions</h3>\n                        <div class=\"space-y-3\">\n                            <a id=\"sidebar-book-btn\" href=\"?panel=learner&page=booking\" class=\"block w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition text-center font-semibold\">\n                                Book Session\n                            </a>\n                            <button class=\"w-full border-2 border-primary text-primary px-6 py-3 rounded-lg hover:bg-primary hover:text-white transition text-center font-semibold\">\n                                Send Message\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script src=\"/admin-panel/js/learner-expert-profile.js\"></script>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":13467},"learner/learner-notifications.php":{"content":"<?php\n$page_title = \"Notifications - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n                </button>\n                <button class=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm\">\n                    Settings\n                </button>\n            </div>\n        </div>\n\n        <!-- Filter Tabs -->\n        <div class=\"mb-6\">\n            <div class=\"border-b border-gray-200\">\n                <nav class=\"flex space-x-8\">\n                    <button class=\"py-2 px-1 border-b-2 border-primary text-primary font-medium\">All</button>\n                    <button class=\"py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700\">Unread</button>\n                    <button class=\"py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700\">Sessions</button>\n                    <button class=\"py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700\">Payments</button>\n                    <button class=\"py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700\">Updates</button>\n                </nav>\n            </div>\n        </div>\n\n        <!-- Notifications List -->\n        <div class=\"space-y-4\">\n            <!-- Session Reminder - Unread -->\n            <div class=\"bg-blue-50 border-l-4 border-primary p-4 rounded-lg\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <div class=\"w-10 h-10 bg-primary rounded-full flex items-center justify-center\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <div class=\"flex items-center\">\n                                <h3 class=\"text-sm font-semibold text-gray-900\">Session Reminder</h3>\n                                <span class=\"ml-2 px-2 py-0.5 bg-primary text-white text-xs rounded-full\">New</span>\n                            </div>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                Your session with <strong>Sarah Chen</strong> starts in 1 hour. \n                                <a href=\"?panel=learner&page=dashboard\" class=\"text-primary hover:text-secondary\">Join now</a>\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">2 minutes ago</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Assignment Upload -->\n            <div class=\"bg-white border border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <div class=\"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <h3 class=\"text-sm font-semibold text-gray-900\">New Assignment</h3>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                <strong>Marcus Johnson</strong> uploaded a new assignment: \"React Component Refactoring Exercise\"\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">1 hour ago</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Payment Confirmation -->\n            <div class=\"bg-white border border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <div class=\"w-10 h-10 bg-accent rounded-full flex items-center justify-center\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <h3 class=\"text-sm font-semibold text-gray-900\">Payment Confirmed</h3>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                Your payment of $75.00 for the session with <strong>Sarah Chen</strong> has been processed successfully.\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">3 hours ago</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Expert Message -->\n            <div class=\"bg-white border border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <img src=\"attached_assets/stock_images/diverse_professional_4d71624f.jpg\" alt=\"Elena Rodriguez\" class=\"w-10 h-10 rounded-full object-cover\">\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <h3 class=\"text-sm font-semibold text-gray-900\">Message from Expert</h3>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                <strong>Elena Rodriguez</strong>: \"Great work on the marketing strategy! I've uploaded additional resources for you to review.\"\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">Yesterday, 4:30 PM</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Session Completed -->\n            <div class=\"bg-white border border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition opacity-75\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <div class=\"w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <h3 class=\"text-sm font-semibold text-gray-900\">Session Completed</h3>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                Your session with <strong>Elena Rodriguez</strong> has been completed. Session recording and notes are now available.\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">2 days ago</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n\n            <!-- Welcome Message -->\n            <div class=\"bg-white border border-gray-200 p-4 rounded-lg hover:bg-gray-50 transition opacity-75\">\n                <div class=\"flex justify-between items-start\">\n                    <div class=\"flex\">\n                        <div class=\"flex-shrink-0\">\n                            <div class=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\">\n                                <svg class=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                        <div class=\"ml-4 flex-1\">\n                            <h3 class=\"text-sm font-semibold text-gray-900\">Welcome to Nexpert.ai!</h3>\n                            <p class=\"text-sm text-gray-700 mt-1\">\n                                Thank you for joining Nexpert.ai! Explore our expert network and book your first session to accelerate your learning journey.\n                            </p>\n                            <p class=\"text-xs text-gray-500 mt-2\">1 week ago</p>\n                        </div>\n                    </div>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Empty State (Hidden when notifications present) -->\n        <div class=\"text-center py-12 hidden\">\n            <div class=\"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg class=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-5 5-5-5h5v-3a1 1 0 011-1h3a1 1 0 011 1v3z\"></path>\n                </svg>\n            </div>\n            <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No notifications</h3>\n            <p class=\"text-gray-600\">You're all caught up! New notifications will appear here.</p>\n        </div>\n\n        <!-- Load More -->\n        <div class=\"text-center mt-8\">\n            <button class=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition\">\n                Load More Notifications\n            </button>\n        </div>\n    </div>\n\n    <!-- Notification Settings Modal (Hidden by default) -->\n    <div class=\"fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50\" id=\"settingsModal\">\n        <div class=\"flex items-center justify-center min-h-screen p-4\">\n            <div class=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\">\n                <div class=\"flex justify-between items-center mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Notification Settings</h3>\n                    <button class=\"text-gray-400 hover:text-gray-600\">\n                        <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                        </svg>\n                    </button>\n                </div>\n                \n                <div class=\"space-y-4\">\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm text-gray-700\">Email notifications</span>\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\n                            <input type=\"checkbox\" checked class=\"sr-only peer\">\n                            <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                        </label>\n                    </div>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm text-gray-700\">Push notifications</span>\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\n                            <input type=\"checkbox\" checked class=\"sr-only peer\">\n                            <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                        </label>\n                    </div>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm text-gray-700\">Session reminders</span>\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\n                            <input type=\"checkbox\" checked class=\"sr-only peer\">\n                            <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                        </label>\n                    </div>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm text-gray-700\">Marketing emails</span>\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\n                            <input type=\"checkbox\" class=\"sr-only peer\">\n                            <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                        </label>\n                    </div>\n                </div>\n                \n                <div class=\"flex justify-end space-x-3 mt-6\">\n                    <button class=\"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition\">Cancel</button>\n                    <button class=\"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition\">Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":17499},"learner/learner-payments.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Check if user is logged in as learner\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n    // Save the current URL to redirect back after login\n    $_SESSION['redirect_after_login'] = $_SERVER['REQUEST_URI'];\n    header('Location: ?panel=learner&page=auth');\n    exit;\n}\n\n$page_title = \"Payment - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8\">\n        <!-- Progress Steps -->\n        <div class=\"mb-8\">\n            <div class=\"flex items-center justify-center\">\n                <div class=\"flex items-center\">\n                    <div class=\"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        ✓\n                    </div>\n                    <span class=\"ml-2 text-sm text-green-600 font-medium\">Session Details</span>\n                </div>\n                <div class=\"w-16 h-0.5 bg-green-500 mx-4\"></div>\n                <div class=\"flex items-center\">\n                    <div class=\"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        2\n                    </div>\n                    <span class=\"ml-2 text-sm text-primary font-medium\">Payment</span>\n                </div>\n                <div class=\"w-16 h-0.5 bg-gray-300 mx-4\"></div>\n                <div class=\"flex items-center\">\n                    <div class=\"w-8 h-8 bg-gray-300 text-white rounded-full flex items-center justify-center text-sm font-semibold\">\n                        3\n                    </div>\n                    <span class=\"ml-2 text-sm text-gray-500\">Confirmation</span>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid lg:grid-cols-3 gap-6 lg:gap-8\">\n            <!-- Payment Form -->\n            <div class=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\">\n                <h1 class=\"text-2xl font-bold text-gray-900 mb-6\">Payment Details</h1>\n                \n                <form id=\"payment-form\" class=\"space-y-6\">\n                    <!-- Payment Method Selection -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Payment Method</h3>\n                        <div class=\"space-y-3\">\n                            <label class=\"flex items-center p-4 border-2 border-gray-300 rounded-lg hover:border-primary cursor-pointer transition duration-200\">\n                                <input type=\"radio\" name=\"payment_method\" value=\"cash_test\" checked class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300\">\n                                <div class=\"ml-3 flex items-center\">\n                                    <svg class=\"w-6 h-6 mr-2 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                                    </svg>\n                                    <div>\n                                        <span class=\"font-medium\">Cash (Test Mode)</span>\n                                        <p class=\"text-xs text-gray-500 mt-1\">Use this option for testing. No real payment required.</p>\n                                    </div>\n                                </div>\n                            </label>\n                            <label class=\"flex items-center p-4 border-2 border-gray-300 rounded-lg hover:border-primary cursor-pointer transition duration-200 opacity-50 cursor-not-allowed\">\n                                <input type=\"radio\" name=\"payment_method\" value=\"card\" disabled class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300\">\n                                <div class=\"ml-3 flex items-center\">\n                                    <svg class=\"w-6 h-6 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"></path>\n                                    </svg>\n                                    <div>\n                                        <span class=\"font-medium\">Credit/Debit Card</span>\n                                        <p class=\"text-xs text-gray-500 mt-1\">Coming soon via Razorpay</p>\n                                    </div>\n                                </div>\n                            </label>\n                            <label class=\"flex items-center p-4 border-2 border-gray-300 rounded-lg hover:border-primary cursor-pointer transition duration-200 opacity-50 cursor-not-allowed\">\n                                <input type=\"radio\" name=\"payment_method\" value=\"upi\" disabled class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300\">\n                                <div class=\"ml-3 flex items-center\">\n                                    <svg class=\"w-6 h-6 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\"></path>\n                                    </svg>\n                                    <div>\n                                        <span class=\"font-medium\">UPI</span>\n                                        <p class=\"text-xs text-gray-500 mt-1\">Coming soon</p>\n                                    </div>\n                                </div>\n                            </label>\n                        </div>\n                    </div>\n\n                    <!-- Test Mode Notice -->\n                    <div class=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                        <div class=\"flex items-start\">\n                            <svg class=\"w-5 h-5 text-green-600 mt-0.5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                            </svg>\n                            <div>\n                                <h4 class=\"text-sm font-semibold text-green-800 mb-1\">Test Mode Active</h4>\n                                <p class=\"text-sm text-green-700\">\n                                    Cash payment option is for testing purposes only. Click \"Complete Payment\" to simulate a successful payment.\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Terms -->\n                    <div class=\"flex items-start\">\n                        <input type=\"checkbox\" id=\"terms-checkbox\" required class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-0.5\">\n                        <div class=\"ml-3 text-sm\">\n                            <p class=\"text-gray-700\">\n                                I agree to the <a href=\"#\" class=\"text-primary hover:text-secondary\">Terms of Service</a> and \n                                <a href=\"#\" class=\"text-primary hover:text-secondary\">Privacy Policy</a>\n                            </p>\n                        </div>\n                    </div>\n\n                    <!-- Submit Button -->\n                    <button type=\"submit\" id=\"submit-payment-btn\" class=\"w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition duration-200 font-semibold text-lg shadow-md hover:shadow-lg\">\n                        Complete Payment\n                    </button>\n                </form>\n            </div>\n\n            <!-- Order Summary -->\n            <div class=\"bg-white rounded-lg shadow-lg p-6 h-fit\">\n                <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Order Summary</h2>\n                \n                <!-- Expert Info -->\n                <div class=\"mb-6 pb-6 border-b\">\n                    <div class=\"flex items-center mb-3\">\n                        <div id=\"summary-expert-photo\" class=\"w-12 h-12 rounded-full bg-gray-200 mr-3 overflow-hidden flex items-center justify-center\">\n                            <span class=\"text-xl text-gray-400\">👤</span>\n                        </div>\n                        <div>\n                            <h3 id=\"summary-expert-name\" class=\"font-semibold text-gray-900\">Loading...</h3>\n                            <p id=\"summary-expert-title\" class=\"text-sm text-gray-600\">Loading...</p>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Session Details -->\n                <div class=\"space-y-3 mb-6 text-sm\">\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Session Date:</span>\n                        <span id=\"summary-date\" class=\"text-gray-900 font-medium\">-</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Session Time:</span>\n                        <span id=\"summary-time\" class=\"text-gray-900 font-medium\">-</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Duration:</span>\n                        <span class=\"text-gray-900 font-medium\">60 minutes</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Type:</span>\n                        <span class=\"text-gray-900 font-medium\">1-on-1 Video Call</span>\n                    </div>\n                </div>\n\n                <!-- Price Breakdown -->\n                <div class=\"border-t pt-4 space-y-2 text-sm\">\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Session Fee:</span>\n                        <span id=\"summary-amount\" class=\"text-gray-900\">₹0</span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Platform Fee:</span>\n                        <span class=\"text-gray-900\">₹0</span>\n                    </div>\n                    <div class=\"flex justify-between text-base font-semibold pt-2 border-t\">\n                        <span class=\"text-gray-900\">Total:</span>\n                        <span id=\"summary-total\" class=\"text-primary\">₹0</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n<script>\n(function() {\n    'use strict';\n\n    // Get URL parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const expertId = urlParams.get('expert_id');\n    const sessionDatetime = urlParams.get('datetime');\n    const amount = urlParams.get('amount');\n\n    if (!expertId || !sessionDatetime || !amount) {\n        Swal.fire({\n            icon: 'warning',\n            title: 'Missing Information',\n            text: 'Payment details are incomplete. Redirecting to browse experts...',\n            confirmButtonColor: '#3B82F6',\n            timer: 2000,\n            showConfirmButton: false\n        }).then(() => {\n            window.location.href = '/?panel=learner&page=browse-experts';\n        });\n        return;\n    }\n\n    // Load expert data and populate summary\n    async function loadExpertData() {\n        try {\n            const response = await fetch(`/admin-panel/apis/learner/booking.php?expert_id=${expertId}`);\n            const result = await response.json();\n\n            if (result.success) {\n                const expert = result.data;\n                document.getElementById('summary-expert-name').textContent = expert.name || 'Expert';\n                document.getElementById('summary-expert-title').textContent = expert.professional_title || 'Professional';\n                \n                if (expert.profile_photo) {\n                    const photoContainer = document.getElementById('summary-expert-photo');\n                    photoContainer.innerHTML = `<img src=\"${expert.profile_photo}\" alt=\"${expert.name}\" class=\"w-full h-full object-cover\">`;\n                }\n            }\n        } catch (error) {\n            console.error('Error loading expert data:', error);\n        }\n    }\n\n    // Populate session details\n    const datetime = new Date(sessionDatetime);\n    const formattedDate = datetime.toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' });\n    const formattedTime = datetime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\n    \n    document.getElementById('summary-date').textContent = formattedDate;\n    document.getElementById('summary-time').textContent = formattedTime;\n    document.getElementById('summary-amount').textContent = `₹${amount}`;\n    document.getElementById('summary-total').textContent = `₹${amount}`;\n\n    // Handle form submission\n    document.getElementById('payment-form').addEventListener('submit', async function(e) {\n        e.preventDefault();\n\n        const paymentMethod = document.querySelector('input[name=\"payment_method\"]:checked').value;\n        const submitBtn = document.getElementById('submit-payment-btn');\n        \n        submitBtn.disabled = true;\n        submitBtn.textContent = 'Processing...';\n\n        try {\n            const response = await fetch('/admin-panel/apis/learner/payment.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    expert_id: expertId,\n                    session_datetime: sessionDatetime,\n                    amount: amount,\n                    duration: 60,\n                    payment_method: paymentMethod\n                })\n            });\n\n            const result = await response.json();\n\n            if (result.success) {\n                await Swal.fire({\n                    icon: 'success',\n                    title: 'Payment Successful!',\n                    text: 'Your session has been booked.',\n                    confirmButtonColor: '#3B82F6',\n                    timer: 2000,\n                    showConfirmButton: false\n                });\n                window.location.href = '/?panel=learner&page=dashboard';\n            } else {\n                if (response.status === 401) {\n                    await Swal.fire({\n                        icon: 'warning',\n                        title: 'Login Required',\n                        text: 'Please login to complete payment',\n                        confirmButtonColor: '#3B82F6'\n                    });\n                    window.location.href = '/?panel=learner&page=auth';\n                } else {\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Payment Failed',\n                        text: result.message || 'Payment could not be processed',\n                        confirmButtonColor: '#3B82F6'\n                    });\n                    submitBtn.disabled = false;\n                    submitBtn.textContent = 'Complete Payment';\n                }\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'Payment processing failed. Please try again.',\n                confirmButtonColor: '#3B82F6'\n            });\n            submitBtn.disabled = false;\n            submitBtn.textContent = 'Complete Payment';\n        }\n    });\n\n    // Initialize\n    loadExpertData();\n})();\n</script>\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":16123},"learner/learner-profile.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Check if user is logged in as learner\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n    // Save the current URL to redirect back after login\n    $_SESSION['redirect_after_login'] = $_SERVER['REQUEST_URI'];\n    header('Location: ?panel=learner&page=auth');\n    exit;\n}\n\n$page_title = \"Profile - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n    <div class=\"max-w-7xl mx-auto px-4 py-8\">\n        <!-- Header -->\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Profile Settings</h1>\n            <p class=\"text-gray-600\">Manage your personal information and preferences</p>\n        </div>\n\n        <!-- Profile Form -->\n        <div class=\"bg-white rounded-lg shadow-lg p-8\">\n            <form id=\"profile-form\">\n                <!-- Profile Photo -->\n                <div class=\"flex items-center mb-8\">\n                    <img id=\"profile-photo\" src=\"attached_assets/stock_images/professional_busines_a5bb892c.jpg\" alt=\"Profile\" class=\"w-20 h-20 rounded-full object-cover mr-6\">\n                    <div>\n                        <input type=\"file\" id=\"photo-upload\" accept=\"image/jpeg,image/png,image/jpg\" class=\"hidden\">\n                        <button type=\"button\" id=\"change-photo-btn\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition\">\n                            Change Photo\n                        </button>\n                        <p class=\"text-gray-600 text-sm mt-2\">JPG, PNG up to 10MB</p>\n                    </div>\n                </div>\n\n                <!-- Personal Information -->\n                <div class=\"grid md:grid-cols-2 gap-6\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name</label>\n                        <input type=\"text\" id=\"full_name\" name=\"full_name\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" required>\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n                        <input type=\"email\" id=\"email\" name=\"email\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed\" readonly>\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Phone</label>\n                        <input type=\"tel\" id=\"phone\" name=\"phone\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Timezone</label>\n                        <select id=\"timezone\" name=\"timezone\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"Asia/Kolkata\">India Standard Time (IST)</option>\n                            <option value=\"America/Los_Angeles\">Pacific Standard Time (PST)</option>\n                            <option value=\"America/New_York\">Eastern Standard Time (EST)</option>\n                            <option value=\"America/Chicago\">Central Standard Time (CST)</option>\n                            <option value=\"Europe/London\">Greenwich Mean Time (GMT)</option>\n                        </select>\n                    </div>\n                </div>\n\n                <!-- Goals & Preferences -->\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">Learning Goals</label>\n                    <textarea id=\"learning_goals\" name=\"learning_goals\" rows=\"4\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" placeholder=\"Describe your learning goals and what you want to achieve...\"></textarea>\n                </div>\n\n                <!-- Action Buttons -->\n                <div class=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\n                    <button type=\"button\" class=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition\">\n                        Cancel\n                    </button>\n                    <button type=\"submit\" class=\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition\">\n                        Save Changes\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n    </div>\n    </div>\n\n<script>\nlet profileData = {};\n\n// Load profile data\nasync function loadProfile() {\n    try {\n        const response = await fetch('/admin-panel/apis/learner/profile.php');\n        const result = await response.json();\n        \n        if (result.success) {\n            profileData = result.profile;\n            \n            // Populate form\n            document.getElementById('full_name').value = profileData.full_name || '';\n            document.getElementById('email').value = profileData.email || '';\n            document.getElementById('phone').value = profileData.phone || '';\n            document.getElementById('timezone').value = profileData.timezone || 'Asia/Kolkata';\n            document.getElementById('learning_goals').value = profileData.learning_goals || '';\n            \n            // Update profile photo\n            if (profileData.profile_photo) {\n                document.getElementById('profile-photo').src = profileData.profile_photo;\n            }\n        }\n    } catch (error) {\n        console.error('Error loading profile:', error);\n    }\n}\n\n// Handle profile photo change\ndocument.getElementById('change-photo-btn').addEventListener('click', function() {\n    document.getElementById('photo-upload').click();\n});\n\ndocument.getElementById('photo-upload').addEventListener('change', async function(e) {\n    const file = e.target.files[0];\n    if (!file) return;\n    \n    const formData = new FormData();\n    formData.append('profile_photo', file);\n    \n    try {\n        const response = await fetch('/admin-panel/apis/learner/profile.php', {\n            method: 'POST',\n            body: formData\n        });\n        \n        const result = await response.json();\n        \n        if (result.success) {\n            document.getElementById('profile-photo').src = result.photo_url;\n            alert('Profile photo updated successfully!');\n        } else {\n            alert(result.message || 'Failed to upload photo');\n        }\n    } catch (error) {\n        console.error('Error uploading photo:', error);\n        alert('Failed to upload photo');\n    }\n});\n\n// Handle form submission\ndocument.getElementById('profile-form').addEventListener('submit', async function(e) {\n    e.preventDefault();\n    \n    const formData = {\n        full_name: document.getElementById('full_name').value,\n        phone: document.getElementById('phone').value,\n        timezone: document.getElementById('timezone').value,\n        learning_goals: document.getElementById('learning_goals').value\n    };\n    \n    try {\n        const response = await fetch('/admin-panel/apis/learner/profile.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n        \n        const result = await response.json();\n        \n        if (result.success) {\n            alert('Profile updated successfully!');\n            loadProfile(); // Reload data\n        } else {\n            alert(result.message || 'Failed to update profile');\n        }\n    } catch (error) {\n        console.error('Error updating profile:', error);\n        alert('Failed to update profile');\n    }\n});\n\n// Load profile on page load\nloadProfile();\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":8137},"admin-panel/js/expert-panel.js":{"content":"// Expert Panel JavaScript - Database Integration\n// For demo purposes, using user_id = 1 (will be replaced with session management later)\n\nconst API_BASE = '/admin-panel/apis/expert';\nconst DEMO_USER_ID = 1;  // Demo expert user ID\n\n// Utility function for API calls\nasync function apiCall(endpoint, method = 'GET', data = null) {\n    const options = {\n        method,\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n    \n    if (data && method !== 'GET') {\n        options.body = JSON.stringify(data);\n    }\n    \n    try {\n        const response = await fetch(endpoint, options);\n        const result = await response.json();\n        return result;\n    } catch (error) {\n        console.error('API Error:', error);\n        return { success: false, message: error.message };\n    }\n}\n\n// Show toast notification\nfunction showToast(message, type = 'success') {\n    const toast = document.createElement('div');\n    toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 ${\n        type === 'success' ? 'bg-green-500' : 'bg-red-500'\n    }`;\n    toast.textContent = message;\n    document.body.appendChild(toast);\n    \n    setTimeout(() => {\n        toast.remove();\n    }, 3000);\n}\n\n// Expert Profile Functions\nasync function saveExpertProfile(profileData) {\n    profileData.user_id = DEMO_USER_ID;\n    const result = await apiCall(`${API_BASE}/profile.php`, 'POST', profileData);\n    \n    if (result.success) {\n        showToast('Profile saved successfully!');\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\nasync function loadExpertProfile() {\n    const result = await apiCall(`${API_BASE}/profile.php?user_id=${DEMO_USER_ID}`);\n    return result;\n}\n\n// Pricing Functions\nasync function savePricing(pricingData) {\n    pricingData.expert_id = DEMO_USER_ID;\n    const result = await apiCall(`${API_BASE}/pricing.php`, 'POST', pricingData);\n    \n    if (result.success) {\n        showToast('Pricing saved successfully!');\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\n// Availability Functions\nasync function saveAvailability(slots) {\n    const data = {\n        expert_id: DEMO_USER_ID,\n        slots\n    };\n    const result = await apiCall(`${API_BASE}/availability.php`, 'POST', data);\n    \n    if (result.success) {\n        showToast('Availability saved successfully!');\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\n// Booking Functions\nasync function loadBookings(status = null) {\n    const url = status \n        ? `${API_BASE}/bookings.php?expert_id=${DEMO_USER_ID}&status=${status}`\n        : `${API_BASE}/bookings.php?expert_id=${DEMO_USER_ID}`;\n    return await apiCall(url);\n}\n\nasync function updateBookingStatus(bookingId, status, reason = null, newDatetime = null) {\n    const data = {\n        booking_id: bookingId,\n        status,\n        reason,\n        new_datetime: newDatetime\n    };\n    const result = await apiCall(`${API_BASE}/bookings.php`, 'PUT', data);\n    \n    if (result.success) {\n        showToast(`Booking ${status} successfully!`);\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\n// Dashboard Functions\nasync function loadDashboard() {\n    return await apiCall(`${API_BASE}/dashboard.php?expert_id=${DEMO_USER_ID}`);\n}\n\n// Earnings Functions\nasync function loadEarnings(period = 'all') {\n    return await apiCall(`${API_BASE}/earnings.php?expert_id=${DEMO_USER_ID}&period=${period}`);\n}\n\nasync function requestPayout(amount, currency = 'USD') {\n    const data = {\n        expert_id: DEMO_USER_ID,\n        amount,\n        currency\n    };\n    const result = await apiCall(`${API_BASE}/earnings.php`, 'POST', data);\n    \n    if (result.success) {\n        showToast('Payout request submitted successfully!');\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\n// Learner Management Functions\nasync function loadLearners() {\n    return await apiCall(`${API_BASE}/learners.php?expert_id=${DEMO_USER_ID}`);\n}\n\nasync function loadLearnerDetails(learnerId) {\n    return await apiCall(`${API_BASE}/learners.php?expert_id=${DEMO_USER_ID}&learner_id=${learnerId}`);\n}\n\nasync function updateLearnerNotes(learnerId, notes) {\n    const data = {\n        expert_id: DEMO_USER_ID,\n        learner_id: learnerId,\n        expert_notes: notes\n    };\n    return await apiCall(`${API_BASE}/learners.php`, 'PUT', data);\n}\n\nasync function addFollowUpReminder(learnerId, datetime, message) {\n    const data = {\n        expert_id: DEMO_USER_ID,\n        learner_id: learnerId,\n        reminder_datetime: datetime,\n        message\n    };\n    return await apiCall(`${API_BASE}/learners.php`, 'POST', data);\n}\n\n// Workflow Functions\nasync function loadWorkflows() {\n    return await apiCall(`${API_BASE}/workflows.php?expert_id=${DEMO_USER_ID}`);\n}\n\nasync function createWorkflow(workflowData) {\n    workflowData.expert_id = DEMO_USER_ID;\n    const result = await apiCall(`${API_BASE}/workflows.php`, 'POST', workflowData);\n    \n    if (result.success) {\n        showToast('Workflow created successfully!');\n    } else {\n        showToast(result.message, 'error');\n    }\n    return result;\n}\n\n// Session Functions\nasync function addSessionNotes(bookingId, notes) {\n    const data = { booking_id: bookingId, notes };\n    return await apiCall(`${API_BASE}/sessions.php?action=notes`, 'POST', data);\n}\n\nasync function addSessionResource(bookingId, resourceData) {\n    resourceData.booking_id = bookingId;\n    resourceData.uploaded_by = DEMO_USER_ID;\n    return await apiCall(`${API_BASE}/sessions.php?action=resource`, 'POST', resourceData);\n}\n\nasync function createAssignment(bookingId, learnerId, assignmentData) {\n    assignmentData.booking_id = bookingId;\n    assignmentData.expert_id = DEMO_USER_ID;\n    assignmentData.learner_id = learnerId;\n    return await apiCall(`${API_BASE}/sessions.php?action=assignment`, 'POST', assignmentData);\n}\n\nasync function completeSession(bookingId, recordingUrl = null) {\n    const data = { booking_id: bookingId, recording_url: recordingUrl };\n    return await apiCall(`${API_BASE}/sessions.php`, 'PUT', data);\n}\n\n// Make functions globally available\nwindow.ExpertPanel = {\n    saveExpertProfile,\n    loadExpertProfile,\n    savePricing,\n    saveAvailability,\n    loadBookings,\n    updateBookingStatus,\n    loadDashboard,\n    loadEarnings,\n    requestPayout,\n    loadLearners,\n    loadLearnerDetails,\n    updateLearnerNotes,\n    addFollowUpReminder,\n    loadWorkflows,\n    createWorkflow,\n    addSessionNotes,\n    addSessionResource,\n    createAssignment,\n    completeSession\n};\n","size_bytes":6652},"admin-panel/apis/admin/dashboard.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/auth-check.php';\nheader('Content-Type: application/json');\n\nvalidateCSRF();\n\nrequire_once '../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get admin dashboard stats\nif ($method === 'GET') {\n    try {\n        // Total users\n        $stmt = $pdo->query(\"\n            SELECT \n                COUNT(*) as total_users,\n                SUM(CASE WHEN role = 'learner' THEN 1 ELSE 0 END) as total_learners,\n                SUM(CASE WHEN role = 'expert' THEN 1 ELSE 0 END) as total_experts,\n                SUM(CASE WHEN status = 'active' THEN 1 ELSE 0 END) as active_users\n            FROM users\n        \");\n        $users_stats = $stmt->fetch();\n        \n        // Experts by verification status\n        $stmt = $pdo->query(\"\n            SELECT \n                verification_status,\n                COUNT(*) as count\n            FROM expert_profiles\n            GROUP BY verification_status\n        \");\n        $verification_stats = $stmt->fetchAll(PDO::FETCH_KEY_PAIR);\n        \n        // Bookings stats\n        $stmt = $pdo->query(\"\n            SELECT \n                COUNT(*) as total_bookings,\n                SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending,\n                SUM(CASE WHEN status = 'confirmed' THEN 1 ELSE 0 END) as confirmed,\n                SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed,\n                SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END) as cancelled\n            FROM bookings\n        \");\n        $bookings_stats = $stmt->fetch();\n        \n        // Revenue stats\n        $stmt = $pdo->query(\"\n            SELECT \n                COUNT(*) as total_transactions,\n                SUM(amount) as total_revenue,\n                SUM(commission_amount) as total_commission,\n                SUM(expert_payout_amount) as total_expert_earnings\n            FROM payments\n            WHERE status = 'success'\n        \");\n        $revenue_stats = $stmt->fetch();\n        \n        // Revenue this month\n        $stmt = $pdo->query(\"\n            SELECT \n                SUM(amount) as monthly_revenue,\n                SUM(commission_amount) as monthly_commission\n            FROM payments\n            WHERE status = 'success'\n            AND MONTH(created_at) = MONTH(CURDATE())\n            AND YEAR(created_at) = YEAR(CURDATE())\n        \");\n        $monthly_stats = $stmt->fetch();\n        \n        // Recent bookings\n        $stmt = $pdo->query(\"\n            SELECT b.*, \n                   lp.full_name as learner_name,\n                   ep.full_name as expert_name\n            FROM bookings b\n            LEFT JOIN learner_profiles lp ON lp.user_id = b.learner_id\n            LEFT JOIN expert_profiles ep ON ep.user_id = b.expert_id\n            ORDER BY b.created_at DESC\n            LIMIT 10\n        \");\n        $recent_bookings = $stmt->fetchAll();\n        \n        // Pending payouts\n        $stmt = $pdo->query(\"\n            SELECT COUNT(*) as count, SUM(amount) as total\n            FROM expert_payouts\n            WHERE status = 'pending'\n        \");\n        $pending_payouts = $stmt->fetch();\n        \n        echo json_encode([\n            'success' => true,\n            'users' => $users_stats,\n            'verification' => $verification_stats,\n            'bookings' => $bookings_stats,\n            'revenue' => $revenue_stats,\n            'monthly' => $monthly_stats,\n            'recent_bookings' => $recent_bookings,\n            'pending_payouts' => $pending_payouts\n        ]);\n    } catch (PDOException $e) {\n        error_log('Admin Dashboard Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching dashboard data']);\n    }\n    exit;\n}\n?>\n","size_bytes":3803},"admin-panel/apis/admin/experts.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/auth-check.php';\nheader('Content-Type: application/json');\n\nvalidateCSRF();\n\nrequire_once '../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get all experts\nif ($method === 'GET' && !isset($_GET['expert_id'])) {\n    $status = $_GET['status'] ?? null;\n    $verification_status = $_GET['verification_status'] ?? null;\n    \n    try {\n        $sql = \"\n            SELECT u.id as user_id, u.email, u.phone, u.status as account_status, u.created_at,\n                   ep.full_name, ep.bio_short, ep.bio_full, ep.expertise_verticals,\n                   ep.verification_status, ep.govt_id_url, ep.credentials, ep.profile_photo,\n                   COUNT(DISTINCT b.id) as total_bookings,\n                   SUM(CASE WHEN b.status = 'completed' THEN 1 ELSE 0 END) as completed_bookings,\n                   COALESCE(SUM(p.expert_payout_amount), 0) as total_earnings\n            FROM users u\n            LEFT JOIN expert_profiles ep ON ep.user_id = u.id\n            LEFT JOIN bookings b ON b.expert_id = u.id\n            LEFT JOIN payments p ON p.expert_id = u.id AND p.status = 'success'\n            WHERE u.role = 'expert'\n        \";\n        \n        $params = [];\n        \n        if ($status) {\n            $sql .= \" AND u.status = ?\";\n            $params[] = $status;\n        }\n        \n        if ($verification_status) {\n            $sql .= \" AND ep.verification_status = ?\";\n            $params[] = $verification_status;\n        }\n        \n        $sql .= \" GROUP BY u.id ORDER BY u.created_at DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $experts = $stmt->fetchAll();\n        \n        foreach ($experts as &$expert) {\n            $expert['expertise_verticals'] = $expert['expertise_verticals'] ? json_decode($expert['expertise_verticals'], true) : [];\n        }\n        \n        echo json_encode(['success' => true, 'experts' => $experts]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Experts Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching experts: ' . $e->getMessage()]);\n    }\n    exit;\n}\n\n// Get single expert details\nif ($method === 'GET' && isset($_GET['expert_id'])) {\n    $expert_id = $_GET['expert_id'];\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT ep.*, u.email, u.phone, u.status as account_status, u.created_at as account_created\n            FROM expert_profiles ep\n            JOIN users u ON u.id = ep.user_id\n            WHERE ep.user_id = ?\n        \");\n        $stmt->execute([$expert_id]);\n        $expert = $stmt->fetch();\n        \n        if (!$expert) {\n            echo json_encode(['success' => false, 'message' => 'Expert not found']);\n            exit;\n        }\n        \n        $expert['expertise_verticals'] = json_decode($expert['expertise_verticals'], true);\n        $expert['certification_urls'] = json_decode($expert['certification_urls'], true);\n        \n        // Get bookings stats\n        $stmt = $pdo->prepare(\"\n            SELECT COUNT(*) as total, \n                   SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed\n            FROM bookings WHERE expert_id = ?\n        \");\n        $stmt->execute([$expert_id]);\n        $expert['bookings_stats'] = $stmt->fetch();\n        \n        // Get earnings\n        $stmt = $pdo->prepare(\"\n            SELECT SUM(expert_payout_amount) as total_earnings\n            FROM payments WHERE expert_id = ? AND status = 'success'\n        \");\n        $stmt->execute([$expert_id]);\n        $expert['earnings'] = $stmt->fetch();\n        \n        echo json_encode(['success' => true, 'expert' => $expert]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Expert Details Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching expert details']);\n    }\n    exit;\n}\n\n// Update expert verification status\nif ($method === 'PUT' && isset($_GET['action']) && $_GET['action'] === 'verify') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $verification_status = $data['verification_status'] ?? null;\n    $admin_notes = $data['admin_notes'] ?? '';\n    \n    if (!$expert_id || !$verification_status) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID and verification status are required']);\n        exit;\n    }\n    \n    try {\n        $verified_at = $verification_status === 'verified' ? date('Y-m-d H:i:s') : null;\n        \n        $stmt = $pdo->prepare(\"\n            UPDATE expert_profiles\n            SET verification_status = ?, verified_at = ?, admin_notes = ?\n            WHERE user_id = ?\n        \");\n        $stmt->execute([$verification_status, $verified_at, $admin_notes, $expert_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Verification status updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Admin Update Verification Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating verification status']);\n    }\n    exit;\n}\n\n// Update expert account status\nif ($method === 'PUT' && isset($_GET['action']) && $_GET['action'] === 'status') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $status = $data['status'] ?? null;\n    \n    if (!$expert_id || !$status) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID and status are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"UPDATE users SET status = ? WHERE id = ?\");\n        $stmt->execute([$status, $expert_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Account status updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Admin Update Status Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating account status']);\n    }\n    exit;\n}\n\n// Delete expert\nif ($method === 'DELETE') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    $expert_id = $data['expert_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        // Start transaction\n        $pdo->beginTransaction();\n        \n        // Delete expert profile\n        $stmt = $pdo->prepare(\"DELETE FROM expert_profiles WHERE user_id = ?\");\n        $stmt->execute([$expert_id]);\n        \n        // Delete user account\n        $stmt = $pdo->prepare(\"DELETE FROM users WHERE id = ?\");\n        $stmt->execute([$expert_id]);\n        \n        $pdo->commit();\n        \n        echo json_encode(['success' => true, 'message' => 'Expert deleted successfully']);\n    } catch (PDOException $e) {\n        $pdo->rollBack();\n        error_log('Admin Delete Expert Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while deleting expert']);\n    }\n    exit;\n}\n?>\n","size_bytes":7231},"admin-panel/apis/admin/payouts.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/auth-check.php';\nheader('Content-Type: application/json');\n\nvalidateCSRF();\n\nrequire_once '../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get payout requests\nif ($method === 'GET') {\n    $status = $_GET['status'] ?? null;\n    \n    try {\n        $sql = \"\n            SELECT po.*, ep.full_name as expert_name, u.email as expert_email\n            FROM expert_payouts po\n            JOIN expert_profiles ep ON ep.user_id = po.expert_id\n            JOIN users u ON u.id = po.expert_id\n            WHERE 1=1\n        \";\n        \n        $params = [];\n        \n        if ($status) {\n            $sql .= \" AND po.status = ?\";\n            $params[] = $status;\n        }\n        \n        $sql .= \" ORDER BY po.created_at DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $payouts = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'payouts' => $payouts]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Payouts Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching payouts']);\n    }\n    exit;\n}\n\n// Update payout status\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $payout_id = $data['payout_id'] ?? null;\n    $status = $data['status'] ?? null;\n    $transaction_id = $data['transaction_id'] ?? null;\n    $admin_notes = $data['admin_notes'] ?? '';\n    \n    if (!$payout_id || !$status) {\n        echo json_encode(['success' => false, 'message' => 'Payout ID and status are required']);\n        exit;\n    }\n    \n    try {\n        $processed_at = $status === 'completed' ? date('Y-m-d H:i:s') : null;\n        \n        $stmt = $pdo->prepare(\"\n            UPDATE expert_payouts\n            SET status = ?, transaction_id = ?, processed_at = ?, admin_notes = ?\n            WHERE id = ?\n        \");\n        $stmt->execute([$status, $transaction_id, $processed_at, $admin_notes, $payout_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Payout status updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Admin Update Payout Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating payout']);\n    }\n    exit;\n}\n?>\n","size_bytes":2428},"admin-panel/apis/admin/users.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/auth-check.php';\n\nvalidateCSRF();\n\nrequire_once '../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get all users\nif ($method === 'GET') {\n    $role = $_GET['role'] ?? null;\n    $status = $_GET['status'] ?? null;\n    \n    try {\n        $sql = \"SELECT * FROM users WHERE 1=1\";\n        $params = [];\n        \n        if ($role) {\n            $sql .= \" AND role = ?\";\n            $params[] = $role;\n        }\n        \n        if ($status) {\n            $sql .= \" AND status = ?\";\n            $params[] = $status;\n        }\n        \n        $sql .= \" ORDER BY created_at DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $users = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'users' => $users]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Users Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching users']);\n    }\n    exit;\n}\n\n// Update user status\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $user_id = $data['user_id'] ?? null;\n    $status = $data['status'] ?? null;\n    \n    if (!$user_id || !$status) {\n        echo json_encode(['success' => false, 'message' => 'User ID and status are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"UPDATE users SET status = ? WHERE id = ?\");\n        $stmt->execute([$status, $user_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'User status updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Admin Update User Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating user']);\n    }\n    exit;\n}\n?>\n","size_bytes":1949},"admin-panel/apis/connection/pdo.php":{"content":"<?php\n\n// Set default timezone to IST\ndate_default_timezone_set('Asia/Kolkata');\n\n$host = 'srv1368.hstgr.io:3306';\n$dbname = 'u621169360_replit';\n$username = 'u621169360_replit';\n$password = 'JAIhanuman89@@@';\n\n$dsn = \"mysql:host=$host;dbname=$dbname;charset=utf8mb4\";\n\n$options = [\n    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n    PDO::ATTR_EMULATE_PREPARES => false,\n];\n\ntry {\n    $pdo = new PDO($dsn, $username, $password, $options);\n    // Set MySQL timezone to IST\n    $pdo->exec(\"SET time_zone = '+05:30'\");\n} catch (PDOException $e) {\n    die(\"Database connection failed: \" . $e->getMessage());\n}\n\n?>\n","size_bytes":666},"admin-panel/apis/expert/availability.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get availability\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"SELECT * FROM expert_availability WHERE expert_id = ? AND is_active = 1 ORDER BY day_of_week, start_time\");\n        $stmt->execute([$expert_id]);\n        $availability = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'availability' => $availability]);\n    } catch (PDOException $e) {\n        error_log('Get Availability Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching availability']);\n    }\n    exit;\n}\n\n// Create availability slots\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $slots = $data['slots'] ?? [];\n    \n    if (!$expert_id || empty($slots)) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID and slots are required']);\n        exit;\n    }\n    \n    try {\n        $pdo->beginTransaction();\n        \n        $stmt = $pdo->prepare(\"UPDATE expert_availability SET is_active = 0 WHERE expert_id = ?\");\n        $stmt->execute([$expert_id]);\n        \n        $stmt = $pdo->prepare(\"\n            INSERT INTO expert_availability (expert_id, day_of_week, start_time, end_time)\n            VALUES (?, ?, ?, ?)\n        \");\n        \n        foreach ($slots as $slot) {\n            $stmt->execute([\n                $expert_id,\n                $slot['day_of_week'],\n                $slot['start_time'],\n                $slot['end_time']\n            ]);\n        }\n        \n        $pdo->commit();\n        echo json_encode(['success' => true, 'message' => 'Availability updated successfully']);\n    } catch (PDOException $e) {\n        $pdo->rollBack();\n        error_log('Update Availability Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating availability']);\n    }\n    exit;\n}\n?>\n","size_bytes":2359},"admin-panel/apis/expert/bookings.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get bookings\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    $status = $_GET['status'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $sql = \"\n            SELECT b.*, \n                   lp.full_name as learner_name, \n                   lp.profile_photo as learner_photo,\n                   w.title as workflow_title,\n                   p.amount, p.status as payment_status\n            FROM bookings b\n            LEFT JOIN learner_profiles lp ON lp.user_id = b.learner_id\n            LEFT JOIN workflows w ON w.id = b.workflow_id\n            LEFT JOIN payments p ON p.booking_id = b.id\n            WHERE b.expert_id = ?\n        \";\n        \n        $params = [$expert_id];\n        \n        if ($status) {\n            $sql .= \" AND b.status = ?\";\n            $params[] = $status;\n        }\n        \n        $sql .= \" ORDER BY b.session_datetime DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $bookings = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'bookings' => $bookings]);\n    } catch (PDOException $e) {\n        error_log('Bookings API Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching bookings']);\n    }\n    exit;\n}\n\n// Update booking status (approve/reject/reschedule/cancel)\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $booking_id = $data['booking_id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $status = $data['status'] ?? null;\n    $reason = $data['reason'] ?? null;\n    $new_datetime = $data['new_datetime'] ?? null;\n    \n    if (!$booking_id || !$expert_id || !$status) {\n        echo json_encode(['success' => false, 'message' => 'Booking ID, Expert ID, and status are required']);\n        exit;\n    }\n    \n    try {\n        // Verify booking belongs to this expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM bookings WHERE id = ?\");\n        $stmt->execute([$booking_id]);\n        $booking = $stmt->fetch();\n        \n        if (!$booking || $booking['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        if ($status === 'rescheduled' && $new_datetime) {\n            $stmt = $pdo->prepare(\"\n                UPDATE bookings \n                SET status = ?, session_datetime = ?, reschedule_reason = ?, updated_at = NOW()\n                WHERE id = ?\n            \");\n            $stmt->execute([$status, $new_datetime, $reason, $booking_id]);\n        } elseif ($status === 'cancelled') {\n            $stmt = $pdo->prepare(\"\n                UPDATE bookings \n                SET status = ?, cancel_reason = ?, updated_at = NOW()\n                WHERE id = ?\n            \");\n            $stmt->execute([$status, $reason, $booking_id]);\n        } else {\n            $stmt = $pdo->prepare(\"\n                UPDATE bookings \n                SET status = ?, updated_at = NOW()\n                WHERE id = ?\n            \");\n            $stmt->execute([$status, $booking_id]);\n        }\n        \n        echo json_encode(['success' => true, 'message' => 'Booking updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Update Booking Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating booking']);\n    }\n    exit;\n}\n?>\n","size_bytes":3816},"admin-panel/apis/expert/dashboard.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get expert dashboard stats\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        // Total bookings\n        $stmt = $pdo->prepare(\"\n            SELECT COUNT(*) as total,\n                   SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending,\n                   SUM(CASE WHEN status = 'confirmed' THEN 1 ELSE 0 END) as confirmed,\n                   SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed\n            FROM bookings WHERE expert_id = ?\n        \");\n        $stmt->execute([$expert_id]);\n        $bookings_stats = $stmt->fetch();\n        \n        // Total learners\n        $stmt = $pdo->prepare(\"\n            SELECT COUNT(DISTINCT learner_id) as total_learners\n            FROM bookings WHERE expert_id = ?\n        \");\n        $stmt->execute([$expert_id]);\n        $learners_stats = $stmt->fetch();\n        \n        // Earnings this month\n        $stmt = $pdo->prepare(\"\n            SELECT SUM(expert_payout_amount) as earnings\n            FROM payments\n            WHERE expert_id = ? AND status = 'success'\n            AND MONTH(created_at) = MONTH(CURDATE())\n            AND YEAR(created_at) = YEAR(CURDATE())\n        \");\n        $stmt->execute([$expert_id]);\n        $earnings_stats = $stmt->fetch();\n        \n        // Upcoming sessions (next 7 days)\n        $stmt = $pdo->prepare(\"\n            SELECT b.*, lp.full_name as learner_name, lp.profile_photo as learner_photo\n            FROM bookings b\n            LEFT JOIN learner_profiles lp ON lp.user_id = b.learner_id\n            WHERE b.expert_id = ? \n            AND b.status IN ('pending', 'confirmed')\n            AND b.session_datetime BETWEEN NOW() AND DATE_ADD(NOW(), INTERVAL 7 DAY)\n            ORDER BY b.session_datetime ASC\n            LIMIT 5\n        \");\n        $stmt->execute([$expert_id]);\n        $upcoming_sessions = $stmt->fetchAll();\n        \n        // Recent reviews\n        $stmt = $pdo->prepare(\"\n            SELECT r.*, lp.full_name as learner_name, lp.profile_photo as learner_photo\n            FROM reviews r\n            LEFT JOIN learner_profiles lp ON lp.user_id = r.learner_id\n            WHERE r.expert_id = ? AND r.status = 'approved'\n            ORDER BY r.created_at DESC\n            LIMIT 5\n        \");\n        $stmt->execute([$expert_id]);\n        $recent_reviews = $stmt->fetchAll();\n        \n        // Average rating\n        $stmt = $pdo->prepare(\"\n            SELECT rating_average, total_reviews\n            FROM expert_profiles\n            WHERE user_id = ?\n        \");\n        $stmt->execute([$expert_id]);\n        $rating_stats = $stmt->fetch();\n        \n        echo json_encode([\n            'success' => true,\n            'bookings' => $bookings_stats,\n            'learners' => $learners_stats,\n            'earnings' => $earnings_stats,\n            'rating' => $rating_stats,\n            'upcoming_sessions' => $upcoming_sessions,\n            'recent_reviews' => $recent_reviews\n        ]);\n    } catch (PDOException $e) {\n        error_log('Dashboard API Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching dashboard data']);\n    }\n}\n?>\n","size_bytes":3545},"admin-panel/apis/expert/earnings.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get earnings dashboard\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    $period = $_GET['period'] ?? 'all';\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $dateFilter = \"\";\n        $params = [$expert_id];\n        \n        switch ($period) {\n            case 'today':\n                $dateFilter = \" AND DATE(p.created_at) = CURDATE()\";\n                break;\n            case 'this_month':\n                $dateFilter = \" AND MONTH(p.created_at) = MONTH(CURDATE()) AND YEAR(p.created_at) = YEAR(CURDATE())\";\n                break;\n            case 'this_year':\n                $dateFilter = \" AND YEAR(p.created_at) = YEAR(CURDATE())\";\n                break;\n        }\n        \n        $stmt = $pdo->prepare(\"\n            SELECT \n                COUNT(*) as total_bookings,\n                SUM(amount) as total_revenue,\n                SUM(commission_amount) as total_commission,\n                SUM(expert_payout_amount) as total_earnings\n            FROM payments\n            WHERE expert_id = ? AND status = 'success'\" . $dateFilter\n        );\n        $stmt->execute($params);\n        $totals = $stmt->fetch();\n        \n        $stmt = $pdo->prepare(\"\n            SELECT SUM(expert_payout_amount) as pending_payout\n            FROM payments\n            WHERE expert_id = ? AND status = 'success'\n            AND id NOT IN (SELECT payment_id FROM expert_payouts WHERE expert_id = ?)\n        \");\n        $stmt->execute([$expert_id, $expert_id]);\n        $pending = $stmt->fetch();\n        \n        $stmt = $pdo->prepare(\"\n            SELECT * FROM expert_payouts\n            WHERE expert_id = ?\n            ORDER BY created_at DESC\n            LIMIT 10\n        \");\n        $stmt->execute([$expert_id]);\n        $payouts = $stmt->fetchAll();\n        \n        $stmt = $pdo->prepare(\"\n            SELECT \n                DATE_FORMAT(created_at, '%Y-%m') as month,\n                SUM(amount) as revenue,\n                SUM(expert_payout_amount) as earnings,\n                COUNT(*) as bookings\n            FROM payments\n            WHERE expert_id = ? AND status = 'success'\n            AND created_at >= DATE_SUB(CURDATE(), INTERVAL 6 MONTH)\n            GROUP BY month\n            ORDER BY month DESC\n        \");\n        $stmt->execute([$expert_id]);\n        $monthly_revenue = $stmt->fetchAll();\n        \n        echo json_encode([\n            'success' => true,\n            'totals' => $totals,\n            'pending_payout' => $pending['pending_payout'] ?? 0,\n            'payouts' => $payouts,\n            'monthly_revenue' => $monthly_revenue\n        ]);\n    } catch (PDOException $e) {\n        error_log('Get Earnings Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching earnings']);\n    }\n    exit;\n}\n\n// Request payout\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $amount = $data['amount'] ?? 0;\n    $currency = $data['currency'] ?? 'USD';\n    \n    if (!$expert_id || $amount <= 0) {\n        echo json_encode(['success' => false, 'message' => 'Valid expert ID and amount are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            INSERT INTO expert_payouts (expert_id, amount, currency, status)\n            VALUES (?, ?, ?, 'pending')\n        \");\n        $stmt->execute([$expert_id, $amount, $currency]);\n        \n        echo json_encode(['success' => true, 'message' => 'Payout request submitted successfully', 'id' => $pdo->lastInsertId()]);\n    } catch (PDOException $e) {\n        error_log('Request Payout Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while submitting payout request']);\n    }\n    exit;\n}\n?>\n","size_bytes":4150},"admin-panel/apis/expert/learners.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n// TODO: Add session validation and derive expert_id from authenticated user\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get learners list with progress OR single learner details\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    $learner_id = $_GET['learner_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        // Get single learner details if learner_id provided\n        if ($learner_id) {\n            // Learner info\n            $stmt = $pdo->prepare(\"\n                SELECT lp.*, prog.*\n                FROM learner_profiles lp\n                LEFT JOIN learner_progress prog ON prog.learner_id = lp.user_id AND prog.expert_id = ?\n                WHERE lp.user_id = ?\n            \");\n            $stmt->execute([$expert_id, $learner_id]);\n            $learner = $stmt->fetch();\n            \n            if (!$learner) {\n                echo json_encode(['success' => false, 'message' => 'Learner not found']);\n                exit;\n            }\n            \n            // Session history\n            $stmt = $pdo->prepare(\"\n                SELECT * FROM bookings\n                WHERE learner_id = ? AND expert_id = ?\n                ORDER BY session_datetime DESC\n            \");\n            $stmt->execute([$learner_id, $expert_id]);\n            $learner['sessions'] = $stmt->fetchAll();\n            \n            // Assignments\n            $stmt = $pdo->prepare(\"\n                SELECT a.*, s.submission_text, s.submitted_at, s.feedback\n                FROM assignments a\n                LEFT JOIN assignment_submissions s ON s.assignment_id = a.id\n                WHERE a.learner_id = ? AND a.expert_id = ?\n                ORDER BY a.created_at DESC\n            \");\n            $stmt->execute([$learner_id, $expert_id]);\n            $learner['assignments'] = $stmt->fetchAll();\n            \n            echo json_encode(['success' => true, 'learner' => $learner]);\n        } else {\n            // Get all learners list with progress\n            $stmt = $pdo->prepare(\"\n                SELECT \n                    prog.learner_id,\n                    prog.progress_percentage,\n                    prog.total_sessions,\n                    prog.completed_sessions,\n                    prog.total_assignments,\n                    prog.completed_assignments,\n                    prog.expert_notes,\n                    prog.last_interaction_date,\n                    w.title as workflow_title,\n                    lp.full_name,\n                    lp.profile_photo,\n                    COUNT(DISTINCT b.id) as total_bookings,\n                    SUM(CASE WHEN b.status = 'completed' THEN 1 ELSE 0 END) as completed_bookings\n                FROM learner_progress prog\n                JOIN learner_profiles lp ON lp.user_id = prog.learner_id\n                LEFT JOIN workflows w ON w.id = prog.workflow_id\n                LEFT JOIN bookings b ON b.learner_id = prog.learner_id AND b.expert_id = prog.expert_id\n                WHERE prog.expert_id = ?\n                GROUP BY prog.learner_id, prog.progress_percentage, prog.total_sessions, \n                         prog.completed_sessions, prog.total_assignments, prog.completed_assignments,\n                         prog.expert_notes, prog.last_interaction_date, w.title, \n                         lp.full_name, lp.profile_photo\n                ORDER BY prog.last_interaction_date DESC\n            \");\n            $stmt->execute([$expert_id]);\n            $learners = $stmt->fetchAll();\n            \n            echo json_encode(['success' => true, 'learners' => $learners]);\n        }\n    } catch (PDOException $e) {\n        error_log('Learners API Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching learner data']);\n    }\n    exit;\n}\n\n// Update learner progress/notes\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $learner_id = $data['learner_id'] ?? null;\n    $expert_notes = $data['expert_notes'] ?? '';\n    \n    if (!$expert_id || !$learner_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID and Learner ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify expert owns this learner relationship\n        $stmt = $pdo->prepare(\"\n            SELECT id FROM learner_progress\n            WHERE expert_id = ? AND learner_id = ?\n        \");\n        $stmt->execute([$expert_id, $learner_id]);\n        if (!$stmt->fetch()) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"\n            UPDATE learner_progress\n            SET expert_notes = ?, updated_at = NOW()\n            WHERE expert_id = ? AND learner_id = ?\n        \");\n        $stmt->execute([$expert_notes, $expert_id, $learner_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Notes updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Update Learner Notes Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating notes']);\n    }\n    exit;\n}\n\n// Add follow-up reminder\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $learner_id = $data['learner_id'] ?? null;\n    $reminder_datetime = $data['reminder_datetime'] ?? null;\n    $message = $data['message'] ?? '';\n    \n    if (!$expert_id || !$learner_id || !$reminder_datetime) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID, Learner ID, and reminder datetime are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            INSERT INTO follow_up_reminders (expert_id, learner_id, reminder_datetime, message)\n            VALUES (?, ?, ?, ?)\n        \");\n        $stmt->execute([$expert_id, $learner_id, $reminder_datetime, $message]);\n        \n        echo json_encode(['success' => true, 'message' => 'Reminder added successfully', 'id' => $pdo->lastInsertId()]);\n    } catch (PDOException $e) {\n        error_log('Add Reminder Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while adding reminder']);\n    }\n    exit;\n}\n?>\n","size_bytes":6651},"admin-panel/apis/expert/pricing.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get pricing\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"SELECT * FROM expert_pricing WHERE expert_id = ? ORDER BY created_at DESC\");\n        $stmt->execute([$expert_id]);\n        $pricing = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'pricing' => $pricing]);\n    } catch (PDOException $e) {\n        error_log('Get Pricing Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching pricing']);\n    }\n    exit;\n}\n\n// Create pricing\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $pricing_type = $data['pricing_type'] ?? 'per_session';\n    $amount = $data['amount'] ?? 0;\n    $currency = $data['currency'] ?? 'USD';\n    $duration_minutes = $data['duration_minutes'] ?? null;\n    $sessions_count = $data['sessions_count'] ?? null;\n    $description = $data['description'] ?? '';\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            INSERT INTO expert_pricing (expert_id, pricing_type, amount, currency, \n                duration_minutes, sessions_count, description)\n            VALUES (?, ?, ?, ?, ?, ?, ?)\n        \");\n        $stmt->execute([\n            $expert_id, $pricing_type, $amount, $currency,\n            $duration_minutes, $sessions_count, $description\n        ]);\n        \n        echo json_encode(['success' => true, 'message' => 'Pricing added successfully', 'id' => $pdo->lastInsertId()]);\n    } catch (PDOException $e) {\n        error_log('Create Pricing Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while adding pricing']);\n    }\n    exit;\n}\n\n// Update pricing\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $id = $data['id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $is_active = $data['is_active'] ?? 1;\n    \n    if (!$id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Pricing ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify pricing belongs to this expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM expert_pricing WHERE id = ?\");\n        $stmt->execute([$id]);\n        $pricing = $stmt->fetch();\n        \n        if (!$pricing || $pricing['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"UPDATE expert_pricing SET is_active = ? WHERE id = ?\");\n        $stmt->execute([$is_active, $id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Pricing updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Update Pricing Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating pricing']);\n    }\n    exit;\n}\n\n// Delete pricing\nif ($method === 'DELETE') {\n    $id = $_GET['id'] ?? null;\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Pricing ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify pricing belongs to this expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM expert_pricing WHERE id = ?\");\n        $stmt->execute([$id]);\n        $pricing = $stmt->fetch();\n        \n        if (!$pricing || $pricing['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"DELETE FROM expert_pricing WHERE id = ?\");\n        $stmt->execute([$id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Pricing deleted successfully']);\n    } catch (PDOException $e) {\n        error_log('Delete Pricing Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while deleting pricing']);\n    }\n    exit;\n}\n?>\n","size_bytes":4652},"admin-panel/apis/expert/profile.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - user_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get expert profile\nif ($method === 'GET') {\n    $user_id = $_GET['user_id'] ?? null;\n    \n    if (!$user_id) {\n        echo json_encode(['success' => false, 'message' => 'User ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT ep.*, u.email, u.phone, u.status \n            FROM expert_profiles ep\n            JOIN users u ON u.id = ep.user_id\n            WHERE ep.user_id = ?\n        \");\n        $stmt->execute([$user_id]);\n        $profile = $stmt->fetch();\n        \n        if ($profile) {\n            $profile['expertise_verticals'] = json_decode($profile['expertise_verticals'], true);\n            $profile['certification_urls'] = json_decode($profile['certification_urls'], true);\n            \n            $stmt = $pdo->prepare(\"SELECT * FROM expert_pricing WHERE expert_id = ? AND is_active = 1\");\n            $stmt->execute([$user_id]);\n            $profile['pricing'] = $stmt->fetchAll();\n            \n            $stmt = $pdo->prepare(\"SELECT * FROM expert_availability WHERE expert_id = ? AND is_active = 1\");\n            $stmt->execute([$user_id]);\n            $profile['availability'] = $stmt->fetchAll();\n            \n            echo json_encode(['success' => true, 'profile' => $profile]);\n        } else {\n            echo json_encode(['success' => false, 'message' => 'Profile not found']);\n        }\n    } catch (PDOException $e) {\n        error_log('Get Profile Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching profile']);\n    }\n    exit;\n}\n\n// Create or Update expert profile\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $user_id = $data['user_id'] ?? null;\n    $full_name = $data['full_name'] ?? '';\n    $tagline = $data['tagline'] ?? '';\n    $bio_short = $data['bio_short'] ?? '';\n    $bio_full = $data['bio_full'] ?? '';\n    $expertise_verticals = json_encode($data['expertise_verticals'] ?? []);\n    $credentials = $data['credentials'] ?? '';\n    $experience_years = $data['experience_years'] ?? 0;\n    $timezone = $data['timezone'] ?? 'UTC';\n    $profile_photo = $data['profile_photo'] ?? null;\n    \n    if (!$user_id) {\n        echo json_encode(['success' => false, 'message' => 'User ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"SELECT id FROM expert_profiles WHERE user_id = ?\");\n        $stmt->execute([$user_id]);\n        $exists = $stmt->fetch();\n        \n        if ($exists) {\n            $stmt = $pdo->prepare(\"\n                UPDATE expert_profiles SET\n                    full_name = ?, tagline = ?, bio_short = ?, bio_full = ?,\n                    expertise_verticals = ?, credentials = ?, experience_years = ?,\n                    timezone = ?, profile_photo = ?, updated_at = NOW()\n                WHERE user_id = ?\n            \");\n            $stmt->execute([\n                $full_name, $tagline, $bio_short, $bio_full,\n                $expertise_verticals, $credentials, $experience_years,\n                $timezone, $profile_photo, $user_id\n            ]);\n            echo json_encode(['success' => true, 'message' => 'Profile updated successfully']);\n        } else {\n            $stmt = $pdo->prepare(\"\n                INSERT INTO expert_profiles (user_id, full_name, tagline, bio_short, bio_full,\n                    expertise_verticals, credentials, experience_years, timezone, profile_photo)\n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $user_id, $full_name, $tagline, $bio_short, $bio_full,\n                $expertise_verticals, $credentials, $experience_years, $timezone, $profile_photo\n            ]);\n            echo json_encode(['success' => true, 'message' => 'Profile created successfully', 'id' => $pdo->lastInsertId()]);\n        }\n    } catch (PDOException $e) {\n        error_log('Save Profile Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while saving profile']);\n    }\n    exit;\n}\n?>\n","size_bytes":4324},"admin-panel/apis/expert/sessions.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Add session notes\nif ($method === 'POST' && isset($_GET['action']) && $_GET['action'] === 'notes') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $booking_id = $data['booking_id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $notes = $data['notes'] ?? '';\n    \n    if (!$booking_id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Booking ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify booking belongs to expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM bookings WHERE id = ?\");\n        $stmt->execute([$booking_id]);\n        $booking = $stmt->fetch();\n        \n        if (!$booking || $booking['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"UPDATE bookings SET session_notes = ?, updated_at = NOW() WHERE id = ?\");\n        $stmt->execute([$notes, $booking_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Notes saved successfully']);\n    } catch (PDOException $e) {\n        error_log('Add Session Notes Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while saving notes']);\n    }\n    exit;\n}\n\n// Add session resource\nif ($method === 'POST' && isset($_GET['action']) && $_GET['action'] === 'resource') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $booking_id = $data['booking_id'] ?? null;\n    $uploaded_by = $data['uploaded_by'] ?? null;\n    $resource_type = $data['resource_type'] ?? 'document';\n    $file_url = $data['file_url'] ?? '';\n    $file_name = $data['file_name'] ?? '';\n    $description = $data['description'] ?? '';\n    \n    if (!$booking_id || !$uploaded_by) {\n        echo json_encode(['success' => false, 'message' => 'Booking ID and uploader ID are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            INSERT INTO session_resources (booking_id, uploaded_by, resource_type, file_url, file_name, description)\n            VALUES (?, ?, ?, ?, ?, ?)\n        \");\n        $stmt->execute([$booking_id, $uploaded_by, $resource_type, $file_url, $file_name, $description]);\n        \n        echo json_encode(['success' => true, 'message' => 'Resource added successfully', 'id' => $pdo->lastInsertId()]);\n    } catch (PDOException $e) {\n        error_log('Add Session Resource Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while adding resource']);\n    }\n    exit;\n}\n\n// Create assignment\nif ($method === 'POST' && isset($_GET['action']) && $_GET['action'] === 'assignment') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $booking_id = $data['booking_id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $learner_id = $data['learner_id'] ?? null;\n    $title = $data['title'] ?? '';\n    $description = $data['description'] ?? '';\n    $due_date = $data['due_date'] ?? null;\n    $resources = json_encode($data['resources'] ?? []);\n    \n    if (!$expert_id || !$learner_id || !$title) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID, Learner ID, and title are required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            INSERT INTO assignments (booking_id, expert_id, learner_id, title, description, due_date, resources)\n            VALUES (?, ?, ?, ?, ?, ?, ?)\n        \");\n        $stmt->execute([$booking_id, $expert_id, $learner_id, $title, $description, $due_date, $resources]);\n        \n        echo json_encode(['success' => true, 'message' => 'Assignment created successfully', 'id' => $pdo->lastInsertId()]);\n    } catch (PDOException $e) {\n        error_log('Create Assignment Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while creating assignment']);\n    }\n    exit;\n}\n\n// Complete session\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $booking_id = $data['booking_id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $recording_url = $data['recording_url'] ?? null;\n    \n    if (!$booking_id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Booking ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify booking belongs to expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM bookings WHERE id = ?\");\n        $stmt->execute([$booking_id]);\n        $booking = $stmt->fetch();\n        \n        if (!$booking || $booking['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"\n            UPDATE bookings \n            SET status = 'completed', recording_url = ?, updated_at = NOW()\n            WHERE id = ?\n        \");\n        $stmt->execute([$recording_url, $booking_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Session completed successfully']);\n    } catch (PDOException $e) {\n        error_log('Complete Session Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while completing session']);\n    }\n    exit;\n}\n?>\n","size_bytes":5635},"admin-panel/apis/expert/verification.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - user_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Upload KYC documents\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $user_id = $data['user_id'] ?? null;\n    $govt_id_url = $data['govt_id_url'] ?? null;\n    $certification_urls = json_encode($data['certification_urls'] ?? []);\n    \n    if (!$user_id) {\n        echo json_encode(['success' => false, 'message' => 'User ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            UPDATE expert_profiles\n            SET govt_id_url = ?, certification_urls = ?, verification_status = 'pending'\n            WHERE user_id = ?\n        \");\n        $stmt->execute([$govt_id_url, $certification_urls, $user_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Documents uploaded successfully. Awaiting admin verification.']);\n    } catch (PDOException $e) {\n        error_log('Upload KYC Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while uploading documents']);\n    }\n    exit;\n}\n\n// Get verification status\nif ($method === 'GET') {\n    $user_id = $_GET['user_id'] ?? null;\n    \n    if (!$user_id) {\n        echo json_encode(['success' => false, 'message' => 'User ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT verification_status, verified_at, govt_id_url, certification_urls\n            FROM expert_profiles\n            WHERE user_id = ?\n        \");\n        $stmt->execute([$user_id]);\n        $verification = $stmt->fetch();\n        \n        if ($verification) {\n            $verification['certification_urls'] = json_decode($verification['certification_urls'], true);\n            echo json_encode(['success' => true, 'verification' => $verification]);\n        } else {\n            echo json_encode(['success' => false, 'message' => 'Expert profile not found']);\n        }\n    } catch (PDOException $e) {\n        error_log('Get Verification Status Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching verification status']);\n    }\n    exit;\n}\n?>\n","size_bytes":2367},"admin-panel/apis/expert/workflows.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once '../connection/pdo.php';\n\n// NOTE: Authentication middleware required - expert_id should come from session, not request\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get workflows\nif ($method === 'GET') {\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT * FROM workflows\n            WHERE expert_id = ? AND is_active = 1\n            ORDER BY created_at DESC\n        \");\n        $stmt->execute([$expert_id]);\n        $workflows = $stmt->fetchAll();\n        \n        foreach ($workflows as &$workflow) {\n            $stmt = $pdo->prepare(\"\n                SELECT * FROM workflow_steps\n                WHERE workflow_id = ?\n                ORDER BY step_order ASC\n            \");\n            $stmt->execute([$workflow['id']]);\n            $workflow['steps'] = $stmt->fetchAll();\n        }\n        \n        echo json_encode(['success' => true, 'workflows' => $workflows]);\n    } catch (PDOException $e) {\n        error_log('Get Workflows Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching workflows']);\n    }\n    exit;\n}\n\n// Create workflow\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $expert_id = $data['expert_id'] ?? null;\n    $title = $data['title'] ?? '';\n    $goal_outcome = $data['goal_outcome'] ?? '';\n    $duration_weeks = $data['duration_weeks'] ?? null;\n    $description = $data['description'] ?? '';\n    $steps = $data['steps'] ?? [];\n    \n    if (!$expert_id || !$title) {\n        echo json_encode(['success' => false, 'message' => 'Expert ID and title are required']);\n        exit;\n    }\n    \n    try {\n        $pdo->beginTransaction();\n        \n        $stmt = $pdo->prepare(\"\n            INSERT INTO workflows (expert_id, title, goal_outcome, duration_weeks, description)\n            VALUES (?, ?, ?, ?, ?)\n        \");\n        $stmt->execute([$expert_id, $title, $goal_outcome, $duration_weeks, $description]);\n        $workflow_id = $pdo->lastInsertId();\n        \n        if (!empty($steps)) {\n            $stmt = $pdo->prepare(\"\n                INSERT INTO workflow_steps (workflow_id, step_order, step_type, title, description, duration_minutes, resources)\n                VALUES (?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            foreach ($steps as $index => $step) {\n                $resources = json_encode($step['resources'] ?? []);\n                $stmt->execute([\n                    $workflow_id,\n                    $index + 1,\n                    $step['step_type'] ?? 'session',\n                    $step['title'] ?? '',\n                    $step['description'] ?? '',\n                    $step['duration_minutes'] ?? null,\n                    $resources\n                ]);\n            }\n        }\n        \n        $pdo->commit();\n        echo json_encode(['success' => true, 'message' => 'Workflow created successfully', 'id' => $workflow_id]);\n    } catch (PDOException $e) {\n        $pdo->rollBack();\n        error_log('Create Workflow Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while creating workflow']);\n    }\n    exit;\n}\n\n// Update workflow\nif ($method === 'PUT') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $workflow_id = $data['workflow_id'] ?? null;\n    $expert_id = $data['expert_id'] ?? null;\n    $title = $data['title'] ?? '';\n    $goal_outcome = $data['goal_outcome'] ?? '';\n    $duration_weeks = $data['duration_weeks'] ?? null;\n    $description = $data['description'] ?? '';\n    \n    if (!$workflow_id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Workflow ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify workflow belongs to expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM workflows WHERE id = ?\");\n        $stmt->execute([$workflow_id]);\n        $workflow = $stmt->fetch();\n        \n        if (!$workflow || $workflow['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"\n            UPDATE workflows\n            SET title = ?, goal_outcome = ?, duration_weeks = ?, description = ?, updated_at = NOW()\n            WHERE id = ?\n        \");\n        $stmt->execute([$title, $goal_outcome, $duration_weeks, $description, $workflow_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Workflow updated successfully']);\n    } catch (PDOException $e) {\n        error_log('Update Workflow Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating workflow']);\n    }\n    exit;\n}\n\n// Delete workflow\nif ($method === 'DELETE') {\n    $workflow_id = $_GET['id'] ?? null;\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    if (!$workflow_id || !$expert_id) {\n        echo json_encode(['success' => false, 'message' => 'Workflow ID and Expert ID are required']);\n        exit;\n    }\n    \n    try {\n        // Verify workflow belongs to expert\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM workflows WHERE id = ?\");\n        $stmt->execute([$workflow_id]);\n        $workflow = $stmt->fetch();\n        \n        if (!$workflow || $workflow['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n            exit;\n        }\n        \n        $stmt = $pdo->prepare(\"UPDATE workflows SET is_active = 0 WHERE id = ?\");\n        $stmt->execute([$workflow_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Workflow deleted successfully']);\n    } catch (PDOException $e) {\n        error_log('Delete Workflow Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while deleting workflow']);\n    }\n    exit;\n}\n?>\n","size_bytes":6172},"admin-panel/apis/admin/auth.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nheader('Content-Type: application/json');\n\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Login\nif ($method === 'POST') {\n    $input = json_decode(file_get_contents('php://input'), true);\n    $email = $input['email'] ?? '';\n    $password = $input['password'] ?? '';\n    \n    // Prevent timing attacks with constant-time comparison\n    $authSuccess = false;\n    $userData = null;\n    $dummyHash = '$2y$10$' . str_repeat('0', 53); // Valid bcrypt dummy hash\n    \n    try {\n        // Query admin users (role = 'admin')\n        $stmt = $pdo->prepare(\"\n            SELECT id, email, password_hash, role, status \n            FROM users \n            WHERE email = ? AND role = 'admin'\n        \");\n        $stmt->execute([$email]);\n        $admin = $stmt->fetch();\n        \n        // Always verify password against a hash (timing attack mitigation)\n        $hashToVerify = $admin ? $admin['password_hash'] : $dummyHash;\n        $passwordValid = password_verify($password, $hashToVerify);\n        \n        // Validate credentials from database\n        if ($admin && $passwordValid) {\n            // Check if account is active\n            if ($admin['status'] !== 'active') {\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Account is inactive. Contact support.'\n                ]);\n                exit;\n            }\n            \n            $authSuccess = true;\n            $userData = $admin;\n        }\n        \n        if ($authSuccess && $userData) {\n            // Regenerate session ID to prevent fixation attacks\n            session_regenerate_id(true);\n            \n            // Set session variables\n            $_SESSION['user_id'] = $userData['id'];\n            $_SESSION['email'] = $userData['email'];\n            $_SESSION['role'] = $userData['role'];\n            $_SESSION['logged_in'] = true;\n            $_SESSION['last_activity'] = time();\n            \n            echo json_encode([\n                'success' => true,\n                'message' => 'Login successful',\n                'user' => [\n                    'id' => $userData['id'],\n                    'email' => $userData['email'],\n                    'role' => $userData['role']\n                ]\n            ]);\n        } else {\n            // Generic error message to prevent user enumeration\n            echo json_encode([\n                'success' => false,\n                'message' => 'Invalid email or password'\n            ]);\n        }\n    } catch (PDOException $e) {\n        error_log('Admin Login Error: ' . $e->getMessage());\n        echo json_encode([\n            'success' => false,\n            'message' => 'An error occurred during login'\n        ]);\n    }\n    exit;\n}\n\n// Logout\nif ($method === 'DELETE') {\n    // Clear session data\n    $_SESSION = array();\n    \n    // Delete session cookie\n    if (isset($_COOKIE[session_name()])) {\n        setcookie(session_name(), '', time() - 3600, '/');\n    }\n    \n    // Destroy session\n    session_destroy();\n    \n    echo json_encode([\n        'success' => true,\n        'message' => 'Logout successful'\n    ]);\n    exit;\n}\n\n// Check session status\nif ($method === 'GET') {\n    if (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] === true && $_SESSION['role'] === 'admin') {\n        echo json_encode([\n            'success' => true,\n            'logged_in' => true,\n            'user' => [\n                'id' => $_SESSION['user_id'],\n                'email' => $_SESSION['email'],\n                'role' => $_SESSION['role']\n            ]\n        ]);\n    } else {\n        echo json_encode([\n            'success' => false,\n            'logged_in' => false\n        ]);\n    }\n    exit;\n}\n\necho json_encode(['success' => false, 'message' => 'Invalid request method']);\n?>\n","size_bytes":3889},"admin/admin-auth.php":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Login - Nexpert.ai</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#2563EB',\n                        secondary: '#1E40AF',\n                        accent: '#F59E0B'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gradient-to-br from-blue-50 to-indigo-100\">\n    <div class=\"min-h-screen flex items-center justify-center px-4\">\n        <div class=\"max-w-md w-full\">\n            <!-- Logo and Title -->\n            <div class=\"text-center mb-8\">\n                <h1 class=\"text-4xl font-bold text-primary mb-2\">Nexpert.ai</h1>\n                <h2 class=\"text-2xl font-semibold text-gray-800\">Admin Portal</h2>\n                <p class=\"mt-2 text-gray-600\">Secure admin access only</p>\n            </div>\n\n            <!-- Login Card -->\n            <div class=\"bg-white rounded-2xl shadow-2xl p-8\">\n                <!-- Demo Credentials -->\n                <div class=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <div class=\"text-sm text-blue-800\">\n                        <strong>Demo Admin Credentials:</strong><br>\n                        Email: admin@nexpert.ai<br>\n                        Password: admin123\n                    </div>\n                </div>\n\n                <form id=\"adminLoginForm\" class=\"space-y-6\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address</label>\n                        <input id=\"adminEmail\" type=\"email\" required \n                            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" \n                            placeholder=\"Enter admin email\" \n                            value=\"admin@nexpert.ai\">\n                    </div>\n\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\n                        <input id=\"adminPassword\" type=\"password\" required \n                            class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\" \n                            placeholder=\"Enter password\" \n                            value=\"admin123\">\n                    </div>\n\n                    <div class=\"flex items-center justify-between\">\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded\">\n                            <span class=\"ml-2 text-sm text-gray-600\">Remember me</span>\n                        </label>\n                    </div>\n\n                    <button type=\"submit\" \n                        class=\"w-full bg-primary text-white py-3 rounded-lg hover:bg-secondary transition font-semibold\">\n                        Sign In to Admin Portal\n                    </button>\n                </form>\n\n                <!-- Back to Home -->\n                <div class=\"mt-6 text-center\">\n                    <a href=\"/\" class=\"text-sm text-primary hover:text-secondary\">← Back to Homepage</a>\n                </div>\n            </div>\n\n            <!-- Security Notice -->\n            <div class=\"mt-6 text-center text-sm text-gray-600\">\n                <p>🔒 Secure admin authentication</p>\n            </div>\n        </div>\n    </div>\n\n    <script>\n    document.getElementById('adminLoginForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        const email = document.getElementById('adminEmail').value;\n        const password = document.getElementById('adminPassword').value;\n        \n        try {\n            const response = await fetch('/admin-panel/apis/admin/auth.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email, password })\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                window.location.href = '?panel=admin&page=dashboard';\n            } else {\n                alert(result.message || 'Invalid credentials');\n            }\n        } catch (error) {\n            console.error('Login error:', error);\n            alert('Login failed. Please try again.');\n        }\n    });\n    </script>\n</body>\n</html>\n","size_bytes":4789},"admin-panel/apis/admin/auth-check.php":{"content":"<?php\n// Admin authentication check - include at top of all admin APIs\n\nif (!isset($_SESSION['logged_in']) || $_SESSION['logged_in'] !== true || !isset($_SESSION['role']) || $_SESSION['role'] !== 'admin') {\n    http_response_code(403);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n    exit;\n}\n\n// CSRF token validation for state-changing requests\nfunction validateCSRF() {\n    $method = $_SERVER['REQUEST_METHOD'];\n    if (in_array($method, ['POST', 'PUT', 'DELETE', 'PATCH'])) {\n        $token = $_SERVER['HTTP_X_CSRF_TOKEN'] ?? '';\n        if (!isset($_SESSION['csrf_token']) || empty($token) || !hash_equals($_SESSION['csrf_token'], $token)) {\n            http_response_code(403);\n            echo json_encode(['success' => false, 'message' => 'Invalid CSRF token']);\n            exit;\n        }\n    }\n}\n?>\n","size_bytes":845},"admin-panel/apis/admin/bookings.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/auth-check.php';\nheader('Content-Type: application/json');\n\nvalidateCSRF();\n\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get all bookings\nif ($method === 'GET') {\n    $status = $_GET['status'] ?? null;\n    $expert_id = $_GET['expert_id'] ?? null;\n    $learner_id = $_GET['learner_id'] ?? null;\n    \n    try {\n        $sql = \"\n            SELECT b.*, \n                   lp.full_name as learner_name,\n                   ep.full_name as expert_name,\n                   lu.email as learner_email,\n                   eu.email as expert_email,\n                   p.amount, p.status as payment_status\n            FROM bookings b\n            LEFT JOIN learner_profiles lp ON lp.user_id = b.learner_id\n            LEFT JOIN expert_profiles ep ON ep.user_id = b.expert_id\n            LEFT JOIN users lu ON lu.id = b.learner_id\n            LEFT JOIN users eu ON eu.id = b.expert_id\n            LEFT JOIN payments p ON p.booking_id = b.id\n            WHERE 1=1\n        \";\n        \n        $params = [];\n        \n        if ($status) {\n            $sql .= \" AND b.status = ?\";\n            $params[] = $status;\n        }\n        \n        if ($expert_id) {\n            $sql .= \" AND b.expert_id = ?\";\n            $params[] = $expert_id;\n        }\n        \n        if ($learner_id) {\n            $sql .= \" AND b.learner_id = ?\";\n            $params[] = $learner_id;\n        }\n        \n        $sql .= \" ORDER BY b.session_datetime DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $bookings = $stmt->fetchAll();\n        \n        echo json_encode(['success' => true, 'bookings' => $bookings]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Bookings Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching bookings']);\n    }\n    exit;\n}\n\n// Update booking status\nif ($method === 'PUT') {\n    $input = json_decode(file_get_contents('php://input'), true);\n    $booking_id = $input['booking_id'] ?? null;\n    $new_status = $input['status'] ?? null;\n    $admin_notes = $input['admin_notes'] ?? null;\n    \n    if (!$booking_id || !$new_status) {\n        echo json_encode(['success' => false, 'message' => 'Missing required fields']);\n        exit;\n    }\n    \n    try {\n        $stmt = $pdo->prepare(\"\n            UPDATE bookings \n            SET status = ?, updated_at = NOW()\n            WHERE id = ?\n        \");\n        $stmt->execute([$new_status, $booking_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Booking status updated']);\n    } catch (PDOException $e) {\n        error_log('Admin Update Booking Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while updating booking']);\n    }\n    exit;\n}\n\necho json_encode(['success' => false, 'message' => 'Invalid request method']);\n?>\n","size_bytes":3016},"admin-panel/apis/admin/kyc.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\nrequire_once __DIR__ . '/auth-check.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        // Get specific expert by ID or list all with optional filter\n        if (isset($_GET['expert_id'])) {\n            $stmt = $pdo->prepare(\"\n                SELECT ep.*, u.email, u.phone, u.status as account_status, u.created_at as account_created,\n                       kyc.full_legal_name, kyc.date_of_birth, kyc.nationality, kyc.gender,\n                       kyc.address_line1, kyc.address_line2, kyc.city, kyc.state, kyc.postal_code, kyc.country,\n                       kyc.id_document_type, kyc.id_number, kyc.id_document_path\n                FROM expert_profiles ep\n                INNER JOIN users u ON ep.user_id = u.id\n                LEFT JOIN expert_kyc_verification kyc ON ep.user_id = kyc.expert_id\n                WHERE ep.user_id = ?\n            \");\n            $stmt->execute([$_GET['expert_id']]);\n            $expert = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($expert) {\n                $expert['expertise_verticals'] = $expert['expertise_verticals'] ? json_decode($expert['expertise_verticals'], true) : [];\n                $expert['certification_urls'] = $expert['certification_urls'] ? json_decode($expert['certification_urls'], true) : [];\n            }\n            \n            echo json_encode([\n                'success' => true,\n                'data' => $expert\n            ]);\n        } else {\n            // List all experts with optional status filter\n            $status = $_GET['status'] ?? null;\n            \n            $query = \"\n                SELECT ep.*, u.email, u.phone, u.status as account_status, u.created_at as account_created\n                FROM expert_profiles ep\n                INNER JOIN users u ON ep.user_id = u.id\n                WHERE u.role = 'expert'\n            \";\n            \n            $params = [];\n            if ($status && $status !== 'all') {\n                $query .= \" AND ep.verification_status = ?\";\n                $params[] = $status;\n            }\n            \n            $query .= \" ORDER BY ep.created_at DESC\";\n            \n            $stmt = $pdo->prepare($query);\n            $stmt->execute($params);\n            $expertList = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($expertList as &$expert) {\n                $expert['expertise_verticals'] = $expert['expertise_verticals'] ? json_decode($expert['expertise_verticals'], true) : [];\n            }\n            \n            echo json_encode([\n                'success' => true,\n                'data' => $expertList\n            ]);\n        }\n        \n    } elseif ($method === 'PUT') {\n        // Update expert verification status or profile\n        $data = json_decode(file_get_contents('php://input'), true);\n        \n        if (!$data || !isset($data['expert_id'])) {\n            throw new Exception('Expert ID is required');\n        }\n        \n        // Check if this is a verification status update\n        if (isset($data['status'])) {\n            if (!in_array($data['status'], ['approved', 'rejected', 'pending'])) {\n                throw new Exception('Invalid status. Must be approved, rejected, or pending');\n            }\n            \n            $verified_at = $data['status'] === 'approved' ? date('Y-m-d H:i:s') : null;\n            \n            $stmt = $pdo->prepare(\"\n                UPDATE expert_profiles SET\n                    verification_status = ?,\n                    verified_at = ?\n                WHERE user_id = ?\n            \");\n            \n            $stmt->execute([\n                $data['status'],\n                $verified_at,\n                $data['expert_id']\n            ]);\n            \n            echo json_encode([\n                'success' => true,\n                'message' => 'Verification status updated successfully'\n            ]);\n        }\n        // Check if this is a profile update\n        elseif (isset($data['update_profile'])) {\n            $stmt = $pdo->prepare(\"\n                UPDATE expert_profiles SET\n                    full_name = ?,\n                    bio_short = ?,\n                    bio_full = ?,\n                    expertise_verticals = ?,\n                    credentials = ?,\n                    years_of_experience = ?,\n                    linkedin_url = ?,\n                    website_url = ?\n                WHERE user_id = ?\n            \");\n            \n            $stmt->execute([\n                $data['full_name'] ?? null,\n                $data['bio_short'] ?? null,\n                $data['bio_full'] ?? null,\n                json_encode($data['expertise_verticals'] ?? []),\n                $data['credentials'] ?? null,\n                $data['years_of_experience'] ?? null,\n                $data['linkedin_url'] ?? null,\n                $data['website_url'] ?? null,\n                $data['expert_id']\n            ]);\n            \n            echo json_encode([\n                'success' => true,\n                'message' => 'Expert profile updated successfully'\n            ]);\n        } else {\n            throw new Exception('No valid update data provided');\n        }\n        \n    } else {\n        throw new Exception('Method not allowed');\n    }\n    \n} catch (Exception $e) {\n    http_response_code(400);\n    echo json_encode([\n        'success' => false,\n        'message' => $e->getMessage()\n    ]);\n}\n?>\n","size_bytes":5562},"admin-panel/apis/admin/payments.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/auth-check.php';\nheader('Content-Type: application/json');\n\nvalidateCSRF();\n\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Get all payments/transactions\nif ($method === 'GET') {\n    $status = $_GET['status'] ?? null;\n    $learner_id = $_GET['learner_id'] ?? null;\n    $expert_id = $_GET['expert_id'] ?? null;\n    \n    try {\n        $sql = \"\n            SELECT p.*, \n                   lp.full_name as learner_name,\n                   ep.full_name as expert_name,\n                   lu.email as learner_email,\n                   eu.email as expert_email,\n                   b.session_datetime\n            FROM payments p\n            LEFT JOIN bookings b ON b.id = p.booking_id\n            LEFT JOIN learner_profiles lp ON lp.user_id = p.learner_id\n            LEFT JOIN expert_profiles ep ON ep.user_id = p.expert_id\n            LEFT JOIN users lu ON lu.id = p.learner_id\n            LEFT JOIN users eu ON eu.id = p.expert_id\n            WHERE 1=1\n        \";\n        \n        $params = [];\n        \n        if ($status) {\n            $sql .= \" AND p.status = ?\";\n            $params[] = $status;\n        }\n        \n        if ($learner_id) {\n            $sql .= \" AND p.learner_id = ?\";\n            $params[] = $learner_id;\n        }\n        \n        if ($expert_id) {\n            $sql .= \" AND p.expert_id = ?\";\n            $params[] = $expert_id;\n        }\n        \n        $sql .= \" ORDER BY p.created_at DESC\";\n        \n        $stmt = $pdo->prepare($sql);\n        $stmt->execute($params);\n        $payments = $stmt->fetchAll();\n        \n        // Calculate summary stats\n        $statsStmt = $pdo->query(\"\n            SELECT \n                COUNT(*) as total_transactions,\n                SUM(CASE WHEN status = 'success' THEN amount ELSE 0 END) as total_revenue,\n                SUM(CASE WHEN status = 'success' THEN commission_amount ELSE 0 END) as total_commission,\n                SUM(CASE WHEN status = 'pending' THEN amount ELSE 0 END) as pending_amount,\n                SUM(CASE WHEN status = 'refunded' THEN refund_amount ELSE 0 END) as total_refunds\n            FROM payments\n        \");\n        $stats = $statsStmt->fetch();\n        \n        echo json_encode(['success' => true, 'payments' => $payments, 'stats' => $stats]);\n    } catch (PDOException $e) {\n        error_log('Admin Get Payments Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while fetching payments']);\n    }\n    exit;\n}\n\n// Process refund\nif ($method === 'POST') {\n    $input = json_decode(file_get_contents('php://input'), true);\n    $payment_id = $input['payment_id'] ?? null;\n    $refund_amount = $input['refund_amount'] ?? null;\n    $refund_reason = $input['refund_reason'] ?? null;\n    \n    if (!$payment_id || !$refund_amount) {\n        echo json_encode(['success' => false, 'message' => 'Missing required fields']);\n        exit;\n    }\n    \n    try {\n        $pdo->beginTransaction();\n        \n        // Update payment record\n        $stmt = $pdo->prepare(\"\n            UPDATE payments \n            SET status = 'refunded', \n                refund_amount = ?, \n                refund_reason = ?,\n                updated_at = NOW()\n            WHERE id = ?\n        \");\n        $stmt->execute([$refund_amount, $refund_reason, $payment_id]);\n        \n        $pdo->commit();\n        \n        echo json_encode(['success' => true, 'message' => 'Refund processed successfully']);\n    } catch (PDOException $e) {\n        $pdo->rollBack();\n        error_log('Admin Process Refund Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'An error occurred while processing refund']);\n    }\n    exit;\n}\n\necho json_encode(['success' => false, 'message' => 'Invalid request method']);\n?>\n","size_bytes":3903},"admin-panel/apis/expert/auth.php":{"content":"<?php\nsession_start();\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'POST') {\n        $data = json_decode(file_get_contents('php://input'), true);\n        \n        if (!$data || !isset($data['email']) || !isset($data['password'])) {\n            throw new Exception('Email and password are required');\n        }\n        \n        $email = trim($data['email']);\n        $password = $data['password'];\n        \n        // Fetch user from database\n        $stmt = $pdo->prepare(\"\n            SELECT u.*, ep.full_name, ep.verification_status\n            FROM users u\n            LEFT JOIN expert_profiles ep ON u.id = ep.user_id\n            WHERE u.email = ? AND u.role = 'expert'\n        \");\n        $stmt->execute([$email]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if (!$user) {\n            // Use timing attack protection - verify dummy password\n            password_verify($password, '$2y$10$dummyHashForTimingAttackProtection');\n            throw new Exception('Invalid email or password');\n        }\n        \n        // Verify password\n        if (!password_verify($password, $user['password_hash'])) {\n            throw new Exception('Invalid email or password');\n        }\n        \n        // Check if account is active\n        if ($user['status'] !== 'active') {\n            throw new Exception('Your account has been ' . $user['status'] . '. Please contact support.');\n        }\n        \n        // Regenerate session ID for security\n        session_regenerate_id(true);\n        \n        // Set session variables\n        $_SESSION['user_id'] = $user['id'];\n        $_SESSION['email'] = $user['email'];\n        $_SESSION['role'] = 'expert';\n        $_SESSION['full_name'] = $user['full_name'];\n        $_SESSION['verification_status'] = $user['verification_status'];\n        $_SESSION['last_activity'] = time();\n        \n        echo json_encode([\n            'success' => true,\n            'message' => 'Login successful',\n            'user' => [\n                'id' => $user['id'],\n                'email' => $user['email'],\n                'full_name' => $user['full_name'],\n                'verification_status' => $user['verification_status']\n            ]\n        ]);\n        \n    } elseif ($method === 'DELETE') {\n        // Logout\n        session_destroy();\n        echo json_encode([\n            'success' => true,\n            'message' => 'Logged out successfully'\n        ]);\n        \n    } else {\n        throw new Exception('Method not allowed');\n    }\n    \n} catch (Exception $e) {\n    http_response_code(400);\n    echo json_encode([\n        'success' => false,\n        'message' => $e->getMessage()\n    ]);\n}\n?>\n","size_bytes":2768},"admin-panel/apis/expert/kyc.php":{"content":"<?php\nsession_start();\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Check authentication\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'expert') {\n    http_response_code(401);\n    echo json_encode([\n        'success' => false,\n        'message' => 'Unauthorized access'\n    ]);\n    exit;\n}\n\n$expertId = $_SESSION['user_id'];\n\ntry {\n    if ($method === 'GET') {\n        // Get KYC details for the expert\n        $stmt = $pdo->prepare(\"\n            SELECT * FROM expert_kyc_verification \n            WHERE expert_id = ?\n        \");\n        $stmt->execute([$expertId]);\n        $kyc = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        echo json_encode([\n            'success' => true,\n            'data' => $kyc\n        ]);\n        \n    } elseif ($method === 'POST') {\n        // Save or submit KYC data\n        $data = json_decode(file_get_contents('php://input'), true);\n        \n        if (!$data) {\n            throw new Exception('Invalid request data');\n        }\n        \n        // Validate required fields\n        $required = ['full_legal_name', 'date_of_birth', 'nationality', 'address_line1', \n                     'city', 'state', 'postal_code', 'country', 'id_document_type', \n                     'id_number', 'account_holder_name', 'bank_name', 'account_number', \n                     'ifsc_code', 'account_type'];\n        \n        foreach ($required as $field) {\n            if (empty($data[$field])) {\n                throw new Exception(\"Field '$field' is required\");\n            }\n        }\n        \n        // Determine status (draft or pending based on submit flag)\n        $status = isset($data['submit']) && $data['submit'] === true ? 'pending' : 'draft';\n        $submitted_at = $status === 'pending' ? date('Y-m-d H:i:s') : null;\n        \n        // Check if KYC record exists\n        $stmt = $pdo->prepare(\"SELECT id FROM expert_kyc_verification WHERE expert_id = ?\");\n        $stmt->execute([$expertId]);\n        $existing = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if ($existing) {\n            // Update existing record\n            $stmt = $pdo->prepare(\"\n                UPDATE expert_kyc_verification SET\n                    full_legal_name = ?,\n                    date_of_birth = ?,\n                    nationality = ?,\n                    gender = ?,\n                    address_line1 = ?,\n                    city = ?,\n                    state = ?,\n                    postal_code = ?,\n                    country = ?,\n                    id_document_type = ?,\n                    id_number = ?,\n                    id_document_front_url = ?,\n                    id_document_back_url = ?,\n                    account_holder_name = ?,\n                    bank_name = ?,\n                    account_number = ?,\n                    ifsc_code = ?,\n                    account_type = ?,\n                    verification_status = ?,\n                    submitted_at = ?,\n                    updated_at = NOW()\n                WHERE expert_id = ?\n            \");\n            \n            $stmt->execute([\n                $data['full_legal_name'],\n                $data['date_of_birth'],\n                $data['nationality'],\n                $data['gender'] ?? null,\n                $data['address_line1'],\n                $data['city'],\n                $data['state'],\n                $data['postal_code'],\n                $data['country'],\n                $data['id_document_type'],\n                $data['id_number'],\n                $data['id_document_front_url'] ?? null,\n                $data['id_document_back_url'] ?? null,\n                $data['account_holder_name'],\n                $data['bank_name'],\n                $data['account_number'],\n                $data['ifsc_code'],\n                $data['account_type'],\n                $status,\n                $submitted_at,\n                $expertId\n            ]);\n            \n            $message = $status === 'pending' ? 'KYC submitted successfully!' : 'KYC saved as draft!';\n            \n        } else {\n            // Insert new record\n            $stmt = $pdo->prepare(\"\n                INSERT INTO expert_kyc_verification (\n                    expert_id, full_legal_name, date_of_birth, nationality, gender,\n                    address_line1, city, state, postal_code, country,\n                    id_document_type, id_number, id_document_front_url, id_document_back_url,\n                    account_holder_name, bank_name, account_number, ifsc_code, account_type,\n                    verification_status, submitted_at\n                ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([\n                $expertId,\n                $data['full_legal_name'],\n                $data['date_of_birth'],\n                $data['nationality'],\n                $data['gender'] ?? null,\n                $data['address_line1'],\n                $data['city'],\n                $data['state'],\n                $data['postal_code'],\n                $data['country'],\n                $data['id_document_type'],\n                $data['id_number'],\n                $data['id_document_front_url'] ?? null,\n                $data['id_document_back_url'] ?? null,\n                $data['account_holder_name'],\n                $data['bank_name'],\n                $data['account_number'],\n                $data['ifsc_code'],\n                $data['account_type'],\n                $status,\n                $submitted_at\n            ]);\n            \n            $message = $status === 'pending' ? 'KYC submitted successfully!' : 'KYC saved as draft!';\n        }\n        \n        echo json_encode([\n            'success' => true,\n            'message' => $message\n        ]);\n        \n    } else {\n        throw new Exception('Method not allowed');\n    }\n    \n} catch (Exception $e) {\n    http_response_code(400);\n    echo json_encode([\n        'success' => false,\n        'message' => $e->getMessage()\n    ]);\n}\n?>\n","size_bytes":6100},"admin-panel/apis/expert/register.php":{"content":"<?php\nsession_start();\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'POST') {\n        $data = json_decode(file_get_contents('php://input'), true);\n        \n        // Validate required fields\n        if (!$data || !isset($data['name']) || !isset($data['email']) || !isset($data['mobile']) || !isset($data['password'])) {\n            throw new Exception('All fields are required');\n        }\n        \n        $name = trim($data['name']);\n        $email = trim($data['email']);\n        $mobile = trim($data['mobile']);\n        $password = $data['password'];\n        \n        // Validate email format\n        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            throw new Exception('Invalid email address');\n        }\n        \n        // Validate password length\n        if (strlen($password) < 8) {\n            throw new Exception('Password must be at least 8 characters long');\n        }\n        \n        // Check if email already exists\n        $stmt = $pdo->prepare(\"SELECT id FROM users WHERE email = ?\");\n        $stmt->execute([$email]);\n        if ($stmt->fetch()) {\n            throw new Exception('Email address is already registered');\n        }\n        \n        // Check if mobile already exists\n        $stmt = $pdo->prepare(\"SELECT id FROM users WHERE phone = ?\");\n        $stmt->execute([$mobile]);\n        if ($stmt->fetch()) {\n            throw new Exception('Mobile number is already registered');\n        }\n        \n        // Hash password\n        $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n        \n        // Start transaction\n        $pdo->beginTransaction();\n        \n        try {\n            // Insert into users table\n            $stmt = $pdo->prepare(\"\n                INSERT INTO users (email, phone, password_hash, role, status, created_at)\n                VALUES (?, ?, ?, 'expert', 'active', NOW())\n            \");\n            $stmt->execute([$email, $mobile, $passwordHash]);\n            $userId = $pdo->lastInsertId();\n            \n            // Insert into expert_profiles table\n            $stmt = $pdo->prepare(\"\n                INSERT INTO expert_profiles (user_id, full_name, verification_status, created_at)\n                VALUES (?, ?, 'pending', NOW())\n            \");\n            $stmt->execute([$userId, $name]);\n            \n            $pdo->commit();\n            \n            // Log the user in automatically\n            session_regenerate_id(true);\n            $_SESSION['user_id'] = $userId;\n            $_SESSION['email'] = $email;\n            $_SESSION['role'] = 'expert';\n            $_SESSION['full_name'] = $name;\n            $_SESSION['verification_status'] = 'pending';\n            $_SESSION['last_activity'] = time();\n            \n            echo json_encode([\n                'success' => true,\n                'message' => 'Registration successful',\n                'user' => [\n                    'id' => $userId,\n                    'email' => $email,\n                    'full_name' => $name,\n                    'verification_status' => 'pending'\n                ]\n            ]);\n            \n        } catch (Exception $e) {\n            $pdo->rollBack();\n            throw $e;\n        }\n        \n    } else {\n        throw new Exception('Method not allowed');\n    }\n    \n} catch (Exception $e) {\n    http_response_code(400);\n    echo json_encode([\n        'success' => false,\n        'message' => $e->getMessage()\n    ]);\n}\n?>\n","size_bytes":3530},"admin-panel/apis/expert/settings.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n// Start session to get user_id\nsession_start();\n\n// Check if expert is logged in\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'expert') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n    exit;\n}\n\n$userId = $_SESSION['user_id'];\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    switch ($method) {\n        case 'GET':\n            // Fetch all settings for the expert\n            $stmt = $pdo->prepare(\"\n                SELECT \n                    u.email, u.phone,\n                    ep.full_name, ep.tagline, ep.bio_short, ep.bio_full, \n                    ep.expertise_verticals, ep.credentials, ep.experience_years, ep.timezone,\n                    ep.profile_photo,\n                    eb.account_holder_name, eb.bank_name, eb.branch_name,\n                    eb.account_number, eb.ifsc_code, eb.account_type\n                FROM users u\n                LEFT JOIN expert_profiles ep ON u.id = ep.user_id\n                LEFT JOIN expert_bank_details eb ON u.id = eb.user_id\n                WHERE u.id = ?\n            \");\n            $stmt->execute([$userId]);\n            $settings = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$settings) {\n                http_response_code(404);\n                echo json_encode(['success' => false, 'message' => 'Settings not found']);\n                exit;\n            }\n\n            echo json_encode(['success' => true, 'data' => $settings]);\n            break;\n\n        case 'PUT':\n            // Update settings\n            $input = json_decode(file_get_contents('php://input'), true);\n            $section = $input['section'] ?? '';\n\n            switch ($section) {\n                case 'profile':\n                    // Update profile information\n                    $stmt = $pdo->prepare(\"\n                        UPDATE expert_profiles \n                        SET full_name = ?, tagline = ?, bio_short = ?, bio_full = ?, \n                            expertise_verticals = ?, credentials = ?, experience_years = ?, timezone = ?\n                        WHERE user_id = ?\n                    \");\n                    $stmt->execute([\n                        $input['full_name'] ?? '',\n                        $input['tagline'] ?? '',\n                        $input['bio_short'] ?? '',\n                        $input['bio_full'] ?? '',\n                        isset($input['expertise_verticals']) ? json_encode($input['expertise_verticals']) : null,\n                        $input['credentials'] ?? '',\n                        $input['experience_years'] ?? null,\n                        $input['timezone'] ?? 'UTC',\n                        $userId\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Profile updated successfully']);\n                    break;\n\n                case 'bank':\n                    // Update bank details\n                    $stmt = $pdo->prepare(\"\n                        INSERT INTO expert_bank_details \n                        (user_id, account_holder_name, bank_name, branch_name, account_number, ifsc_code, account_type)\n                        VALUES (?, ?, ?, ?, ?, ?, ?)\n                        ON DUPLICATE KEY UPDATE\n                        account_holder_name = VALUES(account_holder_name),\n                        bank_name = VALUES(bank_name),\n                        branch_name = VALUES(branch_name),\n                        account_number = VALUES(account_number),\n                        ifsc_code = VALUES(ifsc_code),\n                        account_type = VALUES(account_type)\n                    \");\n                    $stmt->execute([\n                        $userId,\n                        $input['account_holder_name'],\n                        $input['bank_name'],\n                        $input['branch_name'],\n                        $input['account_number'],\n                        $input['ifsc_code'],\n                        $input['account_type']\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Bank details updated successfully']);\n                    break;\n\n                case 'password':\n                    // Verify current password\n                    $stmt = $pdo->prepare(\"SELECT password_hash FROM users WHERE id = ?\");\n                    $stmt->execute([$userId]);\n                    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n                    if (!password_verify($input['current_password'], $user['password_hash'])) {\n                        http_response_code(400);\n                        echo json_encode(['success' => false, 'message' => 'Current password is incorrect']);\n                        exit;\n                    }\n\n                    // Update password\n                    $new_password_hash = password_hash($input['new_password'], PASSWORD_BCRYPT);\n                    $stmt = $pdo->prepare(\"UPDATE users SET password_hash = ? WHERE id = ?\");\n                    $stmt->execute([$new_password_hash, $userId]);\n\n                    echo json_encode(['success' => true, 'message' => 'Password updated successfully']);\n                    break;\n\n                case 'notifications':\n                    // Update notification preferences\n                    $stmt = $pdo->prepare(\"\n                        UPDATE expert_profiles \n                        SET notify_booking_email = ?, \n                            notify_payment_email = ?, \n                            notify_reminder_email = ?,\n                            notify_marketing_email = ?,\n                            notify_urgent_sms = ?\n                        WHERE user_id = ?\n                    \");\n                    $stmt->execute([\n                        $input['notify_booking_email'] ? 1 : 0,\n                        $input['notify_payment_email'] ? 1 : 0,\n                        $input['notify_reminder_email'] ? 1 : 0,\n                        $input['notify_marketing_email'] ? 1 : 0,\n                        $input['notify_urgent_sms'] ? 1 : 0,\n                        $userId\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Notification preferences updated successfully']);\n                    break;\n\n                case 'privacy':\n                    // Update privacy settings\n                    $stmt = $pdo->prepare(\"\n                        UPDATE expert_profiles \n                        SET show_in_search = ?, \n                            show_email = ?, \n                            accept_bookings = ?\n                        WHERE user_id = ?\n                    \");\n                    $stmt->execute([\n                        $input['show_in_search'] ? 1 : 0,\n                        $input['show_email'] ? 1 : 0,\n                        $input['accept_bookings'] ? 1 : 0,\n                        $userId\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Privacy settings updated successfully']);\n                    break;\n\n                case 'two_factor':\n                    // Update two-factor authentication\n                    $stmt = $pdo->prepare(\"\n                        UPDATE expert_profiles \n                        SET two_factor_enabled = ?\n                        WHERE user_id = ?\n                    \");\n                    $stmt->execute([\n                        $input['enabled'] ? 1 : 0,\n                        $userId\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Two-factor authentication updated successfully']);\n                    break;\n\n                case 'availability':\n                    // Add availability slot\n                    $stmt = $pdo->prepare(\"\n                        INSERT INTO expert_availability \n                        (expert_id, day_of_week, start_time, end_time, is_active)\n                        VALUES (?, ?, ?, ?, 1)\n                    \");\n                    $stmt->execute([\n                        $userId,\n                        $input['day_of_week'],\n                        $input['start_time'],\n                        $input['end_time']\n                    ]);\n\n                    echo json_encode(['success' => true, 'message' => 'Availability slot added successfully']);\n                    break;\n\n                default:\n                    http_response_code(400);\n                    echo json_encode(['success' => false, 'message' => 'Invalid section']);\n            }\n            break;\n\n        default:\n            http_response_code(405);\n            echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Settings API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":8983},"admin-panel/apis/learner/bookings.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n// Start session to get learner_id\nsession_start();\n\n// Check if learner is logged in\nif (!isset($_SESSION['learner_id'])) {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n    exit;\n}\n\n$learner_id = $_SESSION['learner_id'];\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        $status = $_GET['status'] ?? 'upcoming'; // upcoming or past\n\n        $query = \"\n            SELECT \n                b.id,\n                b.session_date,\n                b.session_time,\n                b.duration,\n                b.status,\n                b.session_notes,\n                b.amount,\n                u.id as expert_id,\n                u.name as expert_name,\n                ep.professional_title as expert_title,\n                ep.profile_photo as expert_photo\n            FROM bookings b\n            INNER JOIN users u ON b.expert_id = u.id\n            INNER JOIN expert_profiles ep ON u.id = ep.user_id\n            WHERE b.learner_id = ?\n        \";\n\n        if ($status === 'upcoming') {\n            $query .= \" AND (b.session_date > CURDATE() OR (b.session_date = CURDATE() AND b.session_time >= CURTIME()))\";\n            $query .= \" AND b.status IN ('pending', 'confirmed')\";\n        } else {\n            $query .= \" AND ((b.session_date < CURDATE() OR (b.session_date = CURDATE() AND b.session_time < CURTIME())) OR b.status = 'completed')\";\n        }\n\n        $query .= \" ORDER BY b.session_date ASC, b.session_time ASC\";\n\n        $stmt = $pdo->prepare($query);\n        $stmt->execute([$learner_id]);\n        $bookings = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        echo json_encode(['success' => true, 'data' => $bookings]);\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Learner Bookings API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":2156},"admin-panel/apis/learner/browse-experts.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        $search = $_GET['search'] ?? '';\n        $minPrice = $_GET['min_price'] ?? null;\n        $maxPrice = $_GET['max_price'] ?? null;\n        $minRating = $_GET['min_rating'] ?? null;\n        $sortBy = $_GET['sort_by'] ?? 'relevance';\n        $page = isset($_GET['page']) ? (int)$_GET['page'] : 1;\n        $limit = isset($_GET['limit']) ? (int)$_GET['limit'] : null;\n        $perPage = $limit ?? 9; // Use limit if provided, otherwise 9 experts per page\n        $offset = ($page - 1) * $perPage;\n\n        // Build query - get pricing from expert_pricing table\n        $query = \"\n            SELECT \n                u.id,\n                ep.full_name as name,\n                ep.tagline as professional_title,\n                ep.bio_short as bio,\n                ep.profile_photo,\n                ep.experience_years,\n                ep.verification_status,\n                ep.rating_average as avg_rating,\n                ep.total_reviews as review_count,\n                ep.total_sessions,\n                ep.expertise_verticals,\n                MIN(pricing.amount) as hourly_rate\n            FROM users u\n            INNER JOIN expert_profiles ep ON u.id = ep.user_id\n            LEFT JOIN expert_pricing pricing ON u.id = pricing.expert_id \n                AND pricing.pricing_type = 'per_session' \n                AND pricing.is_active = 1\n            WHERE u.role = 'expert'\n            AND ep.verification_status = 'approved'\n            AND u.status = 'active'\n        \";\n\n        $params = [];\n\n        // Add search filter\n        if (!empty($search)) {\n            $query .= \" AND (ep.full_name LIKE ? OR ep.tagline LIKE ? OR ep.bio_short LIKE ?)\";\n            $searchTerm = \"%$search%\";\n            $params[] = $searchTerm;\n            $params[] = $searchTerm;\n            $params[] = $searchTerm;\n        }\n\n        $query .= \" GROUP BY u.id, ep.full_name, ep.tagline, ep.bio_short, ep.profile_photo, \n                    ep.experience_years, ep.verification_status, ep.rating_average, \n                    ep.total_reviews, ep.total_sessions, ep.expertise_verticals\";\n\n        // Add price filter (HAVING clause after GROUP BY)\n        if ($minPrice !== null && $maxPrice !== null) {\n            $query .= \" HAVING MIN(pricing.amount) BETWEEN ? AND ?\";\n            $params[] = $minPrice;\n            $params[] = $maxPrice;\n        }\n\n        // Add rating filter\n        if ($minRating !== null) {\n            $query .= ($minPrice !== null && $maxPrice !== null ? \" AND\" : \" HAVING\") . \" ep.rating_average >= ?\";\n            $params[] = $minRating;\n        }\n\n        // Add sorting\n        switch ($sortBy) {\n            case 'price_low_high':\n                $query .= \" ORDER BY hourly_rate ASC\";\n                break;\n            case 'price_high_low':\n                $query .= \" ORDER BY hourly_rate DESC\";\n                break;\n            case 'rating':\n                $query .= \" ORDER BY ep.rating_average DESC\";\n                break;\n            case 'newest':\n            case 'latest':\n                $query .= \" ORDER BY u.id DESC\";\n                break;\n            default:\n                $query .= \" ORDER BY ep.total_sessions DESC, ep.rating_average DESC\";\n        }\n\n        // Get total count first\n        $countStmt = $pdo->prepare($query);\n        $countStmt->execute($params);\n        $totalExperts = $countStmt->rowCount();\n        \n        // Add pagination\n        $query .= \" LIMIT ? OFFSET ?\";\n        $params[] = $perPage;\n        $params[] = $offset;\n        \n        $stmt = $pdo->prepare($query);\n        $stmt->execute($params);\n        $experts = $stmt->fetchAll(PDO::FETCH_ASSOC);\n        \n        $totalPages = ceil($totalExperts / $perPage);\n\n        // Process each expert\n        foreach ($experts as &$expert) {\n            // Extract skills from expertise_verticals JSON\n            $verticals = $expert['expertise_verticals'] ? json_decode($expert['expertise_verticals'], true) : [];\n            $expert['skills'] = is_array($verticals) ? array_slice($verticals, 0, 5) : [];\n            unset($expert['expertise_verticals']);\n            \n            // Format rating\n            $expert['avg_rating'] = round((float)$expert['avg_rating'], 1);\n            \n            // Determine badge\n            if ($expert['avg_rating'] >= 4.8 && $expert['review_count'] >= 50) {\n                $expert['badge'] = 'Top Rated';\n            } elseif ($expert['total_sessions'] >= 30) {\n                $expert['badge'] = 'Expert';\n            } else {\n                $expert['badge'] = 'Mentor';\n            }\n            \n            // Ensure hourly_rate is set\n            $expert['hourly_rate'] = $expert['hourly_rate'] ?? 0;\n        }\n\n        echo json_encode([\n            'success' => true,\n            'data' => $experts,\n            'count' => count($experts),\n            'total' => $totalExperts,\n            'page' => $page,\n            'totalPages' => $totalPages\n        ]);\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Browse Experts API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":5475},"admin-panel/apis/learner/expert-profile.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        $expertId = $_GET['expert_id'] ?? null;\n\n        if (!$expertId) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n            exit;\n        }\n\n        // Get expert profile\n        $stmt = $pdo->prepare(\"\n            SELECT \n                u.id,\n                ep.full_name as name,\n                u.email,\n                ep.tagline as professional_title,\n                ep.bio_full as bio,\n                ep.profile_photo,\n                ep.experience_years,\n                ep.verification_status,\n                ep.rating_average as avg_rating,\n                ep.total_reviews as review_count,\n                ep.total_sessions,\n                ep.expertise_verticals,\n                MIN(pricing.amount) as hourly_rate\n            FROM users u\n            INNER JOIN expert_profiles ep ON u.id = ep.user_id\n            LEFT JOIN expert_pricing pricing ON u.id = pricing.expert_id \n                AND pricing.pricing_type = 'per_session' \n                AND pricing.is_active = 1\n            WHERE u.id = ? \n            AND u.role = 'expert'\n            AND ep.verification_status = 'approved'\n            AND u.status = 'active'\n            GROUP BY u.id, ep.full_name, u.email, ep.tagline, ep.bio_full, \n                     ep.profile_photo, ep.experience_years, ep.verification_status,\n                     ep.rating_average, ep.total_reviews, ep.total_sessions, ep.expertise_verticals\n        \");\n        $stmt->execute([$expertId]);\n        $expert = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if (!$expert) {\n            http_response_code(404);\n            echo json_encode(['success' => false, 'message' => 'Expert not found']);\n            exit;\n        }\n\n        // Extract skills from expertise_verticals JSON\n        $verticals = json_decode($expert['expertise_verticals'], true);\n        $expert['skills'] = is_array($verticals) ? $verticals : [];\n        unset($expert['expertise_verticals']);\n\n        // Format rating\n        $expert['avg_rating'] = round((float)$expert['avg_rating'], 1);\n        \n        // Determine badge\n        if ($expert['avg_rating'] >= 4.8 && $expert['review_count'] >= 50) {\n            $expert['badge'] = 'Top Rated';\n        } elseif ($expert['total_sessions'] >= 30) {\n            $expert['badge'] = 'Expert';\n        } else {\n            $expert['badge'] = 'Verified';\n        }\n        \n        // Ensure hourly_rate is set\n        $expert['hourly_rate'] = $expert['hourly_rate'] ?? 0;\n        \n        // Don't expose email for privacy (could add a flag check here later)\n        unset($expert['email']);\n\n        echo json_encode([\n            'success' => true,\n            'data' => $expert\n        ]);\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Expert Profile API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":3288},"admin-panel/apis/learner/payments.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n// Start session to get learner_id\nsession_start();\n\n// Check if learner is logged in\nif (!isset($_SESSION['learner_id'])) {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n    exit;\n}\n\n$learner_id = $_SESSION['learner_id'];\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        // Get recent transactions\n        $stmt = $pdo->prepare(\"\n            SELECT \n                p.id,\n                p.amount,\n                p.payment_status,\n                p.payment_method,\n                p.transaction_id,\n                p.created_at,\n                u.name as expert_name,\n                ep.professional_title as expert_title,\n                b.session_date,\n                b.session_time\n            FROM payments p\n            INNER JOIN bookings b ON p.booking_id = b.id\n            INNER JOIN users u ON b.expert_id = u.id\n            INNER JOIN expert_profiles ep ON u.id = ep.user_id\n            WHERE p.learner_id = ?\n            ORDER BY p.created_at DESC\n            LIMIT 20\n        \");\n        $stmt->execute([$learner_id]);\n        $transactions = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        // Get payment statistics\n        $statsStmt = $pdo->prepare(\"\n            SELECT \n                COUNT(*) as total_transactions,\n                SUM(CASE WHEN payment_status = 'completed' THEN amount ELSE 0 END) as total_spent,\n                SUM(CASE WHEN payment_status = 'pending' THEN amount ELSE 0 END) as pending_amount\n            FROM payments\n            WHERE learner_id = ?\n        \");\n        $statsStmt->execute([$learner_id]);\n        $stats = $statsStmt->fetch(PDO::FETCH_ASSOC);\n\n        echo json_encode([\n            'success' => true,\n            'data' => [\n                'transactions' => $transactions,\n                'stats' => $stats\n            ]\n        ]);\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Learner Payments API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":2329},"admin-panel/js/admin-api.js":{"content":"// Admin API utility with CSRF token handling\nwindow.AdminAPI = {\n    csrfToken: null,\n    \n    // Initialize CSRF token from meta tag\n    init: function() {\n        const metaTag = document.querySelector('meta[name=\"csrf-token\"]');\n        if (metaTag) {\n            this.csrfToken = metaTag.content;\n        }\n    },\n    \n    // Make API request with CSRF token\n    fetch: async function(url, options = {}) {\n        if (!this.csrfToken) {\n            this.init();\n        }\n        \n        // Add CSRF token to headers for state-changing requests\n        const method = (options.method || 'GET').toUpperCase();\n        if (['POST', 'PUT', 'DELETE', 'PATCH'].includes(method)) {\n            options.headers = options.headers || {};\n            options.headers['X-CSRF-Token'] = this.csrfToken;\n        }\n        \n        // Ensure credentials (cookies) are included\n        options.credentials = 'same-origin';\n        \n        return fetch(url, options);\n    }\n};\n\n// Initialize on page load\ndocument.addEventListener('DOMContentLoaded', function() {\n    window.AdminAPI.init();\n});\n","size_bytes":1087},"admin-panel/js/admin-logout.js":{"content":"// Admin logout handler - used across all admin pages\ndocument.addEventListener('DOMContentLoaded', function() {\n    const logoutBtn = document.getElementById('adminLogout');\n    if (logoutBtn) {\n        logoutBtn.addEventListener('click', async function() {\n            try {\n                const response = await fetch('/admin-panel/apis/admin/auth.php', {\n                    method: 'DELETE'\n                });\n                const data = await response.json();\n                if (data.success) {\n                    window.location.href = '?panel=admin&page=auth';\n                }\n            } catch (error) {\n                console.error('Logout error:', error);\n                window.location.href = '?panel=admin&page=auth';\n            }\n        });\n    }\n});\n","size_bytes":778},"admin-panel/js/expert-settings.js":{"content":"// Expert Settings JavaScript\n(function() {\n    'use strict';\n\n    // Toast notification function\n    function showToast(message, type = 'success') {\n        const toast = document.createElement('div');\n        toast.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg text-white transform transition-all duration-300 ${\n            type === 'success' ? 'bg-green-500' : 'bg-red-500'\n        }`;\n        toast.textContent = message;\n        document.body.appendChild(toast);\n\n        setTimeout(() => {\n            toast.style.opacity = '0';\n            setTimeout(() => toast.remove(), 300);\n        }, 3000);\n    }\n\n    // Settings are already loaded from PHP on page load, no need for additional AJAX loading\n\n    // Helper function to set toggle state\n    function setToggleState(id, isChecked) {\n        const toggle = document.getElementById(id);\n        if (toggle) {\n            toggle.checked = isChecked;\n        }\n    }\n\n    // Profile photo upload\n    const profilePhotoInput = document.getElementById('profilePhoto');\n    if (profilePhotoInput) {\n        profilePhotoInput.addEventListener('change', async function(e) {\n            const file = e.target.files[0];\n            if (!file) return;\n\n            const formData = new FormData();\n            formData.append('photo', file);\n\n            try {\n                const response = await fetch('/admin-panel/apis/expert/upload-photo.php', {\n                    method: 'POST',\n                    body: formData\n                });\n\n                const result = await response.json();\n                \n                if (result.success) {\n                    showToast('Profile photo updated successfully', 'success');\n                    // Update the preview image\n                    const previewImg = document.querySelector('#content-profile img');\n                    if (previewImg) {\n                        previewImg.src = result.photo_url;\n                    }\n                } else {\n                    showToast(result.message, 'error');\n                }\n            } catch (error) {\n                showToast('Failed to upload photo', 'error');\n            }\n        });\n    }\n\n    // Profile form submission\n    document.getElementById('profileForm')?.addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const formData = {\n            section: 'profile',\n            full_name: this.querySelector('input[name=\"full_name\"]')?.value || '',\n            tagline: this.querySelector('input[name=\"tagline\"]')?.value || '',\n            bio_short: this.querySelector('textarea[name=\"bio_short\"]')?.value || '',\n            bio_full: this.querySelector('textarea[name=\"bio_full\"]')?.value || '',\n            expertise_verticals: this.querySelector('input[name=\"expertise_verticals\"]')?.value || '',\n            credentials: this.querySelector('textarea[name=\"credentials\"]')?.value || '',\n            experience_years: this.querySelector('select[name=\"experience_years\"]')?.value || '',\n            timezone: this.querySelector('input[name=\"timezone\"]')?.value || 'UTC'\n        };\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(formData)\n            });\n\n            const result = await response.json();\n            showToast(result.message, result.success ? 'success' : 'error');\n            \n            if (result.success) {\n                setTimeout(() => window.location.reload(), 1500);\n            }\n        } catch (error) {\n            showToast('Failed to update profile', 'error');\n        }\n    });\n\n    // Bank form submission\n    document.getElementById('bankForm')?.addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const accountNum = this.querySelector('input[name=\"account_number\"]')?.value || '';\n        const confirmAccountNum = this.querySelector('input[name=\"account_number_confirm\"]')?.value || '';\n\n        // Check if account number is masked (starts with ****)\n        if (accountNum.startsWith('****')) {\n            showToast('Please enter your full account number to update', 'error');\n            return;\n        }\n\n        if (confirmAccountNum && accountNum !== confirmAccountNum) {\n            showToast('Account numbers do not match', 'error');\n            return;\n        }\n\n        const formData = {\n            section: 'bank',\n            account_holder_name: this.querySelector('input[name=\"account_holder_name\"]')?.value || '',\n            bank_name: this.querySelector('input[name=\"bank_name\"]')?.value || '',\n            branch_name: this.querySelector('input[name=\"branch_name\"]')?.value || '',\n            account_number: accountNum,\n            ifsc_code: this.querySelector('input[name=\"ifsc_code\"]')?.value || '',\n            account_type: this.querySelector('select[name=\"account_type\"]')?.value || ''\n        };\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(formData)\n            });\n\n            const result = await response.json();\n            showToast(result.message, result.success ? 'success' : 'error');\n            \n            if (result.success) {\n                setTimeout(() => window.location.reload(), 1500);\n            }\n        } catch (error) {\n            showToast('Failed to update bank details', 'error');\n        }\n    });\n\n    // Password form submission\n    document.getElementById('passwordForm')?.addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const currentPassword = this.querySelectorAll('input[type=\"password\"]')[0].value;\n        const newPassword = this.querySelectorAll('input[type=\"password\"]')[1].value;\n        const confirmPassword = this.querySelectorAll('input[type=\"password\"]')[2].value;\n\n        if (newPassword !== confirmPassword) {\n            showToast('New passwords do not match', 'error');\n            return;\n        }\n\n        if (newPassword.length < 6) {\n            showToast('Password must be at least 6 characters', 'error');\n            return;\n        }\n\n        const formData = {\n            section: 'password',\n            current_password: currentPassword,\n            new_password: newPassword\n        };\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(formData)\n            });\n\n            const result = await response.json();\n            showToast(result.message, result.success ? 'success' : 'error');\n            \n            if (result.success) {\n                this.reset();\n            }\n        } catch (error) {\n            showToast('Failed to update password', 'error');\n        }\n    });\n\n    // Toggle change handler for privacy settings\n    async function handleToggleChange(section, setting, value) {\n        const data = { section };\n        data[setting] = value;\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(data)\n            });\n\n            const result = await response.json();\n            if (result.success) {\n                showToast('Setting updated', 'success');\n            } else {\n                showToast(result.message, 'error');\n            }\n        } catch (error) {\n            showToast('Failed to update setting', 'error');\n        }\n    }\n\n    // Privacy toggles\n    const privacyToggles = [\n        { id: 'privacy-show-search', setting: 'show_in_search' },\n        { id: 'privacy-show-email', setting: 'show_email' },\n        { id: 'privacy-accept-bookings', setting: 'accept_bookings' }\n    ];\n\n    privacyToggles.forEach(({ id, setting }) => {\n        const toggle = document.getElementById(id);\n        if (toggle) {\n            toggle.addEventListener('change', function() {\n                handleToggleChange('privacy', setting, this.checked);\n            });\n        }\n    });\n\n    // Two-factor authentication toggle\n    const twoFactorToggle = document.getElementById('two-factor');\n    if (twoFactorToggle) {\n        twoFactorToggle.addEventListener('change', async function() {\n            const data = {\n                section: 'two_factor',\n                enabled: this.checked\n            };\n\n            try {\n                const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                    method: 'PUT',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(data)\n                });\n\n                const result = await response.json();\n                showToast(result.message, result.success ? 'success' : 'error');\n            } catch (error) {\n                showToast('Failed to update two-factor authentication', 'error');\n            }\n        });\n    }\n\n    // Notification preferences save button\n    const notifSaveBtn = document.querySelector('#content-notifications button');\n    if (notifSaveBtn) {\n        notifSaveBtn.addEventListener('click', async function() {\n            const data = {\n                section: 'notifications',\n                notify_booking_email: document.getElementById('notify-booking')?.checked || false,\n                notify_payment_email: document.getElementById('notify-payment')?.checked || false,\n                notify_reminder_email: document.getElementById('notify-reminder')?.checked || false,\n                notify_marketing_email: document.getElementById('notify-marketing')?.checked || false,\n                notify_urgent_sms: document.getElementById('notify-sms')?.checked || false\n            };\n\n            try {\n                const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                    method: 'PUT',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(data)\n                });\n\n                const result = await response.json();\n                showToast(result.message, result.success ? 'success' : 'error');\n            } catch (error) {\n                showToast('Failed to update notification preferences', 'error');\n            }\n        });\n    }\n\n    // Privacy settings save button\n    const privacySaveBtn = document.querySelector('#content-privacy > div > button:last-child');\n    if (privacySaveBtn) {\n        privacySaveBtn.addEventListener('click', async function() {\n            const data = {\n                section: 'privacy',\n                show_in_search: document.getElementById('privacy-show-search')?.checked || false,\n                show_email: document.getElementById('privacy-show-email')?.checked || false,\n                accept_bookings: document.getElementById('privacy-accept-bookings')?.checked || false\n            };\n\n            try {\n                const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                    method: 'PUT',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(data)\n                });\n\n                const result = await response.json();\n                showToast(result.message, result.success ? 'success' : 'error');\n            } catch (error) {\n                showToast('Failed to update privacy settings', 'error');\n            }\n        });\n    }\n\n    // Availability form submission\n    document.getElementById('availabilityForm')?.addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const formData = {\n            section: 'availability',\n            day_of_week: this.querySelector('select[name=\"day_of_week\"]')?.value || '',\n            start_time: this.querySelector('input[name=\"start_time\"]')?.value || '',\n            end_time: this.querySelector('input[name=\"end_time\"]')?.value || ''\n        };\n\n        if (!formData.day_of_week || !formData.start_time || !formData.end_time) {\n            showToast('Please fill in all fields', 'error');\n            return;\n        }\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/settings.php', {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(formData)\n            });\n\n            const result = await response.json();\n            showToast(result.message, result.success ? 'success' : 'error');\n            \n            if (result.success) {\n                this.reset();\n                setTimeout(() => window.location.reload(), 1500);\n            }\n        } catch (error) {\n            showToast('Failed to add availability', 'error');\n        }\n    });\n\n    // Settings are already loaded from PHP, no DOMContentLoaded listener needed\n})();\n","size_bytes":13204},"admin-panel/js/learner-browse-experts.js":{"content":"(function() {\n    'use strict';\n\n    let experts = [];\n    let currentPage = 1;\n    let totalPages = 1;\n    let filters = {\n        search: '',\n        category: '',\n        minPrice: null,\n        maxPrice: null,\n        minRating: null,\n        sortBy: 'relevance'\n    };\n\n    // Load experts\n    async function loadExperts(page = 1) {\n        const params = new URLSearchParams();\n        if (filters.search) params.append('search', filters.search);\n        if (filters.category) params.append('category', filters.category);\n        if (filters.minPrice) params.append('min_price', filters.minPrice);\n        if (filters.maxPrice) params.append('max_price', filters.maxPrice);\n        if (filters.minRating) params.append('min_rating', filters.minRating);\n        if (filters.sortBy) params.append('sort_by', filters.sortBy);\n        params.append('page', page);\n\n        // Show AI loader\n        const loader = document.getElementById('ai-loader');\n        const grid = document.getElementById('experts-grid');\n        if (loader && grid) {\n            loader.classList.remove('hidden');\n            grid.classList.add('hidden');\n        }\n\n        try {\n            const response = await fetch('/admin-panel/apis/learner/browse-experts.php?' + params.toString());\n            const result = await response.json();\n\n            if (result.success) {\n                experts = result.data;\n                currentPage = result.page;\n                totalPages = result.totalPages;\n                renderExperts();\n                updateResultCount(result.total);\n                renderPagination();\n            } else {\n                console.error('Error loading experts:', result.message);\n                document.getElementById('experts-grid').innerHTML = '<div class=\"col-span-full text-center py-12\"><p class=\"text-gray-500\">Error loading experts. Please try again.</p></div>';\n            }\n        } catch (error) {\n            console.error('Error:', error);\n            document.getElementById('experts-grid').innerHTML = '<div class=\"col-span-full text-center py-12\"><p class=\"text-gray-500\">Error loading experts. Please try again.</p></div>';\n        } finally {\n            // Hide AI loader and show grid\n            if (loader && grid) {\n                loader.classList.add('hidden');\n                grid.classList.remove('hidden');\n            }\n        }\n    }\n\n    // Escape HTML to prevent XSS\n    function escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n\n    // Render experts\n    function renderExperts() {\n        const container = document.getElementById('experts-grid');\n        if (!container) return;\n\n        if (experts.length === 0) {\n            container.innerHTML = `\n                <div class=\"col-span-full text-center py-12\">\n                    <p class=\"text-gray-500 text-lg\">No experts found. Try adjusting your filters.</p>\n                </div>\n            `;\n            return;\n        }\n\n        container.innerHTML = experts.map(expert => `\n            <div class=\"bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition duration-300 border border-gray-100\">\n                <div class=\"relative\">\n                    <div class=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 pb-3\">\n                        <div class=\"flex items-center\">\n                            <div class=\"relative rounded-full overflow-hidden border-4 border-white shadow-lg\" style=\"width: 64px; height: 64px;\">\n                                <img src=\"${escapeHtml(expert.profile_photo || 'attached_assets/stock_images/diverse_professional_1d96e39f.jpg')}\" \n                                     alt=\"${escapeHtml(expert.name)}\" \n                                     class=\"w-full h-full object-cover\">\n                                <div class=\"absolute -bottom-1 -right-1 bg-green-500 w-5 h-5 rounded-full border-2 border-white\"></div>\n                            </div>\n                            <div class=\"ml-4 flex-1\">\n                                <h3 class=\"font-bold text-lg text-gray-900\">${escapeHtml(expert.name)}</h3>\n                                <p class=\"text-blue-600 font-medium text-sm\">${escapeHtml(expert.professional_title || 'Expert')}</p>\n                                <div class=\"flex items-center mt-1\">\n                                    <div class=\"flex text-yellow-400 text-sm\">\n                                        ${'★'.repeat(Math.floor(expert.avg_rating))}${'☆'.repeat(5 - Math.floor(expert.avg_rating))}\n                                    </div>\n                                    <span class=\"text-gray-600 text-xs ml-2\">(${escapeHtml(String(expert.avg_rating))}) • ${escapeHtml(String(expert.review_count))} reviews</span>\n                                </div>\n                            </div>\n                            <span class=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium\">${escapeHtml(expert.badge)}</span>\n                        </div>\n                    </div>\n                    <div class=\"p-6 pt-4\">\n                        <p class=\"text-gray-700 text-sm mb-4 leading-relaxed line-clamp-3\">${escapeHtml(expert.bio || 'Experienced professional ready to help you achieve your goals.')}</p>\n                        <div class=\"flex flex-wrap gap-2 mb-5\">\n                            ${expert.skills.slice(0, 3).map(skill => `\n                                <span class=\"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium\">${escapeHtml(skill)}</span>\n                            `).join('')}\n                            ${expert.skills.length > 3 ? `<span class=\"px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full font-medium\">+${expert.skills.length - 3} more</span>` : ''}\n                        </div>\n                        <div class=\"flex justify-between items-center\">\n                            <div>\n                                <span class=\"text-2xl font-bold text-gray-900\">₹${escapeHtml(String(expert.hourly_rate || 0))}</span>\n                                <span class=\"text-gray-600 text-sm\">/hour</span>\n                            </div>\n                            <a href=\"?panel=learner&page=expert-profile&expert_id=${encodeURIComponent(expert.id)}\" \n                               class=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition duration-200 text-sm font-medium shadow-md hover:shadow-lg\">\n                                View Profile\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `).join('');\n    }\n\n    // Update result count\n    function updateResultCount(total) {\n        const text = `Showing ${experts.length} of ${total} expert${total !== 1 ? 's' : ''}`;\n        \n        const countElement = document.getElementById('result-count');\n        if (countElement) {\n            countElement.textContent = text;\n        }\n        \n        const mobileCountElement = document.getElementById('result-count-mobile');\n        if (mobileCountElement) {\n            mobileCountElement.textContent = text;\n        }\n    }\n\n    // Render pagination\n    function renderPagination() {\n        const paginationContainer = document.querySelector('nav.flex.space-x-2');\n        if (!paginationContainer) return;\n\n        let paginationHTML = '';\n\n        // Previous button\n        paginationHTML += `\n            <button onclick=\"changePage(${currentPage - 1})\" \n                    ${currentPage === 1 ? 'disabled' : ''} \n                    class=\"px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}\">\n                Previous\n            </button>\n        `;\n\n        // Page numbers\n        const maxVisible = 5;\n        let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));\n        let endPage = Math.min(totalPages, startPage + maxVisible - 1);\n\n        if (endPage - startPage < maxVisible - 1) {\n            startPage = Math.max(1, endPage - maxVisible + 1);\n        }\n\n        if (startPage > 1) {\n            paginationHTML += `<button onclick=\"changePage(1)\" class=\"px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">1</button>`;\n            if (startPage > 2) {\n                paginationHTML += `<span class=\"px-3 py-2\">...</span>`;\n            }\n        }\n\n        for (let i = startPage; i <= endPage; i++) {\n            paginationHTML += `\n                <button onclick=\"changePage(${i})\" \n                        class=\"px-3 py-2 ${i === currentPage ? 'text-white bg-primary border-primary' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50'} border rounded-lg\">\n                    ${i}\n                </button>\n            `;\n        }\n\n        if (endPage < totalPages) {\n            if (endPage < totalPages - 1) {\n                paginationHTML += `<span class=\"px-3 py-2\">...</span>`;\n            }\n            paginationHTML += `<button onclick=\"changePage(${totalPages})\" class=\"px-3 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\">${totalPages}</button>`;\n        }\n\n        // Next button\n        paginationHTML += `\n            <button onclick=\"changePage(${currentPage + 1})\" \n                    ${currentPage === totalPages ? 'disabled' : ''} \n                    class=\"px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}\">\n                Next\n            </button>\n        `;\n\n        paginationContainer.innerHTML = paginationHTML;\n    }\n\n    // Change page function (global)\n    window.changePage = function(page) {\n        if (page >= 1 && page <= totalPages && page !== currentPage) {\n            loadExperts(page);\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n    }\n\n    // Event listeners\n    document.addEventListener('DOMContentLoaded', function() {\n        // Load experts on page load\n        loadExperts();\n\n        // Helper function to handle price filter\n        function handlePriceFilter(value) {\n            switch(value) {\n                case 'under_500':\n                    filters.minPrice = 0;\n                    filters.maxPrice = 500;\n                    break;\n                case '500_1000':\n                    filters.minPrice = 500;\n                    filters.maxPrice = 1000;\n                    break;\n                case '1000_2000':\n                    filters.minPrice = 1000;\n                    filters.maxPrice = 2000;\n                    break;\n                case '2000_plus':\n                    filters.minPrice = 2000;\n                    filters.maxPrice = 999999;\n                    break;\n                default:\n                    filters.minPrice = null;\n                    filters.maxPrice = null;\n            }\n            currentPage = 1;\n            loadExperts(1);\n        }\n\n        // Helper function to handle rating filter\n        function handleRatingFilter(value) {\n            if (value === '4plus') {\n                filters.minRating = 4;\n            } else if (value === '4.5plus') {\n                filters.minRating = 4.5;\n            } else {\n                filters.minRating = null;\n            }\n            currentPage = 1;\n            loadExperts(1);\n        }\n\n        // Desktop Search input (with debounce)\n        const searchInput = document.getElementById('search-input');\n        let searchTimeout;\n        if (searchInput) {\n            searchInput.addEventListener('input', function() {\n                clearTimeout(searchTimeout);\n                searchTimeout = setTimeout(() => {\n                    filters.search = this.value;\n                    currentPage = 1;\n                    loadExperts(1);\n                }, 500);\n            });\n        }\n\n        // Mobile Search input (with debounce)\n        const mobileSearchInput = document.getElementById('mobile-search-input');\n        if (mobileSearchInput) {\n            mobileSearchInput.addEventListener('input', function() {\n                clearTimeout(searchTimeout);\n                searchTimeout = setTimeout(() => {\n                    filters.search = this.value;\n                    currentPage = 1;\n                    loadExperts(1);\n                }, 500);\n            });\n        }\n\n        // Desktop Price select\n        const priceSelect = document.getElementById('price-select');\n        if (priceSelect) {\n            priceSelect.addEventListener('change', function() {\n                handlePriceFilter(this.value);\n            });\n        }\n\n        // Mobile Price select\n        const mobilePriceSelect = document.getElementById('mobile-price-select');\n        if (mobilePriceSelect) {\n            mobilePriceSelect.addEventListener('change', function() {\n                handlePriceFilter(this.value);\n            });\n        }\n\n        // Desktop Rating select\n        const ratingSelect = document.getElementById('rating-select');\n        if (ratingSelect) {\n            ratingSelect.addEventListener('change', function() {\n                handleRatingFilter(this.value);\n            });\n        }\n\n        // Mobile Rating select\n        const mobileRatingSelect = document.getElementById('mobile-rating-select');\n        if (mobileRatingSelect) {\n            mobileRatingSelect.addEventListener('change', function() {\n                handleRatingFilter(this.value);\n            });\n        }\n\n        // Desktop Category select\n        const categorySelect = document.getElementById('category-select');\n        if (categorySelect) {\n            categorySelect.addEventListener('change', function() {\n                filters.category = this.value === 'All Categories' ? '' : this.value;\n                currentPage = 1;\n                loadExperts(1);\n            });\n        }\n\n        // Mobile Category select\n        const mobileCategorySelect = document.getElementById('mobile-category-select');\n        if (mobileCategorySelect) {\n            mobileCategorySelect.addEventListener('change', function() {\n                filters.category = this.value === 'All Categories' ? '' : this.value;\n                currentPage = 1;\n                loadExperts(1);\n            });\n        }\n\n        // Sort by\n        const sortSelect = document.getElementById('sort-select');\n        if (sortSelect) {\n            sortSelect.addEventListener('change', function() {\n                filters.sortBy = this.value;\n                currentPage = 1;\n                loadExperts(1);\n            });\n        }\n    });\n})();\n","size_bytes":14800},"admin/admin-bookings.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Bookings Management - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Bookings Management</h1>\n        <p class=\"text-gray-600 mt-1\">View and manage all session bookings</p>\n    </div>\n\n    <div class=\"p-6\">\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\n            <div class=\"flex items-center space-x-4\">\n                <select id=\"status-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Status</option>\n                    <option value=\"pending\">Pending</option>\n                    <option value=\"confirmed\">Confirmed</option>\n                    <option value=\"completed\">Completed</option>\n                    <option value=\"cancelled\">Cancelled</option>\n                </select>\n                <button onclick=\"loadBookings()\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600\">Apply Filters</button>\n            </div>\n        </div>\n\n        <!-- Bookings Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                    <tr>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ID</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Learner</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Expert</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Session Date</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Duration</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Amount</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"bookings-table-body\" class=\"bg-white divide-y divide-gray-200\">\n                    <tr>\n                        <td colspan=\"8\" class=\"px-6 py-4 text-center text-gray-500\">Loading bookings...</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n<script>\n// Load bookings\nasync function loadBookings() {\n    const status = document.getElementById('status-filter').value;\n    \n    try {\n        let url = '/admin-panel/apis/admin/bookings.php?';\n        if (status) url += `status=${status}`;\n        \n        const response = await fetch(url);\n        const data = await response.json();\n        \n        if (data.success) {\n            const tbody = document.getElementById('bookings-table-body');\n            \n            if (data.bookings.length === 0) {\n                tbody.innerHTML = '<tr><td colspan=\"8\" class=\"px-6 py-4 text-center text-gray-500\">No bookings found</td></tr>';\n                return;\n            }\n            \n            tbody.innerHTML = data.bookings.map(booking => `\n                <tr>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">#${booking.id}</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <div class=\"text-sm font-medium text-gray-900\">${booking.learner_name || 'N/A'}</div>\n                        <div class=\"text-sm text-gray-500\">${booking.learner_email || ''}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <div class=\"text-sm font-medium text-gray-900\">${booking.expert_name || 'N/A'}</div>\n                        <div class=\"text-sm text-gray-500\">${booking.expert_email || ''}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        ${new Date(booking.session_datetime).toLocaleString()}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">${booking.duration_minutes} min</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">$${booking.amount || '0'}</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <span class=\"px-2 py-1 text-xs rounded-full ${\n                            booking.status === 'confirmed' ? 'bg-blue-100 text-blue-800' :\n                            booking.status === 'completed' ? 'bg-green-100 text-green-800' :\n                            booking.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n                            'bg-yellow-100 text-yellow-800'\n                        }\">\n                            ${booking.status}\n                        </span>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <button onclick=\"viewBooking(${booking.id})\" class=\"text-primary hover:text-blue-700\">View</button>\n                    </td>\n                </tr>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading bookings:', error);\n    }\n}\n\nfunction viewBooking(id) {\n    alert('Viewing booking #' + id + ' - Full details page to be implemented');\n}\n\n// Load bookings on page load\nloadBookings();\n</script>\n\n</div> <!-- Close admin-sidebar main content div -->\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":5821},"admin/admin-kyc-verification.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"KYC Verification - Admin Panel - Nexpert.ai\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n<div class=\"flex-1 p-8\">\n    <!-- Header -->\n    <div class=\"mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">KYC Verification Management</h1>\n        <p class=\"text-gray-600\">Review and approve expert identity verification requests</p>\n    </div>\n\n    <!-- Filter Tabs -->\n    <div class=\"bg-white rounded-lg shadow-lg p-4 mb-6\">\n        <div class=\"flex space-x-4\">\n            <button onclick=\"filterKYC('all')\" id=\"filter-all\" class=\"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition\">\n                All Requests\n            </button>\n            <button onclick=\"filterKYC('pending')\" id=\"filter-pending\" class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\n                Pending Review\n            </button>\n            <button onclick=\"filterKYC('approved')\" id=\"filter-approved\" class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\n                Approved\n            </button>\n            <button onclick=\"filterKYC('rejected')\" id=\"filter-rejected\" class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\n                Rejected\n            </button>\n        </div>\n    </div>\n\n    <!-- KYC Requests Table -->\n    <div class=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n        <table class=\"min-w-full divide-y divide-gray-200\">\n            <thead class=\"bg-gray-50\">\n                <tr>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Expert Name</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Email</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Submitted</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                </tr>\n            </thead>\n            <tbody id=\"kycTableBody\" class=\"bg-white divide-y divide-gray-200\">\n                <!-- Data will be loaded via JavaScript -->\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<!-- KYC Details Modal -->\n<div id=\"kycModal\" class=\"fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50\">\n    <div class=\"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div class=\"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center\">\n            <h2 class=\"text-2xl font-semibold text-gray-900\">KYC Details</h2>\n            <button onclick=\"closeModal()\" class=\"text-gray-400 hover:text-gray-600\">\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n            </button>\n        </div>\n        \n        <div id=\"kycModalContent\" class=\"p-6\">\n            <!-- Content loaded dynamically -->\n        </div>\n\n        <div class=\"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end space-x-4 border-t\">\n            <button onclick=\"rejectKYC()\" class=\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition font-semibold\">\n                Reject\n            </button>\n            <button onclick=\"approveKYC()\" class=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-semibold\">\n                Approve\n            </button>\n            <button onclick=\"closeModal()\" class=\"bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-semibold\">\n                Close\n            </button>\n        </div>\n    </div>\n</div>\n\n<script src=\"/admin-panel/js/admin-api.js\"></script>\n<script>\nlet currentKYCId = null;\nlet currentFilter = 'all';\n\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\n// Load KYC data\nasync function loadKYC(filter = 'all') {\n    const tbody = document.getElementById('kycTableBody');\n    try {\n        const url = '/admin-panel/apis/admin/kyc.php' + (filter !== 'all' ? `?status=${filter}` : '');\n        const response = await window.AdminAPI.fetch(url);\n        const text = await response.text();\n        console.log('API Response Text:', text);\n        \n        let data;\n        try {\n            data = JSON.parse(text);\n        } catch (e) {\n            tbody.innerHTML = `<tr><td colspan=\"5\" class=\"px-6 py-12 text-center text-red-500\">\n                <div class=\"font-bold mb-2\">JSON Parse Error</div>\n                <div class=\"text-sm whitespace-pre-wrap\">${escapeHtml(text.substring(0, 500))}</div>\n            </td></tr>`;\n            return;\n        }\n        \n        console.log('Parsed Data:', data);\n        \n        if (data.success) {\n            displayKYC(data.data);\n        } else {\n            tbody.innerHTML = `<tr><td colspan=\"5\" class=\"px-6 py-12 text-center text-red-500\">\n                <div class=\"font-bold mb-2\">API Error</div>\n                <div>${escapeHtml(data.message || 'Unknown error')}</div>\n            </td></tr>`;\n        }\n    } catch (error) {\n        console.error('Error:', error);\n        tbody.innerHTML = `<tr><td colspan=\"5\" class=\"px-6 py-12 text-center text-red-500\">\n            <div class=\"font-bold mb-2\">Network Error</div>\n            <div>${escapeHtml(error.message)}</div>\n        </td></tr>`;\n    }\n}\n\n// Display KYC data in table\nfunction displayKYC(data) {\n    const tbody = document.getElementById('kycTableBody');\n    \n    if (!data || data.length === 0) {\n        tbody.innerHTML = '<tr><td colspan=\"5\" class=\"px-6 py-12 text-center text-gray-500\">No experts found</td></tr>';\n        return;\n    }\n    \n    tbody.innerHTML = data.map(expert => `\n        <tr>\n            <td class=\"px-6 py-4 whitespace-nowrap\">\n                <div class=\"font-medium text-gray-900\">${escapeHtml(expert.full_name || 'N/A')}</div>\n            </td>\n            <td class=\"px-6 py-4 whitespace-nowrap text-gray-900\">${escapeHtml(expert.email || 'N/A')}</td>\n            <td class=\"px-6 py-4 whitespace-nowrap text-gray-600\">${expert.created_at ? new Date(expert.created_at).toLocaleDateString() : 'N/A'}</td>\n            <td class=\"px-6 py-4 whitespace-nowrap\">\n                <span class=\"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full\n                    ${expert.verification_status === 'approved' ? 'bg-green-100 text-green-800' : ''}\n                    ${expert.verification_status === 'pending' ? 'bg-yellow-100 text-yellow-800' : ''}\n                    ${expert.verification_status === 'rejected' ? 'bg-red-100 text-red-800' : ''}\n                \">\n                    ${escapeHtml((expert.verification_status || 'pending').charAt(0).toUpperCase() + (expert.verification_status || 'pending').slice(1))}\n                </span>\n            </td>\n            <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                <button onclick=\"viewKYC(${expert.user_id})\" class=\"text-primary hover:text-secondary font-semibold\">View Details</button>\n            </td>\n        </tr>\n    `).join('');\n}\n\n// View expert details\nasync function viewKYC(expertId) {\n    currentKYCId = expertId;\n    \n    try {\n        const response = await window.AdminAPI.fetch(`/admin-panel/apis/admin/kyc.php?expert_id=${expertId}`);\n        const data = await response.json();\n        \n        if (data.success && data.data) {\n            const expert = data.data;\n            const verticals = Array.isArray(expert.expertise_verticals) ? expert.expertise_verticals : [];\n            \n            const statusColor = expert.verification_status === 'approved' ? 'green' : \n                               expert.verification_status === 'rejected' ? 'red' : 'yellow';\n            \n            document.getElementById('kycModalContent').innerHTML = `\n                <div class=\"space-y-6\">\n                    <!-- KYC Verification Status -->\n                    <div class=\"bg-${statusColor}-50 border-2 border-${statusColor}-200 rounded-lg p-4\">\n                        <div class=\"flex items-center justify-between\">\n                            <div>\n                                <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">Verification Status</h3>\n                                <span class=\"px-4 py-2 inline-flex text-sm font-semibold rounded-full bg-${statusColor}-100 text-${statusColor}-800\">\n                                    ${escapeHtml((expert.verification_status || 'pending').toUpperCase())}\n                                </span>\n                            </div>\n                            ${expert.verified_at ? `\n                            <div class=\"text-right\">\n                                <p class=\"text-sm text-gray-600\">Verified On</p>\n                                <p class=\"font-semibold text-gray-900\">${new Date(expert.verified_at).toLocaleDateString()}</p>\n                            </div>\n                            ` : ''}\n                        </div>\n                    </div>\n\n                    <!-- Expert Identity Information -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Identity Information</h3>\n                        <div class=\"grid md:grid-cols-2 gap-4\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Legal Name</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.full_legal_name || expert.full_name || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Date of Birth</p>\n                                <p class=\"font-semibold text-gray-900\">${expert.date_of_birth ? new Date(expert.date_of_birth).toLocaleDateString() : 'N/A'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Nationality</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.nationality || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Gender</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.gender || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Email</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.email || 'N/A')}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Phone</p>\n                                <p class=\"font-semibold text-gray-900\">${escapeHtml(expert.phone || 'N/A')}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Address Information -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Address Information</h3>\n                        <div class=\"bg-gray-50 p-4 rounded-lg space-y-2\">\n                            <p class=\"text-gray-900\">${escapeHtml(expert.address_line1 || 'Address not provided')}</p>\n                            ${expert.address_line2 ? `<p class=\"text-gray-900\">${escapeHtml(expert.address_line2)}</p>` : ''}\n                            <p class=\"text-gray-900\">${escapeHtml(expert.city || '')}, ${escapeHtml(expert.state || '')} ${escapeHtml(expert.postal_code || '')}</p>\n                            <p class=\"text-gray-900\">${escapeHtml(expert.country || '')}</p>\n                        </div>\n                    </div>\n\n                    <!-- KYC Documents -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">📄 KYC Documents</h3>\n                        ${expert.id_document_path ? `\n                        <div class=\"bg-blue-50 border border-blue-200 p-4 rounded-lg\">\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"text-sm font-medium text-gray-700 mb-1\">${escapeHtml(expert.id_document_type || 'Government ID')} Document</p>\n                                    <p class=\"text-xs text-gray-500\">ID Number: ${escapeHtml(expert.id_number || 'Not provided')}</p>\n                                </div>\n                                <a href=\"${escapeHtml(expert.id_document_path)}\" target=\"_blank\" rel=\"noopener noreferrer\" \n                                   class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition\">\n                                    View Document\n                                </a>\n                            </div>\n                        </div>\n                        ` : `\n                        <div class=\"bg-gray-50 p-4 rounded-lg text-center text-gray-500\">\n                            <p>No KYC documents uploaded yet</p>\n                        </div>\n                        `}\n                    </div>\n\n                    <!-- Professional Qualifications -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Professional Qualifications</h3>\n                        <div class=\"space-y-3\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Expertise Areas</p>\n                                <p class=\"text-gray-900\">${verticals.length > 0 ? verticals.join(', ') : 'Not specified'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Years of Experience</p>\n                                <p class=\"text-gray-900\">${expert.experience_years || 'Not specified'}</p>\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Credentials</p>\n                                <p class=\"text-gray-900\">${escapeHtml(expert.credentials || 'Not specified')}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Professional Links for Verification -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Professional Links</h3>\n                        <div class=\"grid md:grid-cols-2 gap-4\">\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">LinkedIn Profile</p>\n                                ${expert.linkedin_url ? `<a href=\"${escapeHtml(expert.linkedin_url)}\" target=\"_blank\" class=\"text-primary hover:underline break-all\">${escapeHtml(expert.linkedin_url)}</a>` : '<p class=\"text-gray-400\">Not provided</p>'}\n                            </div>\n                            <div class=\"bg-gray-50 p-4 rounded-lg\">\n                                <p class=\"text-sm text-gray-600 mb-1\">Website</p>\n                                ${expert.website_url ? `<a href=\"${escapeHtml(expert.website_url)}\" target=\"_blank\" class=\"text-primary hover:underline break-all\">${escapeHtml(expert.website_url)}</a>` : '<p class=\"text-gray-400\">Not provided</p>'}\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Admin Review Notes -->\n                    ${expert.admin_notes ? `\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">📝 Admin Review Notes</h3>\n                        <div class=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg\">\n                            <p class=\"text-gray-900\">${escapeHtml(expert.admin_notes)}</p>\n                        </div>\n                    </div>\n                    ` : ''}\n                </div>\n            `;\n            \n            document.getElementById('kycModal').classList.remove('hidden');\n            document.getElementById('kycModal').classList.add('flex');\n        } else {\n            console.error('API Error:', data.message);\n            alert('Error: ' + (data.message || 'Failed to load expert details'));\n        }\n    } catch (error) {\n        console.error('Error:', error);\n        alert('Error loading expert details');\n    }\n}\n\n// Approve expert\nasync function approveKYC() {\n    if (!currentKYCId) return;\n    \n    const notes = prompt('Add review notes (optional):');\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/kyc.php', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                expert_id: currentKYCId,\n                status: 'approved',\n                notes: notes\n            })\n        });\n        const data = await response.json();\n        \n        if (data.success) {\n            alert('Expert approved successfully!');\n            closeModal();\n            loadKYC(currentFilter);\n        } else {\n            alert('Error: ' + (data.message || 'Unknown error'));\n        }\n    } catch (error) {\n        console.error('Error:', error);\n        alert('Error approving expert');\n    }\n}\n\n// Reject expert\nasync function rejectKYC() {\n    if (!currentKYCId) return;\n    \n    const reason = prompt('Enter rejection reason (required):');\n    \n    if (!reason) {\n        alert('Please provide a rejection reason');\n        return;\n    }\n    \n    try {\n        const response = await window.AdminAPI.fetch('/admin-panel/apis/admin/kyc.php', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                expert_id: currentKYCId,\n                status: 'rejected',\n                notes: reason\n            })\n        });\n        const data = await response.json();\n        \n        if (data.success) {\n            alert('Expert rejected successfully!');\n            closeModal();\n            loadKYC(currentFilter);\n        } else {\n            alert('Error: ' + (data.message || 'Unknown error'));\n        }\n    } catch (error) {\n        console.error('Error:', error);\n        alert('Error rejecting expert');\n    }\n}\n\n// Close modal\nfunction closeModal() {\n    document.getElementById('kycModal').classList.add('hidden');\n    document.getElementById('kycModal').classList.remove('flex');\n    currentKYCId = null;\n}\n\n// Filter KYC\nfunction filterKYC(status) {\n    currentFilter = status;\n    \n    // Update button states\n    document.querySelectorAll('[id^=\"filter-\"]').forEach(btn => {\n        btn.classList.remove('bg-primary', 'text-white');\n        btn.classList.add('bg-gray-200', 'text-gray-700');\n    });\n    document.getElementById(`filter-${status}`).classList.remove('bg-gray-200', 'text-gray-700');\n    document.getElementById(`filter-${status}`).classList.add('bg-primary', 'text-white');\n    \n    loadKYC(status);\n}\n\n// Load data on page load\nloadKYC();\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":19993},"admin/admin-payments.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Payments Management - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Payments & Transactions</h1>\n        <p class=\"text-gray-600 mt-1\">Monitor and manage all platform transactions</p>\n    </div>\n\n    <div class=\"p-6\">\n        <!-- Stats Grid -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <p class=\"text-gray-600 text-sm\">Total Revenue</p>\n                <p class=\"text-3xl font-bold text-gray-900\" id=\"total-revenue\">$0</p>\n            </div>\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <p class=\"text-gray-600 text-sm\">Platform Commission</p>\n                <p class=\"text-3xl font-bold text-gray-900\" id=\"total-commission\">$0</p>\n            </div>\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <p class=\"text-gray-600 text-sm\">Pending Payments</p>\n                <p class=\"text-3xl font-bold text-gray-900\" id=\"pending-amount\">$0</p>\n            </div>\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <p class=\"text-gray-600 text-sm\">Total Refunds</p>\n                <p class=\"text-3xl font-bold text-gray-900\" id=\"total-refunds\">$0</p>\n            </div>\n        </div>\n\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\n            <div class=\"flex items-center space-x-4\">\n                <select id=\"status-filter\" class=\"px-4 py-2 border border-gray-300 rounded-lg\">\n                    <option value=\"\">All Status</option>\n                    <option value=\"pending\">Pending</option>\n                    <option value=\"success\">Success</option>\n                    <option value=\"failed\">Failed</option>\n                    <option value=\"refunded\">Refunded</option>\n                </select>\n                <button onclick=\"loadPayments()\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600\">Apply Filters</button>\n            </div>\n        </div>\n\n        <!-- Payments Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                    <tr>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ID</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Learner</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Expert</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Amount</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Commission</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Date</th>\n                        <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"payments-table-body\" class=\"bg-white divide-y divide-gray-200\">\n                    <tr>\n                        <td colspan=\"8\" class=\"px-6 py-4 text-center text-gray-500\">Loading payments...</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n<script>\n// Load payments\nasync function loadPayments() {\n    const status = document.getElementById('status-filter').value;\n    \n    try {\n        let url = '/admin-panel/apis/admin/payments.php?';\n        if (status) url += `status=${status}`;\n        \n        const response = await fetch(url);\n        const data = await response.json();\n        \n        if (data.success) {\n            // Update stats\n            if (data.stats) {\n                document.getElementById('total-revenue').textContent = '$' + (parseFloat(data.stats.total_revenue) || 0).toFixed(2);\n                document.getElementById('total-commission').textContent = '$' + (parseFloat(data.stats.total_commission) || 0).toFixed(2);\n                document.getElementById('pending-amount').textContent = '$' + (parseFloat(data.stats.pending_amount) || 0).toFixed(2);\n                document.getElementById('total-refunds').textContent = '$' + (parseFloat(data.stats.total_refunds) || 0).toFixed(2);\n            }\n            \n            const tbody = document.getElementById('payments-table-body');\n            \n            if (data.payments.length === 0) {\n                tbody.innerHTML = '<tr><td colspan=\"8\" class=\"px-6 py-4 text-center text-gray-500\">No payments found</td></tr>';\n                return;\n            }\n            \n            tbody.innerHTML = data.payments.map(payment => `\n                <tr>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">#${payment.id}</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <div class=\"text-sm font-medium text-gray-900\">${payment.learner_name || 'N/A'}</div>\n                        <div class=\"text-sm text-gray-500\">${payment.learner_email || ''}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <div class=\"text-sm font-medium text-gray-900\">${payment.expert_name || 'N/A'}</div>\n                        <div class=\"text-sm text-gray-500\">${payment.expert_email || ''}</div>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">$${parseFloat(payment.amount).toFixed(2)}</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">$${parseFloat(payment.commission_amount || 0).toFixed(2)}</td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                        <span class=\"px-2 py-1 text-xs rounded-full ${\n                            payment.status === 'success' ? 'bg-green-100 text-green-800' :\n                            payment.status === 'refunded' ? 'bg-red-100 text-red-800' :\n                            payment.status === 'failed' ? 'bg-red-100 text-red-800' :\n                            'bg-yellow-100 text-yellow-800'\n                        }\">\n                            ${payment.status}\n                        </span>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        ${new Date(payment.created_at).toLocaleDateString()}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <button onclick=\"viewPayment(${payment.id})\" class=\"text-primary hover:text-blue-700\">View</button>\n                    </td>\n                </tr>\n            `).join('');\n        }\n    } catch (error) {\n        console.error('Error loading payments:', error);\n    }\n}\n\nfunction viewPayment(id) {\n    alert('Viewing payment #' + id + ' - Full details page to be implemented');\n}\n\n// Load payments on page load\nloadPayments();\n</script>\n\n</div> <!-- Close admin-sidebar main content div -->\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":7525},"admin/admin-settings.php":{"content":"<?php\nrequire_once 'includes/admin-auth-check.php';\n\n$page_title = \"Settings - Admin\";\n$panel_type = \"admin\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/admin-sidebar.php';\n?>\n\n    <!-- Page Header -->\n    <div class=\"p-6 bg-white border-b\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Platform Settings</h1>\n        <p class=\"text-gray-600 mt-1\">Configure platform settings and preferences</p>\n    </div>\n\n    <div class=\"p-6\">\n        <!-- Settings Categories -->\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <!-- General Settings -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">General Settings</h3>\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Platform Name</label>\n                        <input type=\"text\" value=\"Nexpert.ai\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Support Email</label>\n                        <input type=\"email\" value=\"support@nexpert.ai\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Contact Phone</label>\n                        <input type=\"text\" value=\"+1 (555) 123-4567\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                </div>\n            </div>\n\n            <!-- Payment Settings -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Payment Settings</h3>\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Commission Rate (%)</label>\n                        <input type=\"number\" value=\"15\" min=\"0\" max=\"100\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Minimum Payout (₹)</label>\n                        <input type=\"number\" value=\"500\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Currency</label>\n                        <select class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                            <option value=\"INR\" selected>INR (₹)</option>\n                            <option value=\"USD\">USD ($)</option>\n                            <option value=\"EUR\">EUR (€)</option>\n                            <option value=\"GBP\">GBP (£)</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Security Settings -->\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Security Settings</h3>\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"mr-2\">\n                            <span class=\"text-sm text-gray-700\">Two-Factor Authentication</span>\n                        </label>\n                    </div>\n                    <div>\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" checked class=\"mr-2\">\n                            <span class=\"text-sm text-gray-700\">Email Verification Required</span>\n                        </label>\n                    </div>\n                    <div>\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" class=\"mr-2\">\n                            <span class=\"text-sm text-gray-700\">Maintenance Mode</span>\n                        </label>\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Session Timeout (minutes)</label>\n                        <input type=\"number\" value=\"30\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Email Settings -->\n        <div class=\"bg-white rounded-lg shadow p-6 mt-6\">\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Email Configuration</h3>\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">SMTP Host</label>\n                    <input type=\"text\" placeholder=\"smtp.example.com\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                </div>\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">SMTP Port</label>\n                    <input type=\"number\" value=\"587\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                </div>\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">SMTP Username</label>\n                    <input type=\"text\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                </div>\n                <div>\n                    <label class=\"block text-sm font-medium text-gray-700 mb-2\">SMTP Password</label>\n                    <input type=\"password\" class=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\n                </div>\n            </div>\n        </div>\n\n        <!-- Save Button -->\n        <div class=\"mt-6\">\n            <button onclick=\"saveSettings()\" class=\"bg-primary text-white px-8 py-3 rounded-lg hover:bg-blue-600 font-medium\">\n                Save Settings\n            </button>\n        </div>\n    </div>\n\n<script>\nfunction saveSettings() {\n    alert('Settings saved successfully! (Demo - settings functionality to be implemented)');\n}\n</script>\n\n</div> <!-- Close admin-sidebar main content div -->\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":6390},"expert/expert-dashboard.php":{"content":"<?php\n$page_title = \"Expert Dashboard - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\n// Check onboarding steps completion\n$userId = $_SESSION['user_id'] ?? null;\n$profileComplete = false;\n$kycComplete = false;\n$availabilitySet = false;\n$firstBooking = false;\n$expertProfileId = null;\n\nif ($userId) {\n    // Check profile completion - query by user_id instead of id\n    $stmt = $pdo->prepare(\"\n        SELECT id, full_name, tagline, bio_short, expertise_verticals, verification_status\n        FROM expert_profiles \n        WHERE user_id = ?\n    \");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if ($profile) {\n        $expertProfileId = $profile['id'];\n        \n        if (!empty($profile['full_name']) && !empty($profile['tagline']) && \n            !empty($profile['bio_short']) && !empty($profile['expertise_verticals'])) {\n            $profileComplete = true;\n        }\n        \n        // Check KYC verification\n        if ($profile['verification_status'] === 'approved') {\n            $kycComplete = true;\n        }\n    }\n    \n    // Check if availability is set\n    if ($expertProfileId) {\n        $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM expert_availability WHERE expert_id = ?\");\n        $stmt->execute([$expertProfileId]);\n        $availCount = $stmt->fetch(PDO::FETCH_ASSOC);\n        if ($availCount && $availCount['count'] > 0) {\n            $availabilitySet = true;\n        }\n        \n        // Check for first booking\n        $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM bookings WHERE expert_id = ?\");\n        $stmt->execute([$expertProfileId]);\n        $bookingCount = $stmt->fetch(PDO::FETCH_ASSOC);\n        if ($bookingCount && $bookingCount['count'] > 0) {\n            $firstBooking = true;\n        }\n    }\n}\n\n// Dashboard stats\n$totalEarnings = 0;\n$activeLearners = 0;\n$sessionsThisMonth = 0;\n\nif ($expertProfileId) {\n    // Get total earnings\n    $stmt = $pdo->prepare(\"\n        SELECT COALESCE(SUM(p.amount), 0) as total\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.id\n        WHERE b.expert_id = ? AND p.status = 'completed'\n    \");\n    $stmt->execute([$expertProfileId]);\n    $totalEarnings = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;\n    \n    // Get active learners count\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(DISTINCT b.learner_id) as count\n        FROM bookings b\n        WHERE b.expert_id = ?\n    \");\n    $stmt->execute([$expertProfileId]);\n    $activeLearners = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n    \n    // Get sessions this month\n    $stmt = $pdo->prepare(\"\n        SELECT COUNT(*) as count\n        FROM bookings\n        WHERE expert_id = ? \n        AND MONTH(session_datetime) = MONTH(CURRENT_DATE())\n        AND YEAR(session_datetime) = YEAR(CURRENT_DATE())\n    \");\n    $stmt->execute([$expertProfileId]);\n    $sessionsThisMonth = $stmt->fetch(PDO::FETCH_ASSOC)['count'] ?? 0;\n}\n?>\n\n<div class=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-8\">\n    <!-- Welcome Section -->\n    <div class=\"mb-6 sm:mb-8\">\n        <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-2\">Welcome to Your Dashboard</h1>\n        <p class=\"text-sm sm:text-base text-gray-600\">Manage your profile, sessions, and grow your expert business</p>\n    </div>\n\n    <!-- Quick Stats -->\n    <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8\">\n        <div class=\"bg-white rounded-lg shadow p-4 sm:p-6\">\n            <div class=\"flex items-center justify-between mb-3 sm:mb-4\">\n                <h3 class=\"text-gray-600 text-xs sm:text-sm font-medium\">Total Earnings</h3>\n                <svg class=\"w-6 h-6 sm:w-8 sm:h-8 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                </svg>\n            </div>\n            <p class=\"text-2xl sm:text-3xl font-bold text-gray-900\">₹<?php echo number_format($totalEarnings, 0); ?></p>\n            <p class=\"text-xs sm:text-sm text-gray-500 mt-1\"><?php echo $totalEarnings > 0 ? 'Great progress!' : 'Start your first session'; ?></p>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow p-4 sm:p-6\">\n            <div class=\"flex items-center justify-between mb-3 sm:mb-4\">\n                <h3 class=\"text-gray-600 text-xs sm:text-sm font-medium\">Active Learners</h3>\n                <svg class=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n                </svg>\n            </div>\n            <p class=\"text-2xl sm:text-3xl font-bold text-gray-900\"><?php echo $activeLearners; ?></p>\n            <p class=\"text-xs sm:text-sm text-gray-500 mt-1\"><?php echo $activeLearners > 0 ? 'Keep it up!' : 'No learners yet'; ?></p>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow p-4 sm:p-6\">\n            <div class=\"flex items-center justify-between mb-3 sm:mb-4\">\n                <h3 class=\"text-gray-600 text-xs sm:text-sm font-medium\">Sessions This Month</h3>\n                <svg class=\"w-6 h-6 sm:w-8 sm:h-8 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                </svg>\n            </div>\n            <p class=\"text-2xl sm:text-3xl font-bold text-gray-900\"><?php echo $sessionsThisMonth; ?></p>\n            <p class=\"text-xs sm:text-sm text-gray-500 mt-1\"><?php echo $sessionsThisMonth > 0 ? 'This month' : 'Schedule your first session'; ?></p>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow p-4 sm:p-6\">\n            <div class=\"flex items-center justify-between mb-3 sm:mb-4\">\n                <h3 class=\"text-gray-600 text-xs sm:text-sm font-medium\">Profile Views</h3>\n                <svg class=\"w-6 h-6 sm:w-8 sm:h-8 text-orange-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"></path>\n                </svg>\n            </div>\n            <p class=\"text-2xl sm:text-3xl font-bold text-gray-900\">0</p>\n            <p class=\"text-xs sm:text-sm text-gray-500 mt-1\">Coming soon</p>\n        </div>\n    </div>\n\n    <!-- Quick Actions -->\n    <div class=\"mb-6 sm:mb-8\">\n        <h2 class=\"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4\">Quick Actions</h2>\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4\">\n            <a href=\"?panel=expert&page=profile-setup\" class=\"bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition\">\n                <div class=\"flex items-center space-x-3 sm:space-x-4\">\n                    <div class=\"w-10 h-10 sm:w-12 sm:h-12 bg-accent/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                        </svg>\n                    </div>\n                    <div>\n                        <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Complete Profile</h3>\n                        <p class=\"text-xs sm:text-sm text-gray-600\">Update your expert details</p>\n                    </div>\n                </div>\n            </a>\n\n            <a href=\"?panel=expert&page=booking-management\" class=\"bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition\">\n                <div class=\"flex items-center space-x-3 sm:space-x-4\">\n                    <div class=\"w-10 h-10 sm:w-12 sm:h-12 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                    </div>\n                    <div>\n                        <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">Manage Bookings</h3>\n                        <p class=\"text-xs sm:text-sm text-gray-600\">View session requests</p>\n                    </div>\n                </div>\n            </a>\n\n            <a href=\"?panel=expert&page=earnings\" class=\"bg-white rounded-lg shadow p-4 sm:p-6 hover:shadow-lg transition\">\n                <div class=\"flex items-center space-x-3 sm:space-x-4\">\n                    <div class=\"w-10 h-10 sm:w-12 sm:h-12 bg-green-500/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                        </svg>\n                    </div>\n                    <div>\n                        <h3 class=\"font-semibold text-gray-900 text-sm sm:text-base\">View Earnings</h3>\n                        <p class=\"text-xs sm:text-sm text-gray-600\">Track your revenue</p>\n                    </div>\n                </div>\n            </a>\n        </div>\n    </div>\n\n    <!-- Getting Started Guide -->\n    <div class=\"bg-gradient-to-r from-accent/10 to-yellow-500/10 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8\">\n        <h2 class=\"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4\">🚀 Getting Started as an Expert</h2>\n        <div class=\"space-y-3\">\n            <!-- Step 1: Profile Setup -->\n            <div class=\"flex items-start space-x-3\">\n                <div class=\"w-6 h-6 <?php echo $profileComplete ? 'bg-green-500' : 'bg-gray-300'; ?> text-white rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0\">\n                    <?php echo $profileComplete ? '✓' : '1'; ?>\n                </div>\n                <div>\n                    <h3 class=\"font-semibold text-gray-900\">\n                        <a href=\"?panel=expert&page=settings#profile\" class=\"<?php echo $profileComplete ? 'text-green-600 hover:text-green-700' : 'text-accent hover:text-yellow-600'; ?>\">\n                            <?php echo $profileComplete ? 'Profile Setup Complete' : 'Complete Your Profile →'; ?>\n                        </a>\n                    </h3>\n                    <p class=\"text-sm text-gray-600\"><?php echo $profileComplete ? 'Great! Your profile is set up' : 'Add your expertise and details'; ?></p>\n                </div>\n            </div>\n            \n            <!-- Step 2: KYC Verification -->\n            <div class=\"flex items-start space-x-3\">\n                <div class=\"w-6 h-6 <?php echo $kycComplete ? 'bg-green-500' : 'bg-gray-300'; ?> text-white rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0\">\n                    <?php echo $kycComplete ? '✓' : '2'; ?>\n                </div>\n                <div>\n                    <h3 class=\"font-semibold text-gray-900\">\n                        <a href=\"?panel=expert&page=settings#kyc\" class=\"<?php echo $kycComplete ? 'text-green-600 hover:text-green-700' : 'text-accent hover:text-yellow-600'; ?>\">\n                            <?php echo $kycComplete ? 'KYC Verification Complete' : 'Complete KYC Verification →'; ?>\n                        </a>\n                    </h3>\n                    <p class=\"text-sm text-gray-600\"><?php echo $kycComplete ? 'You are verified to earn' : 'Verify your identity to start earning'; ?></p>\n                </div>\n            </div>\n            \n            <!-- Step 3: Set Availability -->\n            <div class=\"flex items-start space-x-3\">\n                <div class=\"w-6 h-6 <?php echo $availabilitySet ? 'bg-green-500' : 'bg-gray-300'; ?> text-white rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0\">\n                    <?php echo $availabilitySet ? '✓' : '3'; ?>\n                </div>\n                <div>\n                    <h3 class=\"font-semibold text-gray-900\">\n                        <a href=\"?panel=expert&page=settings#availability\" class=\"<?php echo $availabilitySet ? 'text-green-600 hover:text-green-700' : 'text-accent hover:text-yellow-600'; ?>\">\n                            <?php echo $availabilitySet ? 'Availability Set' : 'Set Your Availability →'; ?>\n                        </a>\n                    </h3>\n                    <p class=\"text-sm text-gray-600\"><?php echo $availabilitySet ? 'Learners can see when you\\'re free' : 'Let learners know when you\\'re available'; ?></p>\n                </div>\n            </div>\n            \n            <!-- Step 4: First Booking -->\n            <div class=\"flex items-start space-x-3\">\n                <div class=\"w-6 h-6 <?php echo $firstBooking ? 'bg-green-500' : 'bg-gray-300'; ?> text-white rounded-full flex items-center justify-center text-sm font-semibold flex-shrink-0\">\n                    <?php echo $firstBooking ? '✓' : '4'; ?>\n                </div>\n                <div>\n                    <h3 class=\"font-semibold text-gray-900\">\n                        <a href=\"?panel=expert&page=booking-management\" class=\"<?php echo $firstBooking ? 'text-green-600 hover:text-green-700' : 'text-accent hover:text-yellow-600'; ?>\">\n                            <?php echo $firstBooking ? 'First Booking Completed' : 'Accept Your First Booking →'; ?>\n                        </a>\n                    </h3>\n                    <p class=\"text-sm text-gray-600\"><?php echo $firstBooking ? 'You\\'ve started helping learners!' : 'Start helping learners achieve their goals'; ?></p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Recent Activity -->\n    <div class=\"bg-white rounded-lg shadow\">\n        <div class=\"p-6 border-b border-gray-200\">\n            <h2 class=\"text-xl font-bold text-gray-900\">Recent Activity</h2>\n        </div>\n        <div class=\"p-8 text-center\">\n            <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"></path>\n            </svg>\n            <p class=\"text-gray-500\">No recent activity</p>\n            <p class=\"text-sm text-gray-400 mt-2\">Your bookings and sessions will appear here</p>\n        </div>\n    </div>\n</div>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":15865},"expert/expert-kyc.php":{"content":"<?php\n$page_title = \"KYC Verification - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n<div class=\"max-w-4xl mx-auto px-4 py-8\">\n    <!-- Header -->\n    <div class=\"mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">KYC Verification</h1>\n        <p class=\"text-gray-600\">Complete your identity verification to start earning and receiving payouts</p>\n    </div>\n\n    <!-- Verification Status -->\n    <div class=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8\">\n        <div class=\"flex\">\n            <div class=\"flex-shrink-0\">\n                <svg class=\"h-5 w-5 text-yellow-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path>\n                </svg>\n            </div>\n            <div class=\"ml-3\">\n                <p class=\"text-sm text-yellow-700\">\n                    <strong>Verification Pending:</strong> Your KYC documents are under review. You cannot receive payouts until verification is complete.\n                </p>\n            </div>\n        </div>\n    </div>\n\n    <!-- KYC Form -->\n    <div class=\"bg-white rounded-lg shadow-lg p-6 md:p-8\">\n        <form id=\"kycForm\">\n            <!-- Personal Information -->\n            <div class=\"mb-8\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4 flex items-center\">\n                    <svg class=\"w-6 h-6 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                    </svg>\n                    Personal Information\n                </h2>\n                \n                <div class=\"grid md:grid-cols-2 gap-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Legal Name *</label>\n                        <input type=\"text\" id=\"fullLegalName\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"As per government ID\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Date of Birth *</label>\n                        <input type=\"date\" id=\"dob\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Nationality *</label>\n                        <select id=\"nationality\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            <option value=\"\">Select nationality</option>\n                            <option value=\"IN\">India</option>\n                            <option value=\"US\">United States</option>\n                            <option value=\"GB\">United Kingdom</option>\n                            <option value=\"CA\">Canada</option>\n                            <option value=\"AU\">Australia</option>\n                            <option value=\"SG\">Singapore</option>\n                            <option value=\"AE\">United Arab Emirates</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Gender *</label>\n                        <select id=\"gender\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            <option value=\"\">Select gender</option>\n                            <option value=\"male\">Male</option>\n                            <option value=\"female\">Female</option>\n                            <option value=\"other\">Other</option>\n                            <option value=\"prefer_not_to_say\">Prefer not to say</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Address Information -->\n            <div class=\"mb-8\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4 flex items-center\">\n                    <svg class=\"w-6 h-6 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                    </svg>\n                    Address Information\n                </h2>\n                \n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Street Address *</label>\n                        <input type=\"text\" id=\"addressLine1\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"House/Flat number, Street name\">\n                    </div>\n                    <div class=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">City *</label>\n                            <input type=\"text\" id=\"city\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"City\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">State/Province *</label>\n                            <input type=\"text\" id=\"state\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"State/Province\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Postal/ZIP Code *</label>\n                            <input type=\"text\" id=\"postalCode\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Postal code\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Country *</label>\n                            <select id=\"country\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                <option value=\"\">Select country</option>\n                                <option value=\"IN\">India</option>\n                                <option value=\"US\">United States</option>\n                                <option value=\"GB\">United Kingdom</option>\n                                <option value=\"CA\">Canada</option>\n                                <option value=\"AU\">Australia</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Identity Documents -->\n            <div class=\"mb-8\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4 flex items-center\">\n                    <svg class=\"w-6 h-6 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2\"></path>\n                    </svg>\n                    Identity Verification Documents\n                </h2>\n                \n                <div class=\"space-y-6\">\n                    <!-- ID Type -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">ID Document Type *</label>\n                        <select id=\"idType\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            <option value=\"\">Select document type</option>\n                            <option value=\"passport\">Passport</option>\n                            <option value=\"drivers_license\">Driver's License</option>\n                            <option value=\"aadhaar\">Aadhaar Card</option>\n                            <option value=\"pan\">PAN Card</option>\n                            <option value=\"national_id\">National ID Card</option>\n                        </select>\n                    </div>\n\n                    <!-- ID Number -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">ID Number *</label>\n                        <input type=\"text\" id=\"idNumber\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Enter your ID number\">\n                    </div>\n\n                    <!-- ID Document Upload -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Upload ID Document (Front) *</label>\n                        <div class=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-accent transition\">\n                            <input type=\"file\" id=\"idDocumentFront\" accept=\"image/*,.pdf\" class=\"hidden\">\n                            <label for=\"idDocumentFront\" class=\"cursor-pointer\">\n                                <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\n                                </svg>\n                                <p class=\"mt-2 text-sm text-gray-600\">Click to upload or drag and drop</p>\n                                <p class=\"text-xs text-gray-500\">PNG, JPG, PDF up to 10MB</p>\n                            </label>\n                            <div id=\"idFrontPreview\" class=\"mt-3 text-sm text-green-600 hidden\"></div>\n                        </div>\n                    </div>\n\n                    <!-- ID Document Back -->\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Upload ID Document (Back)</label>\n                        <div class=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-accent transition\">\n                            <input type=\"file\" id=\"idDocumentBack\" accept=\"image/*,.pdf\" class=\"hidden\">\n                            <label for=\"idDocumentBack\" class=\"cursor-pointer\">\n                                <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\n                                </svg>\n                                <p class=\"mt-2 text-sm text-gray-600\">Click to upload or drag and drop</p>\n                                <p class=\"text-xs text-gray-500\">PNG, JPG, PDF up to 10MB</p>\n                            </label>\n                            <div id=\"idBackPreview\" class=\"mt-3 text-sm text-green-600 hidden\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Bank Details -->\n            <div class=\"mb-8\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4 flex items-center\">\n                    <svg class=\"w-6 h-6 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"></path>\n                    </svg>\n                    Bank Account Details (For Payouts)\n                </h2>\n                \n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Holder Name *</label>\n                        <input type=\"text\" id=\"accountHolderName\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Name as per bank account\">\n                    </div>\n                    <div class=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Bank Name *</label>\n                            <input type=\"text\" id=\"bankName\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Bank name\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Number *</label>\n                            <input type=\"text\" id=\"accountNumber\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"Account number\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">IFSC Code / Routing Number *</label>\n                            <input type=\"text\" id=\"ifscCode\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\" placeholder=\"IFSC/Swift/Routing code\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Type *</label>\n                            <select id=\"accountType\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                <option value=\"\">Select type</option>\n                                <option value=\"savings\">Savings</option>\n                                <option value=\"current\">Current/Checking</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Terms & Conditions -->\n            <div class=\"mb-8\">\n                <label class=\"flex items-start\">\n                    <input type=\"checkbox\" id=\"termsAccepted\" required class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded mt-1\">\n                    <span class=\"ml-3 text-sm text-gray-700\">\n                        I confirm that all information provided is accurate and complete. I understand that providing false information may result in account suspension. I agree to Nexpert.ai's <a href=\"#\" class=\"text-accent hover:underline\">Terms of Service</a> and <a href=\"#\" class=\"text-accent hover:underline\">Privacy Policy</a>.\n                    </span>\n                </label>\n            </div>\n\n            <!-- Submit Buttons -->\n            <div class=\"flex space-x-4\">\n                <button type=\"button\" id=\"saveDraftBtn\" class=\"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition text-center font-semibold\">\n                    Save as Draft\n                </button>\n                <button type=\"submit\" class=\"flex-1 bg-accent text-white py-3 px-6 rounded-lg hover:bg-yellow-600 transition font-semibold\">\n                    Submit for Verification\n                </button>\n            </div>\n        </form>\n    </div>\n\n    <!-- Help Section -->\n    <div class=\"mt-8 bg-blue-50 rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Need Help?</h3>\n        <ul class=\"space-y-2 text-sm text-gray-700\">\n            <li class=\"flex items-start\">\n                <svg class=\"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path>\n                </svg>\n                Verification typically takes 24-48 hours\n            </li>\n            <li class=\"flex items-start\">\n                <svg class=\"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path>\n                </svg>\n                All documents must be clear and readable\n            </li>\n            <li class=\"flex items-start\">\n                <svg class=\"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path>\n                </svg>\n                Your information is encrypted and secure\n            </li>\n            <li class=\"flex items-start\">\n                <svg class=\"w-5 h-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path>\n                </svg>\n                Contact support@nexpert.ai for assistance\n            </li>\n        </ul>\n    </div>\n</div>\n\n<script>\n    // File upload preview handlers\n    document.getElementById('idDocumentFront').addEventListener('change', function(e) {\n        const preview = document.getElementById('idFrontPreview');\n        if (e.target.files.length > 0) {\n            preview.textContent = '✓ ' + e.target.files[0].name;\n            preview.classList.remove('hidden');\n        }\n    });\n\n    document.getElementById('idDocumentBack').addEventListener('change', function(e) {\n        const preview = document.getElementById('idBackPreview');\n        if (e.target.files.length > 0) {\n            preview.textContent = '✓ ' + e.target.files[0].name;\n            preview.classList.remove('hidden');\n        }\n    });\n\n    // Load existing KYC data on page load\n    async function loadExistingKYC() {\n        try {\n            const response = await fetch('/admin-panel/apis/expert/kyc.php');\n            const result = await response.json();\n            \n            if (result.success && result.data) {\n                const kyc = result.data;\n                \n                // Populate form fields with existing data\n                if (kyc.full_legal_name) document.getElementById('fullLegalName').value = kyc.full_legal_name;\n                if (kyc.date_of_birth) document.getElementById('dob').value = kyc.date_of_birth;\n                if (kyc.nationality) document.getElementById('nationality').value = kyc.nationality;\n                if (kyc.gender) document.getElementById('gender').value = kyc.gender;\n                if (kyc.address_line1) document.getElementById('addressLine1').value = kyc.address_line1;\n                if (kyc.city) document.getElementById('city').value = kyc.city;\n                if (kyc.state) document.getElementById('state').value = kyc.state;\n                if (kyc.postal_code) document.getElementById('postalCode').value = kyc.postal_code;\n                if (kyc.country) document.getElementById('country').value = kyc.country;\n                if (kyc.id_document_type) document.getElementById('idType').value = kyc.id_document_type;\n                if (kyc.id_number) document.getElementById('idNumber').value = kyc.id_number;\n                if (kyc.account_holder_name) document.getElementById('accountHolderName').value = kyc.account_holder_name;\n                if (kyc.bank_name) document.getElementById('bankName').value = kyc.bank_name;\n                if (kyc.account_number) document.getElementById('accountNumber').value = kyc.account_number;\n                if (kyc.ifsc_code) document.getElementById('ifscCode').value = kyc.ifsc_code;\n                if (kyc.account_type) document.getElementById('accountType').value = kyc.account_type;\n                \n                // Show status if already submitted\n                if (kyc.verification_status === 'pending') {\n                    alert('Your KYC has been submitted and is under review. You can update and resubmit if needed.');\n                } else if (kyc.verification_status === 'approved') {\n                    alert('Your KYC has been approved!');\n                } else if (kyc.verification_status === 'rejected') {\n                    alert('Your KYC was rejected. Reason: ' + (kyc.rejection_reason || 'Please review and resubmit.'));\n                }\n            }\n        } catch (error) {\n            console.error('Error loading KYC data:', error);\n        }\n    }\n\n    // Load existing data when page loads\n    loadExistingKYC();\n\n    // Helper function to collect form data\n    function collectFormData() {\n        return {\n            full_legal_name: document.getElementById('fullLegalName').value,\n            date_of_birth: document.getElementById('dob').value,\n            nationality: document.getElementById('nationality').value,\n            gender: document.getElementById('gender').value,\n            address_line1: document.getElementById('addressLine1').value,\n            city: document.getElementById('city').value,\n            state: document.getElementById('state').value,\n            postal_code: document.getElementById('postalCode').value,\n            country: document.getElementById('country').value,\n            id_document_type: document.getElementById('idType').value,\n            id_number: document.getElementById('idNumber').value,\n            id_document_front_url: 'uploads/kyc/front_placeholder.jpg',\n            id_document_back_url: 'uploads/kyc/back_placeholder.jpg',\n            account_holder_name: document.getElementById('accountHolderName').value,\n            bank_name: document.getElementById('bankName').value,\n            account_number: document.getElementById('accountNumber').value,\n            ifsc_code: document.getElementById('ifscCode').value,\n            account_type: document.getElementById('accountType').value\n        };\n    }\n\n    // Save as draft handler\n    document.getElementById('saveDraftBtn').addEventListener('click', async function() {\n        const data = collectFormData();\n        data.submit = false;\n        \n        try {\n            const response = await fetch('/admin-panel/apis/expert/kyc.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                alert(result.message);\n                window.location.href = '?panel=expert&page=dashboard';\n            } else {\n                alert('Error: ' + result.message);\n            }\n        } catch (error) {\n            alert('Error saving KYC data. Please try again.');\n            console.error(error);\n        }\n    });\n\n    // Form submission handler\n    document.getElementById('kycForm').addEventListener('submit', async function(e) {\n        e.preventDefault();\n        \n        const termsAccepted = document.getElementById('termsAccepted').checked;\n        if (!termsAccepted) {\n            alert('Please accept the terms and conditions to continue');\n            return;\n        }\n\n        const idFront = document.getElementById('idDocumentFront').files.length;\n        if (!idFront) {\n            alert('Please upload your ID document (front side)');\n            return;\n        }\n\n        const data = collectFormData();\n        data.submit = true;\n\n        try {\n            const response = await fetch('/admin-panel/apis/expert/kyc.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                alert(result.message + ' Our team will review your documents within 24-48 hours.');\n                window.location.href = '?panel=expert&page=dashboard';\n            } else {\n                alert('Error: ' + result.message);\n            }\n        } catch (error) {\n            alert('Error submitting KYC data. Please try again.');\n            console.error(error);\n        }\n    });\n</script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":25777},"expert/expert-settings.php":{"content":"<?php\n$page_title = \"Account Settings - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\n// Get user_id from session\n$userId = $_SESSION['user_id'] ?? null;\n$expertProfileId = null;\n\n// Initialize all data variables\n$profileData = [];\n$kycData = [];\n$bankData = [];\n$pricingData = [];\n$availabilityData = [];\n\nif ($userId) {\n    // Get expert profile data\n    $stmt = $pdo->prepare(\"\n        SELECT ep.*, u.email, u.phone \n        FROM expert_profiles ep\n        JOIN users u ON u.id = ep.user_id\n        WHERE ep.user_id = ?\n    \");\n    $stmt->execute([$userId]);\n    $profileData = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if ($profileData) {\n        $expertProfileId = $profileData['id'];\n        \n        // Get expert pricing\n        $stmt = $pdo->prepare(\"\n            SELECT * FROM expert_pricing \n            WHERE expert_id = ? AND is_active = 1\n        \");\n        $stmt->execute([$userId]);\n        $pricingData = $stmt->fetchAll(PDO::FETCH_ASSOC);\n        \n        // Get availability slots\n        $stmt = $pdo->prepare(\"\n            SELECT * FROM expert_availability \n            WHERE expert_id = ? AND is_active = 1\n            ORDER BY day_of_week, start_time\n        \");\n        $stmt->execute([$userId]);\n        $availabilityData = $stmt->fetchAll(PDO::FETCH_ASSOC);\n        \n        // Get KYC verification data\n        $stmt = $pdo->prepare(\"\n            SELECT * FROM expert_kyc_verification \n            WHERE expert_id = ?\n        \");\n        $stmt->execute([$userId]);\n        $kycData = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        // Get bank details (check if separate table exists, otherwise use KYC data)\n        try {\n            $stmt = $pdo->prepare(\"\n                SELECT * FROM expert_bank_details \n                WHERE user_id = ?\n            \");\n            $stmt->execute([$userId]);\n            $bankData = $stmt->fetch(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            // If table doesn't exist, use KYC data\n            if ($kycData) {\n                $bankData = [\n                    'account_holder_name' => $kycData['account_holder_name'] ?? '',\n                    'bank_name' => $kycData['bank_name'] ?? '',\n                    'branch_name' => '',\n                    'account_number' => $kycData['account_number'] ?? '',\n                    'ifsc_code' => $kycData['ifsc_code'] ?? '',\n                    'account_type' => $kycData['account_type'] ?? ''\n                ];\n            }\n        }\n    }\n}\n\n// Helper function to display ID document type\nfunction formatIdType($type) {\n    $types = [\n        'passport' => 'Passport',\n        'drivers_license' => 'Driver\\'s License',\n        'aadhaar' => 'Aadhaar Card',\n        'pan' => 'PAN Card',\n        'national_id' => 'National ID'\n    ];\n    return $types[$type] ?? ucfirst($type);\n}\n\n// Helper function for verification status\nfunction getVerificationStatusBadge($status) {\n    $badges = [\n        'draft' => '<span class=\"px-4 py-2 bg-gray-100 text-gray-800 rounded-full text-sm font-semibold\">Draft</span>',\n        'pending' => '<span class=\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold\">Pending Review</span>',\n        'approved' => '<span class=\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-semibold\">Approved</span>',\n        'rejected' => '<span class=\"px-4 py-2 bg-red-100 text-red-800 rounded-full text-sm font-semibold\">Rejected</span>'\n    ];\n    return $badges[$status] ?? $badges['draft'];\n}\n\n// Helper function for verification message\nfunction getVerificationMessage($status) {\n    $messages = [\n        'draft' => 'Your KYC details are incomplete. Please complete your verification.',\n        'pending' => 'Your KYC verification is currently under review. Verification typically takes 24-48 hours.',\n        'approved' => 'Your KYC verification has been approved.',\n        'rejected' => 'Your KYC verification was rejected. Please review the feedback and resubmit.'\n    ];\n    return $messages[$status] ?? $messages['draft'];\n}\n?>\n\n<div class=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-8\">\n    <!-- Header -->\n    <div class=\"mb-6 sm:mb-8\">\n        <h1 class=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-2\">Account Settings</h1>\n        <p class=\"text-sm sm:text-base text-gray-600\">Manage your profile, security, and preferences</p>\n    </div>\n\n    <div class=\"grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-8\">\n        <!-- Sidebar Navigation -->\n        <div class=\"lg:col-span-1\">\n            <div class=\"bg-white rounded-lg shadow-lg p-3 sm:p-4 lg:sticky lg:top-24\">\n                <nav class=\"space-y-1\">\n                    <button onclick=\"switchTab('profile')\" id=\"tab-profile\" class=\"settings-tab active w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                        </svg>\n                        Profile Information\n                    </button>\n                    <button onclick=\"switchTab('kyc')\" id=\"tab-kyc\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2\"></path>\n                        </svg>\n                        KYC Details\n                    </button>\n                    <button onclick=\"switchTab('bank')\" id=\"tab-bank\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"></path>\n                        </svg>\n                        Bank Details\n                    </button>\n                    <button onclick=\"switchTab('availability')\" id=\"tab-availability\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                        </svg>\n                        Availability\n                    </button>\n                    <button onclick=\"switchTab('security')\" id=\"tab-security\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                        </svg>\n                        Security\n                    </button>\n                    <button onclick=\"switchTab('notifications')\" id=\"tab-notifications\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"></path>\n                        </svg>\n                        Notifications\n                    </button>\n                    <button onclick=\"switchTab('privacy')\" id=\"tab-privacy\" class=\"settings-tab w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 transition flex items-center\">\n                        <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"></path>\n                        </svg>\n                        Privacy\n                    </button>\n                </nav>\n            </div>\n        </div>\n\n        <!-- Content Area -->\n        <div class=\"lg:col-span-3\">\n            <!-- Profile Information Tab -->\n            <div id=\"content-profile\" class=\"tab-content bg-white rounded-lg shadow-lg p-4 sm:p-6 md:p-8\">\n                <h2 class=\"text-xl sm:text-2xl font-semibold text-gray-900 mb-4 sm:mb-6\">Profile Information</h2>\n                \n                <form id=\"profileForm\">\n                    <!-- Profile Photo -->\n                    <div class=\"flex flex-col sm:flex-row items-center sm:space-x-6 mb-6 pb-6 border-b space-y-4 sm:space-y-0\">\n                        <img src=\"<?php echo !empty($profileData['profile_photo']) ? htmlspecialchars($profileData['profile_photo']) : 'attached_assets/stock_images/diverse_professional_478267b3.jpg'; ?>\" alt=\"Profile\" class=\"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover\">\n                        <div class=\"text-center sm:text-left\">\n                            <input type=\"file\" id=\"profilePhoto\" accept=\"image/*\" class=\"hidden\">\n                            <label for=\"profilePhoto\" class=\"bg-accent text-white px-4 py-2 text-sm sm:text-base rounded-lg hover:bg-yellow-600 transition cursor-pointer inline-block\">\n                                Change Photo\n                            </label>\n                            <p class=\"text-gray-600 text-xs sm:text-sm mt-2\">JPG, PNG up to 5MB</p>\n                        </div>\n                    </div>\n\n                    <div class=\"space-y-4\">\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name *</label>\n                                <input type=\"text\" name=\"full_name\" value=\"<?php echo htmlspecialchars($profileData['full_name'] ?? ''); ?>\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Professional Title *</label>\n                                <input type=\"text\" name=\"tagline\" value=\"<?php echo htmlspecialchars($profileData['tagline'] ?? ''); ?>\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                        </div>\n\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Email Address *</label>\n                                <input type=\"email\" name=\"email\" value=\"<?php echo htmlspecialchars($profileData['email'] ?? ''); ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Mobile Number *</label>\n                                <input type=\"tel\" name=\"phone\" value=\"<?php echo htmlspecialchars($profileData['phone'] ?? ''); ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                        </div>\n\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Professional Bio *</label>\n                            <textarea name=\"bio_full\" rows=\"4\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\"><?php echo htmlspecialchars($profileData['bio_full'] ?? ''); ?></textarea>\n                        </div>\n\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Timezone</label>\n                                <input type=\"text\" name=\"timezone\" value=\"<?php echo htmlspecialchars($profileData['timezone'] ?? 'UTC'); ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Years of Experience</label>\n                                <select name=\"experience_years\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                                    <option value=\"\">Select experience</option>\n                                    <option value=\"1-2\" <?php echo (isset($profileData['experience_years']) && $profileData['experience_years'] >= 1 && $profileData['experience_years'] <= 2) ? 'selected' : ''; ?>>1-2 years</option>\n                                    <option value=\"3-5\" <?php echo (isset($profileData['experience_years']) && $profileData['experience_years'] >= 3 && $profileData['experience_years'] <= 5) ? 'selected' : ''; ?>>3-5 years</option>\n                                    <option value=\"5-8\" <?php echo (isset($profileData['experience_years']) && $profileData['experience_years'] >= 5 && $profileData['experience_years'] <= 8) ? 'selected' : ''; ?>>5-8 years</option>\n                                    <option value=\"8-10\" <?php echo (isset($profileData['experience_years']) && $profileData['experience_years'] >= 8 && $profileData['experience_years'] <= 10) ? 'selected' : ''; ?>>8-10 years</option>\n                                    <option value=\"10+\" <?php echo (isset($profileData['experience_years']) && $profileData['experience_years'] > 10) ? 'selected' : ''; ?>>10+ years</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4\">\n                        <button type=\"submit\" class=\"w-full sm:w-auto bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold text-sm sm:text-base\">Save Changes</button>\n                        <button type=\"button\" class=\"w-full sm:w-auto bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-semibold text-sm sm:text-base\">Cancel</button>\n                    </div>\n                </form>\n            </div>\n\n            <!-- KYC Details Tab -->\n            <div id=\"content-kyc\" class=\"tab-content bg-white rounded-lg shadow-lg p-4 sm:p-6 md:p-8 hidden\">\n                <div class=\"flex flex-col sm:flex-row justify-between sm:items-center mb-6 gap-3\">\n                    <h2 class=\"text-xl sm:text-2xl font-semibold text-gray-900\">KYC Verification Details</h2>\n                    <?php echo getVerificationStatusBadge($kycData['verification_status'] ?? 'draft'); ?>\n                </div>\n\n                <div class=\"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6\">\n                    <p class=\"text-sm text-blue-700\"><?php echo getVerificationMessage($kycData['verification_status'] ?? 'draft'); ?></p>\n                </div>\n\n                <?php if (!empty($kycData)): ?>\n                <div class=\"space-y-6\">\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Personal Information</h3>\n                        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n                            <div class=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n                                <p class=\"text-xs sm:text-sm text-gray-600 mb-1\">Full Legal Name</p>\n                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\"><?php echo htmlspecialchars($kycData['full_legal_name'] ?? 'Not provided'); ?></p>\n                            </div>\n                            <div class=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n                                <p class=\"text-xs sm:text-sm text-gray-600 mb-1\">Date of Birth</p>\n                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\"><?php echo !empty($kycData['date_of_birth']) ? date('jS M Y', strtotime($kycData['date_of_birth'])) : 'Not provided'; ?></p>\n                            </div>\n                            <div class=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n                                <p class=\"text-xs sm:text-sm text-gray-600 mb-1\">Nationality</p>\n                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\"><?php echo htmlspecialchars($kycData['nationality'] ?? 'Not provided'); ?></p>\n                            </div>\n                            <div class=\"bg-gray-50 p-3 sm:p-4 rounded-lg\">\n                                <p class=\"text-xs sm:text-sm text-gray-600 mb-1\">ID Type</p>\n                                <p class=\"font-semibold text-gray-900 text-sm sm:text-base\"><?php echo formatIdType($kycData['id_document_type'] ?? ''); ?></p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <?php if (!empty($kycData['id_document_front_url']) || !empty($kycData['id_document_back_url'])): ?>\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Uploaded Documents</h3>\n                        <div class=\"space-y-3\">\n                            <?php if (!empty($kycData['id_document_front_url'])): ?>\n                            <div class=\"flex items-center justify-between bg-gray-50 p-4 rounded-lg\">\n                                <div class=\"flex items-center\">\n                                    <svg class=\"w-10 h-10 text-green-500 mr-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                        <path fill-rule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z\" clip-rule=\"evenodd\"></path>\n                                    </svg>\n                                    <div>\n                                        <p class=\"font-semibold text-gray-900\">ID Document - Front</p>\n                                        <p class=\"text-sm text-gray-600\">Uploaded on <?php echo !empty($kycData['created_at']) ? date('d M Y', strtotime($kycData['created_at'])) : ''; ?></p>\n                                    </div>\n                                </div>\n                                <a href=\"<?php echo htmlspecialchars($kycData['id_document_front_url']); ?>\" target=\"_blank\" class=\"text-accent hover:text-yellow-600 text-sm font-semibold\">View</a>\n                            </div>\n                            <?php endif; ?>\n                            \n                            <?php if (!empty($kycData['id_document_back_url'])): ?>\n                            <div class=\"flex items-center justify-between bg-gray-50 p-4 rounded-lg\">\n                                <div class=\"flex items-center\">\n                                    <svg class=\"w-10 h-10 text-green-500 mr-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                        <path fill-rule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z\" clip-rule=\"evenodd\"></path>\n                                    </svg>\n                                    <div>\n                                        <p class=\"font-semibold text-gray-900\">ID Document - Back</p>\n                                        <p class=\"text-sm text-gray-600\">Uploaded on <?php echo !empty($kycData['created_at']) ? date('d M Y', strtotime($kycData['created_at'])) : ''; ?></p>\n                                    </div>\n                                </div>\n                                <a href=\"<?php echo htmlspecialchars($kycData['id_document_back_url']); ?>\" target=\"_blank\" class=\"text-accent hover:text-yellow-600 text-sm font-semibold\">View</a>\n                            </div>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                    <?php endif; ?>\n\n                    <div class=\"flex space-x-4\">\n                        <a href=\"?panel=expert&page=kyc\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold\">Edit KYC Details</a>\n                    </div>\n                </div>\n                <?php else: ?>\n                <div class=\"text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                    </svg>\n                    <p class=\"text-gray-600 mb-4\">No KYC information found. Please complete your KYC verification.</p>\n                    <a href=\"?panel=expert&page=kyc\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold inline-block\">Complete KYC Verification</a>\n                </div>\n                <?php endif; ?>\n            </div>\n\n            <!-- Bank Details Tab -->\n            <div id=\"content-bank\" class=\"tab-content bg-white rounded-lg shadow-lg p-4 sm:p-6 md:p-8 hidden\">\n                <h2 class=\"text-xl sm:text-2xl font-semibold text-gray-900 mb-4 sm:mb-6\">Bank Account Details</h2>\n                \n                <form id=\"bankForm\">\n                    <div class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Holder Name *</label>\n                            <input type=\"text\" name=\"account_holder_name\" value=\"<?php echo htmlspecialchars($bankData['account_holder_name'] ?? ''); ?>\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                        </div>\n\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Bank Name *</label>\n                                <input type=\"text\" name=\"bank_name\" value=\"<?php echo htmlspecialchars($bankData['bank_name'] ?? ''); ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Branch Name</label>\n                                <input type=\"text\" name=\"branch_name\" value=\"<?php echo htmlspecialchars($bankData['branch_name'] ?? ''); ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                        </div>\n\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Number *</label>\n                                <input type=\"text\" name=\"account_number\" value=\"<?php echo !empty($bankData['account_number']) ? '****' . substr($bankData['account_number'], -4) : ''; ?>\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Confirm Account Number *</label>\n                                <input type=\"text\" name=\"account_number_confirm\" placeholder=\"Re-enter account number\" class=\"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base\">\n                            </div>\n                        </div>\n\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">IFSC Code *</label>\n                                <input type=\"text\" name=\"ifsc_code\" value=\"<?php echo htmlspecialchars($bankData['ifsc_code'] ?? ''); ?>\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Account Type *</label>\n                                <select name=\"account_type\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                    <option value=\"\">Select type</option>\n                                    <option value=\"savings\" <?php echo (isset($bankData['account_type']) && $bankData['account_type'] == 'savings') ? 'selected' : ''; ?>>Savings</option>\n                                    <option value=\"current\" <?php echo (isset($bankData['account_type']) && $bankData['account_type'] == 'current') ? 'selected' : ''; ?>>Current</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class=\"bg-yellow-50 border-l-4 border-yellow-400 p-4\">\n                            <p class=\"text-sm text-yellow-700\">\n                                <strong>Note:</strong> Ensure all bank details are correct. Incorrect details may delay your payouts.\n                            </p>\n                        </div>\n                    </div>\n\n                    <div class=\"mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4\">\n                        <button type=\"submit\" class=\"w-full sm:w-auto bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold text-sm sm:text-base\">Save Changes</button>\n                        <button type=\"button\" class=\"w-full sm:w-auto bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-semibold text-sm sm:text-base\">Cancel</button>\n                    </div>\n                </form>\n            </div>\n\n            <!-- Availability Tab -->\n            <div id=\"content-availability\" class=\"tab-content bg-white rounded-lg shadow-lg p-6 md:p-8 hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Availability Settings</h2>\n                \n                <div class=\"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6\">\n                    <p class=\"text-sm text-blue-700\">\n                        Set your weekly availability schedule. Learners can only book sessions during your available time slots.\n                    </p>\n                </div>\n\n                <?php if (!empty($availabilityData)): ?>\n                <div class=\"mb-8\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Current Availability</h3>\n                    <div class=\"space-y-3\">\n                        <?php \n                        $days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n                        $groupedSlots = [];\n                        foreach ($availabilityData as $slot) {\n                            $day = $days[$slot['day_of_week']] ?? 'Unknown';\n                            if (!isset($groupedSlots[$day])) {\n                                $groupedSlots[$day] = [];\n                            }\n                            $groupedSlots[$day][] = $slot;\n                        }\n                        \n                        foreach ($days as $day):\n                            if (isset($groupedSlots[$day])):\n                        ?>\n                        <div class=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                            <div class=\"flex-1\">\n                                <p class=\"font-semibold text-gray-900\"><?php echo $day; ?></p>\n                                <div class=\"flex flex-wrap gap-2 mt-2\">\n                                    <?php foreach ($groupedSlots[$day] as $slot): ?>\n                                    <span class=\"px-3 py-1 bg-accent text-white rounded-full text-sm\">\n                                        <?php echo date('g:i A', strtotime($slot['start_time'])); ?> - <?php echo date('g:i A', strtotime($slot['end_time'])); ?>\n                                    </span>\n                                    <?php endforeach; ?>\n                                </div>\n                            </div>\n                            <button onclick=\"editDayAvailability('<?php echo $day; ?>')\" class=\"ml-4 text-accent hover:text-yellow-600\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                        <?php \n                            endif;\n                        endforeach; \n                        ?>\n                    </div>\n                </div>\n                <?php else: ?>\n                <div class=\"text-center py-12 mb-8\">\n                    <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n                    </svg>\n                    <p class=\"text-gray-600 mb-4\">No availability schedule set yet.</p>\n                    <p class=\"text-sm text-gray-500\">Add your available time slots so learners can book sessions with you.</p>\n                </div>\n                <?php endif; ?>\n\n                <!-- Add New Availability Form -->\n                <div class=\"border-t pt-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Add New Time Slot</h3>\n                    <form id=\"availabilityForm\">\n                        <div class=\"grid md:grid-cols-3 gap-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Day of Week *</label>\n                                <select name=\"day_of_week\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                                    <option value=\"\">Select day</option>\n                                    <option value=\"0\">Monday</option>\n                                    <option value=\"1\">Tuesday</option>\n                                    <option value=\"2\">Wednesday</option>\n                                    <option value=\"3\">Thursday</option>\n                                    <option value=\"4\">Friday</option>\n                                    <option value=\"5\">Saturday</option>\n                                    <option value=\"6\">Sunday</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Start Time *</label>\n                                <input type=\"time\" name=\"start_time\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">End Time *</label>\n                                <input type=\"time\" name=\"end_time\" required class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                        </div>\n\n                        <div class=\"mt-6 flex space-x-4\">\n                            <button type=\"submit\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold\">Add Time Slot</button>\n                            <button type=\"button\" onclick=\"clearAvailabilityForm()\" class=\"bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-semibold\">Clear</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <!-- Security Tab -->\n            <div id=\"content-security\" class=\"tab-content bg-white rounded-lg shadow-lg p-6 md:p-8 hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Security Settings</h2>\n                \n                <!-- Change Password -->\n                <div class=\"mb-8 pb-8 border-b\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Change Password</h3>\n                    <form id=\"passwordForm\">\n                        <div class=\"space-y-4 max-w-md\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Current Password</label>\n                                <input type=\"password\" name=\"current_password\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">New Password</label>\n                                <input type=\"password\" name=\"new_password\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-2\">Confirm New Password</label>\n                                <input type=\"password\" name=\"confirm_password\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent\">\n                            </div>\n                            <button type=\"submit\" class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold\">Update Password</button>\n                        </div>\n                    </form>\n                </div>\n\n                <!-- Two-Factor Authentication -->\n                <div class=\"mb-8 pb-8 border-b\">\n                    <div class=\"flex items-center justify-between\">\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900\">Two-Factor Authentication</h3>\n                            <p class=\"text-gray-600 text-sm mt-1\">Add an extra layer of security to your account</p>\n                        </div>\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\n                            <input type=\"checkbox\" id=\"two-factor\" <?php echo (!empty($profileData['two_factor_enabled']) && $profileData['two_factor_enabled']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                            <div class=\"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-accent\"></div>\n                        </label>\n                    </div>\n                </div>\n\n                <!-- Active Sessions -->\n                <div>\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Active Sessions</h3>\n                    <div class=\"space-y-3\">\n                        <div class=\"flex items-center justify-between bg-gray-50 p-4 rounded-lg\">\n                            <div class=\"flex items-center\">\n                                <svg class=\"w-10 h-10 text-green-500 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"></path>\n                                </svg>\n                                <div>\n                                    <p class=\"font-semibold text-gray-900\">Current Device</p>\n                                    <p class=\"text-sm text-gray-600\">Active Session</p>\n                                </div>\n                            </div>\n                            <span class=\"text-green-600 text-sm font-semibold\">Active</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Notifications Tab -->\n            <div id=\"content-notifications\" class=\"tab-content bg-white rounded-lg shadow-lg p-6 md:p-8 hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Notification Preferences</h2>\n                \n                <div class=\"space-y-6\">\n                    <!-- Email Notifications -->\n                    <div class=\"pb-6 border-b\">\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Email Notifications</h3>\n                        <div class=\"space-y-4\">\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">New Booking Requests</p>\n                                    <p class=\"text-sm text-gray-600\">Get notified when learners book sessions</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"notify-booking\" <?php echo (!empty($profileData['notify_booking_email']) && $profileData['notify_booking_email']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Payment Notifications</p>\n                                    <p class=\"text-sm text-gray-600\">Get notified about earnings and payouts</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"notify-payment\" <?php echo (!empty($profileData['notify_payment_email']) && $profileData['notify_payment_email']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Session Reminders</p>\n                                    <p class=\"text-sm text-gray-600\">Reminders 1 hour before sessions</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"notify-reminder\" <?php echo (!empty($profileData['notify_reminder_email']) && $profileData['notify_reminder_email']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Marketing Emails</p>\n                                    <p class=\"text-sm text-gray-600\">Platform updates and promotions</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"notify-marketing\" <?php echo (!empty($profileData['notify_marketing_email']) && $profileData['notify_marketing_email']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- SMS Notifications -->\n                    <div class=\"pb-6 border-b\">\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">SMS Notifications</h3>\n                        <div class=\"space-y-4\">\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Urgent Updates</p>\n                                    <p class=\"text-sm text-gray-600\">Critical booking changes and cancellations</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"notify-sms\" <?php echo (!empty($profileData['notify_urgent_sms']) && $profileData['notify_urgent_sms']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <button class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold\">Save Preferences</button>\n                </div>\n            </div>\n\n            <!-- Privacy Tab -->\n            <div id=\"content-privacy\" class=\"tab-content bg-white rounded-lg shadow-lg p-6 md:p-8 hidden\">\n                <h2 class=\"text-2xl font-semibold text-gray-900 mb-6\">Privacy Settings</h2>\n                \n                <div class=\"space-y-6\">\n                    <!-- Profile Visibility -->\n                    <div class=\"pb-6 border-b\">\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Profile Visibility</h3>\n                        <div class=\"space-y-4\">\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Show Profile in Search</p>\n                                    <p class=\"text-sm text-gray-600\">Allow learners to find your profile</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"privacy-show-search\" <?php echo (!empty($profileData['show_in_search']) && $profileData['show_in_search']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Show Email Address</p>\n                                    <p class=\"text-sm text-gray-600\">Display email on your public profile</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"privacy-show-email\" <?php echo (!empty($profileData['show_email']) && $profileData['show_email']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900\">Accept New Bookings</p>\n                                    <p class=\"text-sm text-gray-600\">Allow new learners to book sessions</p>\n                                </div>\n                                <label class=\"relative inline-flex items-center cursor-pointer\">\n                                    <input type=\"checkbox\" id=\"privacy-accept-bookings\" <?php echo (!empty($profileData['accept_bookings']) && $profileData['accept_bookings']) ? 'checked' : ''; ?> class=\"sr-only peer\">\n                                    <div class=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent\"></div>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- Data Privacy -->\n                    <div class=\"pb-6 border-b\">\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Data & Privacy</h3>\n                        <div class=\"space-y-3\">\n                            <button class=\"text-accent hover:text-yellow-600 font-semibold text-sm\">Download My Data</button>\n                            <p class=\"text-gray-600 text-sm\">Request a copy of your personal data</p>\n                        </div>\n                    </div>\n\n                    <!-- Danger Zone -->\n                    <div>\n                        <h3 class=\"text-lg font-semibold text-red-600 mb-4\">Danger Zone</h3>\n                        <div class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                            <p class=\"text-gray-900 font-medium mb-2\">Deactivate Account</p>\n                            <p class=\"text-sm text-gray-600 mb-4\">Temporarily disable your account. You can reactivate it anytime.</p>\n                            <button class=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition text-sm font-semibold\">Deactivate Account</button>\n                        </div>\n                    </div>\n\n                    <button class=\"bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition font-semibold\">Save Privacy Settings</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\n    function switchTab(tabName) {\n        // Hide all content\n        document.querySelectorAll('.tab-content').forEach(content => {\n            content.classList.add('hidden');\n        });\n        \n        // Remove active class from all tabs\n        document.querySelectorAll('.settings-tab').forEach(tab => {\n            tab.classList.remove('active', 'bg-accent', 'text-white');\n            tab.classList.add('text-gray-700');\n        });\n        \n        // Show selected content\n        document.getElementById('content-' + tabName).classList.remove('hidden');\n        \n        // Add active class to selected tab\n        const activeTab = document.getElementById('tab-' + tabName);\n        activeTab.classList.add('active', 'bg-accent', 'text-white');\n        activeTab.classList.remove('text-gray-700');\n        \n        // Update URL hash\n        window.location.hash = tabName;\n    }\n    \n    // Check URL hash on page load\n    window.addEventListener('DOMContentLoaded', () => {\n        const hash = window.location.hash.substring(1);\n        if (hash && document.getElementById('tab-' + hash)) {\n            switchTab(hash);\n        }\n    });\n    \n    // Placeholder functions for availability management\n    function clearAvailabilityForm() {\n        document.getElementById('availabilityForm').reset();\n    }\n    \n    function editDayAvailability(day) {\n        alert('Edit functionality for ' + day + ' will be implemented with the availability API.');\n    }\n    \n    function applyPreset(preset) {\n        alert('Preset \"' + preset + '\" will be implemented with the availability API.');\n    }\n</script>\n<script src=\"/admin-panel/js/expert-settings.js\"></script>\n\n<style>\n    .settings-tab.active {\n        background-color: #f59e0b;\n        color: white;\n    }\n</style>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":53330},"includes/admin-sidebar.php":{"content":"<?php\n// Admin Sidebar Navigation Component\n$currentPage = $_GET['page'] ?? 'dashboard';\n?>\n\n<!-- Admin Sidebar -->\n<div class=\"fixed left-0 top-0 h-full w-64 bg-gray-900 text-white flex flex-col z-50\">\n    <!-- Logo/Brand -->\n    <div class=\"p-6 border-b border-gray-800\">\n        <h1 class=\"text-2xl font-bold text-white\">Nexpert.ai</h1>\n        <p class=\"text-sm text-gray-400 mt-1\">Admin Panel</p>\n    </div>\n\n    <!-- Navigation Links -->\n    <nav class=\"flex-1 px-4 py-6 space-y-2 overflow-y-auto\">\n        <a href=\"?panel=admin&page=dashboard\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'dashboard' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"></path>\n            </svg>\n            Dashboard\n        </a>\n\n        <a href=\"?panel=admin&page=experts\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'experts' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"></path>\n            </svg>\n            Experts\n        </a>\n\n        <a href=\"?panel=admin&page=users\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'users' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"></path>\n            </svg>\n            Users\n        </a>\n\n        <a href=\"?panel=admin&page=bookings\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'bookings' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"></path>\n            </svg>\n            Bookings\n        </a>\n\n        <a href=\"?panel=admin&page=payments\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'payments' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"></path>\n            </svg>\n            Payments\n        </a>\n\n        <a href=\"?panel=admin&page=payouts\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'payouts' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            Payouts\n        </a>\n\n        <a href=\"?panel=admin&page=kyc-verification\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'kyc-verification' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2\"></path>\n            </svg>\n            KYC Verification\n        </a>\n\n        <a href=\"?panel=admin&page=settings\" \n           class=\"flex items-center px-4 py-3 rounded-lg transition <?php echo $currentPage === 'settings' ? 'bg-primary text-white' : 'text-gray-300 hover:bg-gray-800'; ?>\">\n            <svg class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"></path>\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n            </svg>\n            Settings\n        </a>\n    </nav>\n\n    <!-- User Section & Logout -->\n    <div class=\"p-4 border-t border-gray-800\">\n        <div class=\"flex items-center justify-between mb-3\">\n            <div class=\"flex items-center\">\n                <div class=\"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-semibold\">\n                    A\n                </div>\n                <div class=\"ml-3\">\n                    <p class=\"text-sm font-medium text-white\">Admin</p>\n                    <p class=\"text-xs text-gray-400\"><?php echo $_SESSION['email'] ?? 'admin@nexpert.ai'; ?></p>\n                </div>\n            </div>\n        </div>\n        <button id=\"adminLogout\" class=\"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition\">\n            <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"></path>\n            </svg>\n            Logout\n        </button>\n    </div>\n</div>\n\n<!-- Main Content Area (with sidebar offset) -->\n<div class=\"ml-64 min-h-screen bg-gray-50\">\n\n<script src=\"/admin-panel/js/admin-logout.js\"></script>\n","size_bytes":7234},"includes/expert-auth-check.php":{"content":"<?php\n// Expert authentication check - include this in all protected expert pages\nsession_start();\n\n// Check if user is logged in\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'expert') {\n    // Not logged in or not an expert, redirect to auth page\n    header('Location: ?panel=expert&page=auth');\n    exit;\n}\n\n// Check session timeout (30 minutes of inactivity)\n$timeout_duration = 1800; // 30 minutes in seconds\nif (isset($_SESSION['last_activity']) && (time() - $_SESSION['last_activity']) > $timeout_duration) {\n    // Session expired\n    session_unset();\n    session_destroy();\n    header('Location: ?panel=expert&page=auth&timeout=1');\n    exit;\n}\n\n// Update last activity time\n$_SESSION['last_activity'] = time();\n\n// Make user data available to the page\n$expertId = $_SESSION['user_id'];\n$expertEmail = $_SESSION['email'];\n$expertName = $_SESSION['full_name'] ?? 'Expert';\n$verificationStatus = $_SESSION['verification_status'] ?? 'pending_kyc';\n?>\n","size_bytes":998},"includes/session-config.php":{"content":"<?php\n// Centralized session configuration for the entire application\n// Include this at the top of every PHP file that needs sessions\n\n// Set default timezone to IST (India Standard Time)\ndate_default_timezone_set('Asia/Kolkata');\n\n// Include currency configuration\nrequire_once __DIR__ . '/currency-config.php';\n\n// Detect HTTPS\n$isHttps = (\n    (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off') ||\n    (!empty($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https') ||\n    (!empty($_SERVER['HTTP_X_FORWARDED_SSL']) && $_SERVER['HTTP_X_FORWARDED_SSL'] === 'on') ||\n    (isset($_SERVER['SERVER_PORT']) && $_SERVER['SERVER_PORT'] == 443)\n);\n\n// Set secure session cookie params\nsession_set_cookie_params([\n    'lifetime' => 3600, // 1 hour\n    'path' => '/',\n    'domain' => '',\n    'secure' => $isHttps,\n    'httponly' => true,\n    'samesite' => 'Lax'\n]);\n\n// Start session\nsession_start();\n\n// Session timeout check (30 minutes of inactivity)\nif (isset($_SESSION['last_activity']) && (time() - $_SESSION['last_activity'] > 1800)) {\n    session_unset();\n    session_destroy();\n    session_start();\n}\n\n$_SESSION['last_activity'] = time();\n\n// Generate CSRF token if not exists\nif (!isset($_SESSION['csrf_token'])) {\n    $_SESSION['csrf_token'] = bin2hex(random_bytes(32));\n}","size_bytes":1314},"admin-panel/js/learner-expert-profile.js":{"content":"document.addEventListener('DOMContentLoaded', async function() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const expertId = urlParams.get('expert_id');\n\n    if (!expertId) {\n        window.location.href = '/index.php?panel=learner&page=browse-experts';\n        return;\n    }\n\n    try {\n        const response = await fetch(`/admin-panel/apis/learner/expert-profile.php?expert_id=${expertId}`);\n        \n        console.log('Response status:', response.status);\n        \n        if (!response.ok) {\n            throw new Error('Failed to fetch expert profile');\n        }\n        \n        const data = await response.json();\n        console.log('API Response:', data);\n\n        if (!data.success) {\n            Swal.fire({\n                icon: 'error',\n                title: 'Expert Not Found',\n                text: data.message || 'The expert profile could not be found.',\n                confirmButtonColor: '#3B82F6'\n            }).then(() => {\n                window.location.href = '/index.php?panel=learner&page=browse-experts';\n            });\n            return;\n        }\n\n        const expert = data.data;\n        renderExpertProfile(expert);\n    } catch (error) {\n        console.error('Error loading expert profile:', error);\n        Swal.fire({\n            icon: 'error',\n            title: 'Loading Failed',\n            text: 'Failed to load expert profile. Please try again.',\n            confirmButtonColor: '#3B82F6'\n        }).then(() => {\n            window.location.href = '/index.php?panel=learner&page=browse-experts';\n        });\n    }\n});\n\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\nfunction renderExpertProfile(expert) {\n    document.getElementById('expert-name').textContent = expert.name || 'Expert';\n    document.getElementById('expert-title').textContent = expert.professional_title || 'Expert';\n    document.getElementById('expert-location').textContent = expert.location || 'Available worldwide';\n    \n    const rating = Math.max(0, Math.min(5, Math.floor(Number(expert.avg_rating) || 0)));\n    const ratingStars = '★'.repeat(rating) + '☆'.repeat(5 - rating);\n    document.getElementById('expert-rating-stars').textContent = ratingStars;\n    document.getElementById('expert-rating-value').textContent = `(${(Number(expert.avg_rating) || 0).toFixed(1)})`;\n    document.getElementById('expert-review-count').textContent = `${Number(expert.review_count) || 0} reviews`;\n    \n    const skills = Array.isArray(expert.skills) ? expert.skills : (typeof expert.skills === 'string' ? expert.skills.split(',').map(s => s.trim()) : []);\n    const skillsContainer = document.getElementById('expert-skills');\n    skillsContainer.innerHTML = skills.length > 0 \n        ? skills.map(skill => `<span class=\"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm rounded-full border border-white/30\">${escapeHtml(skill)}</span>`).join('')\n        : '<span class=\"text-white/60 text-sm\">No skills listed</span>';\n    \n    document.getElementById('expert-hourly-rate').textContent = `₹${Number(expert.hourly_rate) || 0}`;\n    \n    const bioElement = document.getElementById('expert-bio');\n    bioElement.textContent = expert.bio || 'No bio available.';\n    \n    document.getElementById('expert-total-sessions').textContent = Number(expert.total_sessions) || 0;\n    document.getElementById('expert-experience-years').textContent = Number(expert.experience_years) || 0;\n    document.getElementById('expert-total-reviews').textContent = Number(expert.review_count) || 0;\n    \n    if (expert.profile_photo) {\n        const photoContainer = document.getElementById('expert-photo');\n        const img = document.createElement('img');\n        img.src = expert.profile_photo;\n        img.alt = expert.name || 'Expert';\n        img.className = 'w-full h-full object-cover';\n        photoContainer.innerHTML = '';\n        photoContainer.appendChild(img);\n    }\n    \n    if (expert.id) {\n        document.getElementById('book-session-btn').href = `/index.php?panel=learner&page=booking&expert_id=${expert.id}`;\n        const sidebarBookBtn = document.getElementById('sidebar-book-btn');\n        if (sidebarBookBtn) {\n            sidebarBookBtn.href = `/index.php?panel=learner&page=booking&expert_id=${expert.id}`;\n        }\n    }\n}\n","size_bytes":4363},"admin-panel/apis/learner/booking.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        $expertId = $_GET['expert_id'] ?? null;\n\n        if (!$expertId) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Expert ID is required']);\n            exit;\n        }\n\n        // Get expert basic info\n        $stmt = $pdo->prepare(\"\n            SELECT \n                u.id,\n                ep.full_name as name,\n                ep.tagline as professional_title,\n                ep.profile_photo,\n                ep.rating_average as avg_rating,\n                ep.total_reviews as review_count,\n                MIN(pricing.amount) as hourly_rate\n            FROM users u\n            INNER JOIN expert_profiles ep ON u.id = ep.user_id\n            LEFT JOIN expert_pricing pricing ON u.id = pricing.expert_id \n                AND pricing.pricing_type = 'per_session' \n                AND pricing.is_active = 1\n            WHERE u.id = ? \n            AND u.role = 'expert'\n            AND ep.verification_status = 'approved'\n            AND u.status = 'active'\n            GROUP BY u.id, ep.full_name, ep.tagline, ep.profile_photo, \n                     ep.rating_average, ep.total_reviews\n        \");\n        $stmt->execute([$expertId]);\n        $expert = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if (!$expert) {\n            http_response_code(404);\n            echo json_encode(['success' => false, 'message' => 'Expert not found']);\n            exit;\n        }\n\n        // Get availability\n        $stmt = $pdo->prepare(\"\n            SELECT day_of_week, start_time, end_time \n            FROM expert_availability \n            WHERE expert_id = ? AND is_active = 1 \n            ORDER BY day_of_week, start_time\n        \");\n        $stmt->execute([$expertId]);\n        $availability = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        // Format rating\n        $expert['avg_rating'] = round((float)$expert['avg_rating'], 1);\n        $expert['hourly_rate'] = $expert['hourly_rate'] ?? 0;\n        $expert['availability'] = $availability;\n\n        echo json_encode([\n            'success' => true,\n            'data' => $expert\n        ]);\n\n    } elseif ($method === 'POST') {\n        // Create new booking\n        // Check if learner is logged in\n        if (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n            http_response_code(401);\n            echo json_encode(['success' => false, 'message' => 'Unauthorized. Please login as learner.']);\n            exit;\n        }\n\n        $data = json_decode(file_get_contents('php://input'), true);\n\n        $learnerId = $_SESSION['user_id'];\n        $expertId = $data['expert_id'] ?? null;\n        $sessionDatetime = $data['session_datetime'] ?? null;\n        $duration = $data['duration'] ?? 60;\n        $amount = $data['amount'] ?? 0;\n\n        if (!$expertId || !$sessionDatetime) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Expert ID and session datetime are required']);\n            exit;\n        }\n\n        // Validate datetime format\n        $datetime = DateTime::createFromFormat('Y-m-d H:i:s', $sessionDatetime);\n        if (!$datetime) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Invalid datetime format']);\n            exit;\n        }\n\n        // Insert booking\n        $stmt = $pdo->prepare(\"\n            INSERT INTO bookings (expert_id, learner_id, session_datetime, duration_minutes, status, created_at, updated_at)\n            VALUES (?, ?, ?, ?, 'pending', NOW(), NOW())\n        \");\n        $stmt->execute([$expertId, $learnerId, $sessionDatetime, $duration]);\n        $bookingId = $pdo->lastInsertId();\n\n        echo json_encode([\n            'success' => true,\n            'message' => 'Booking created successfully',\n            'data' => [\n                'booking_id' => $bookingId,\n                'expert_id' => $expertId,\n                'session_datetime' => $sessionDatetime,\n                'duration' => $duration,\n                'amount' => $amount\n            ]\n        ]);\n\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Booking API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":4598},"admin-panel/apis/learner/payment.php":{"content":"<?php\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'GET') {\n        // Get payment history for learner\n        // Check if learner is logged in\n        if (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n            http_response_code(401);\n            echo json_encode(['success' => false, 'message' => 'Unauthorized. Please login as learner.']);\n            exit;\n        }\n\n        $learnerId = $_SESSION['user_id'];\n\n        $stmt = $pdo->prepare(\"\n            SELECT \n                p.*,\n                b.session_datetime,\n                b.duration_minutes as duration,\n                ep.full_name as expert_name,\n                ep.tagline as expert_title\n            FROM payments p\n            INNER JOIN bookings b ON p.booking_id = b.id\n            INNER JOIN expert_profiles ep ON b.expert_id = ep.user_id\n            WHERE b.learner_id = ?\n            ORDER BY p.created_at DESC\n        \");\n        $stmt->execute([$learnerId]);\n        $payments = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n        echo json_encode([\n            'success' => true,\n            'data' => $payments\n        ]);\n\n    } elseif ($method === 'POST') {\n        // Create new payment\n        // Check if learner is logged in\n        if (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n            http_response_code(401);\n            echo json_encode(['success' => false, 'message' => 'Unauthorized. Please login as learner.']);\n            exit;\n        }\n\n        $data = json_decode(file_get_contents('php://input'), true);\n\n        $learnerId = $_SESSION['user_id'];\n        $expertId = $data['expert_id'] ?? null;\n        $sessionDatetime = $data['session_datetime'] ?? null;\n        $amount = $data['amount'] ?? 0;\n        $duration = $data['duration'] ?? 60;\n        $paymentMethod = $data['payment_method'] ?? 'card';\n\n        if (!$expertId || !$sessionDatetime || !$amount) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Missing required fields']);\n            exit;\n        }\n\n        $pdo->beginTransaction();\n\n        try {\n            // Create booking\n            $stmt = $pdo->prepare(\"\n                INSERT INTO bookings (expert_id, learner_id, session_datetime, duration_minutes, status, created_at, updated_at)\n                VALUES (?, ?, ?, ?, 'confirmed', NOW(), NOW())\n            \");\n            $stmt->execute([$expertId, $learnerId, $sessionDatetime, $duration]);\n            $bookingId = $pdo->lastInsertId();\n\n            // Create payment record\n            $gatewayId = 'CASH_' . time() . '_' . rand(1000, 9999);\n            $paymentStatus = ($paymentMethod === 'cash_test') ? 'success' : 'pending';\n            $paymentType = 'one_time';\n            \n            $stmt = $pdo->prepare(\"\n                INSERT INTO payments (booking_id, learner_id, expert_id, payment_gateway_id, amount, payment_type, status, created_at, updated_at)\n                VALUES (?, ?, ?, ?, ?, ?, ?, NOW(), NOW())\n            \");\n            $stmt->execute([$bookingId, $learnerId, $expertId, $gatewayId, $amount, $paymentType, $paymentStatus]);\n            $paymentId = $pdo->lastInsertId();\n\n            $pdo->commit();\n\n            echo json_encode([\n                'success' => true,\n                'message' => 'Payment processed successfully',\n                'data' => [\n                    'payment_id' => $paymentId,\n                    'booking_id' => $bookingId,\n                    'gateway_id' => $gatewayId,\n                    'amount' => $amount,\n                    'status' => $paymentStatus\n                ]\n            ]);\n\n        } catch (Exception $e) {\n            $pdo->rollBack();\n            throw $e;\n        }\n\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Payment API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":4303},"admin-panel/apis/learner/auth.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\nrequire_once __DIR__ . '/../../../includes/session-config.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'POST') {\n        // Login\n        $input = json_decode(file_get_contents('php://input'), true);\n        \n        $email = $input['email'] ?? '';\n        $password = $input['password'] ?? '';\n        \n        if (empty($email) || empty($password)) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Email and password are required']);\n            exit;\n        }\n        \n        // Fetch user\n        $stmt = $pdo->prepare(\"SELECT u.*, lp.full_name FROM users u \n                               LEFT JOIN learner_profiles lp ON u.id = lp.user_id \n                               WHERE u.email = ? AND u.role = 'learner'\");\n        $stmt->execute([$email]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if (!$user || !password_verify($password, $user['password_hash'])) {\n            http_response_code(401);\n            echo json_encode(['success' => false, 'message' => 'Invalid email or password']);\n            exit;\n        }\n        \n        if ($user['status'] !== 'active') {\n            http_response_code(403);\n            echo json_encode(['success' => false, 'message' => 'Your account is ' . $user['status']]);\n            exit;\n        }\n        \n        // Create session\n        session_regenerate_id(true);\n        $_SESSION['user_id'] = $user['id'];\n        $_SESSION['role'] = $user['role'];\n        $_SESSION['email'] = $user['email'];\n        $_SESSION['full_name'] = $user['full_name'];\n        \n        // Update last login\n        $updateStmt = $pdo->prepare(\"UPDATE users SET last_login = NOW() WHERE id = ?\");\n        $updateStmt->execute([$user['id']]);\n        \n        // Get redirect URL if it exists\n        $redirectUrl = $_SESSION['redirect_after_login'] ?? null;\n        // Clear the redirect URL from session\n        unset($_SESSION['redirect_after_login']);\n        \n        $response = [\n            'success' => true,\n            'message' => 'Login successful',\n            'user' => [\n                'id' => $user['id'],\n                'email' => $user['email'],\n                'full_name' => $user['full_name']\n            ]\n        ];\n        \n        if ($redirectUrl) {\n            $response['redirect_url'] = $redirectUrl;\n        }\n        \n        echo json_encode($response);\n        \n    } elseif ($method === 'DELETE') {\n        // Logout\n        $_SESSION = array();\n        \n        if (isset($_COOKIE[session_name()])) {\n            setcookie(session_name(), '', time() - 3600, '/');\n        }\n        \n        session_destroy();\n        \n        echo json_encode([\n            'success' => true,\n            'message' => 'Logged out successfully'\n        ]);\n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (Exception $e) {\n    error_log(\"Learner Auth API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":3248},"test-expert-session.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\nrequire_once 'admin-panel/apis/connection/pdo.php';\n\necho \"<h2>Session Data:</h2>\";\necho \"<pre>\";\nprint_r($_SESSION);\necho \"</pre>\";\n\nif (isset($_SESSION['expert_id'])) {\n    $expertId = $_SESSION['expert_id'];\n    echo \"<h2>Expert Profile Data:</h2>\";\n    $stmt = $pdo->prepare(\"SELECT * FROM expert_profiles WHERE id = ?\");\n    $stmt->execute([$expertId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    echo \"<pre>\";\n    print_r($profile);\n    echo \"</pre>\";\n    \n    echo \"<h2>Availability Count:</h2>\";\n    $stmt = $pdo->prepare(\"SELECT COUNT(*) as count FROM expert_availability WHERE expert_id = ?\");\n    $stmt->execute([$expertId]);\n    $count = $stmt->fetch(PDO::FETCH_ASSOC);\n    echo \"<pre>\";\n    print_r($count);\n    echo \"</pre>\";\n}\n","size_bytes":800},"admin-panel/apis/expert/upload-photo.php":{"content":"<?php\nsession_start();\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\n// Check if expert is logged in\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'expert') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized access']);\n    exit;\n}\n\n$userId = $_SESSION['user_id'];\n\ntry {\n    if ($_SERVER['REQUEST_METHOD'] !== 'POST') {\n        throw new Exception('Method not allowed');\n    }\n\n    if (!isset($_FILES['photo']) || $_FILES['photo']['error'] !== UPLOAD_ERR_OK) {\n        throw new Exception('No file uploaded or upload error occurred');\n    }\n\n    $file = $_FILES['photo'];\n    $allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];\n    $maxSize = 5 * 1024 * 1024; // 5MB\n\n    // Validate file type using finfo (server-side validation)\n    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n    $mimeType = finfo_file($finfo, $file['tmp_name']);\n    finfo_close($finfo);\n    \n    if (!in_array($mimeType, $allowedTypes)) {\n        throw new Exception('Invalid file type. Only JPG, PNG, and WEBP are allowed');\n    }\n\n    // Validate file size\n    if ($file['size'] > $maxSize) {\n        throw new Exception('File size exceeds 5MB limit');\n    }\n\n    // Create upload directory if it doesn't exist\n    $uploadDir = __DIR__ . '/../../../uploads/profiles/';\n    if (!is_dir($uploadDir)) {\n        mkdir($uploadDir, 0755, true);\n    }\n\n    // Generate unique filename\n    $extension = pathinfo($file['name'], PATHINFO_EXTENSION);\n    $filename = 'profile_' . $userId . '_' . time() . '.' . $extension;\n    $filepath = $uploadDir . $filename;\n\n    // Move uploaded file\n    if (!move_uploaded_file($file['tmp_name'], $filepath)) {\n        throw new Exception('Failed to save uploaded file');\n    }\n\n    // Update database\n    $photoUrl = '/uploads/profiles/' . $filename;\n    $stmt = $pdo->prepare(\"\n        UPDATE expert_profiles \n        SET profile_photo = ? \n        WHERE user_id = ?\n    \");\n    $stmt->execute([$photoUrl, $userId]);\n\n    echo json_encode([\n        'success' => true,\n        'message' => 'Profile photo updated successfully',\n        'photo_url' => $photoUrl\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(400);\n    echo json_encode([\n        'success' => false,\n        'message' => $e->getMessage()\n    ]);\n}\n?>\n","size_bytes":2341},"admin-panel/apis/learner/dashboard.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'learner') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized']);\n    exit;\n}\n\n$userId = $_SESSION['user_id'];\n\ntry {\n    // Get learner profile\n    $stmt = $pdo->prepare(\"SELECT full_name FROM learner_profiles WHERE user_id = ?\");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    // Get statistics\n    $stmt = $pdo->prepare(\"\n        SELECT \n            COUNT(*) as total_sessions,\n            SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed_sessions,\n            COUNT(DISTINCT expert_id) as active_experts\n        FROM bookings \n        WHERE learner_id = ?\n    \");\n    $stmt->execute([$userId]);\n    $stats = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    // Calculate progress percentage\n    $progress = $stats['total_sessions'] > 0 \n        ? round(($stats['completed_sessions'] / $stats['total_sessions']) * 100) \n        : 0;\n    \n    // Get upcoming sessions\n    $stmt = $pdo->prepare(\"\n        SELECT \n            b.id,\n            b.session_datetime,\n            b.duration_minutes,\n            b.status,\n            ep.full_name as expert_name,\n            ep.profile_photo,\n            ep.tagline\n        FROM bookings b\n        INNER JOIN expert_profiles ep ON b.expert_id = ep.user_id\n        WHERE b.learner_id = ?\n        AND b.status IN ('pending', 'confirmed')\n        AND b.session_datetime > NOW()\n        ORDER BY b.session_datetime ASC\n        LIMIT 5\n    \");\n    $stmt->execute([$userId]);\n    $upcomingSessions = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    // Get recent sessions\n    $stmt = $pdo->prepare(\"\n        SELECT \n            b.id,\n            b.session_datetime,\n            b.duration_minutes,\n            b.status,\n            ep.full_name as expert_name,\n            ep.profile_photo,\n            ep.tagline\n        FROM bookings b\n        INNER JOIN expert_profiles ep ON b.expert_id = ep.user_id\n        WHERE b.learner_id = ?\n        AND b.status = 'completed'\n        ORDER BY b.session_datetime DESC\n        LIMIT 10\n    \");\n    $stmt->execute([$userId]);\n    $recentSessions = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    // Get recent activity (bookings and status changes)\n    $stmt = $pdo->prepare(\"\n        SELECT \n            b.id,\n            b.session_datetime,\n            b.status,\n            b.created_at,\n            b.updated_at,\n            ep.full_name as expert_name\n        FROM bookings b\n        INNER JOIN expert_profiles ep ON b.expert_id = ep.user_id\n        WHERE b.learner_id = ?\n        ORDER BY b.updated_at DESC\n        LIMIT 5\n    \");\n    $stmt->execute([$userId]);\n    $recentActivity = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    echo json_encode([\n        'success' => true,\n        'data' => [\n            'profile' => [\n                'full_name' => $profile['full_name'] ?? 'Learner'\n            ],\n            'stats' => [\n                'total_sessions' => (int)$stats['total_sessions'],\n                'completed_sessions' => (int)$stats['completed_sessions'],\n                'progress' => $progress,\n                'active_experts' => (int)$stats['active_experts']\n            ],\n            'upcoming_sessions' => $upcomingSessions,\n            'recent_sessions' => $recentSessions,\n            'recent_activity' => $recentActivity\n        ]\n    ]);\n    \n} catch (PDOException $e) {\n    error_log(\"Learner Dashboard API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":3725},"admin-panel/apis/learner/register.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\nrequire_once __DIR__ . '/../../../includes/session-config.php';\n\n$method = $_SERVER['REQUEST_METHOD'];\n\ntry {\n    if ($method === 'POST') {\n        $input = json_decode(file_get_contents('php://input'), true);\n        \n        $name = $input['name'] ?? '';\n        $mobile = $input['mobile'] ?? '';\n        $email = $input['email'] ?? '';\n        $password = $input['password'] ?? '';\n        \n        if (empty($name) || empty($mobile) || empty($email) || empty($password)) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'All fields are required']);\n            exit;\n        }\n        \n        if (strlen($password) < 8) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Password must be at least 8 characters']);\n            exit;\n        }\n        \n        // Check if email already exists\n        $stmt = $pdo->prepare(\"SELECT id FROM users WHERE email = ?\");\n        $stmt->execute([$email]);\n        if ($stmt->fetch()) {\n            http_response_code(409);\n            echo json_encode(['success' => false, 'message' => 'Email already registered']);\n            exit;\n        }\n        \n        // Check if phone already exists\n        $stmt = $pdo->prepare(\"SELECT id FROM users WHERE phone = ?\");\n        $stmt->execute([$mobile]);\n        if ($stmt->fetch()) {\n            http_response_code(409);\n            echo json_encode(['success' => false, 'message' => 'Mobile number already registered']);\n            exit;\n        }\n        \n        // Hash password\n        $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n        \n        // Begin transaction\n        $pdo->beginTransaction();\n        \n        try {\n            // Insert user\n            $stmt = $pdo->prepare(\"\n                INSERT INTO users (role, email, password_hash, phone, status, created_at)\n                VALUES ('learner', ?, ?, ?, 'active', NOW())\n            \");\n            $stmt->execute([$email, $passwordHash, $mobile]);\n            $userId = $pdo->lastInsertId();\n            \n            // Insert learner profile\n            $stmt = $pdo->prepare(\"\n                INSERT INTO learner_profiles (user_id, full_name, timezone, created_at)\n                VALUES (?, ?, 'Asia/Kolkata', NOW())\n            \");\n            $stmt->execute([$userId, $name]);\n            \n            // Commit transaction\n            $pdo->commit();\n            \n            // Create session\n            session_regenerate_id(true);\n            $_SESSION['user_id'] = $userId;\n            $_SESSION['role'] = 'learner';\n            $_SESSION['email'] = $email;\n            $_SESSION['full_name'] = $name;\n            \n            // Get redirect URL if it exists\n            $redirectUrl = $_SESSION['redirect_after_login'] ?? null;\n            // Clear the redirect URL from session\n            unset($_SESSION['redirect_after_login']);\n            \n            $response = [\n                'success' => true,\n                'message' => 'Registration successful',\n                'user' => [\n                    'id' => $userId,\n                    'email' => $email,\n                    'full_name' => $name\n                ]\n            ];\n            \n            if ($redirectUrl) {\n                $response['redirect_url'] = $redirectUrl;\n            }\n            \n            echo json_encode($response);\n            \n        } catch (PDOException $e) {\n            $pdo->rollBack();\n            throw $e;\n        }\n        \n    } else {\n        http_response_code(405);\n        echo json_encode(['success' => false, 'message' => 'Method not allowed']);\n    }\n} catch (PDOException $e) {\n    error_log(\"Learner Registration API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":3976},"admin-panel/apis/expert/earnings-data.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\n// Check if expert is logged in\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'expert') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized']);\n    exit;\n}\n\n$userId = $_SESSION['user_id'];\n$period = $_GET['period'] ?? 'month';\n$view = $_GET['view'] ?? 'monthly';\n\ntry {\n    // Get expert profile ID\n    $stmt = $pdo->prepare(\"SELECT id FROM expert_profiles WHERE user_id = ?\");\n    $stmt->execute([$userId]);\n    $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if (!$profile) {\n        echo json_encode(['success' => false, 'message' => 'Expert profile not found']);\n        exit;\n    }\n    \n    $expertId = $profile['id'];\n    \n    // Build date filter based on period\n    $dateFilter = '';\n    switch ($period) {\n        case 'last_month':\n            $dateFilter = \"AND MONTH(p.created_at) = MONTH(CURRENT_DATE - INTERVAL 1 MONTH) AND YEAR(p.created_at) = YEAR(CURRENT_DATE - INTERVAL 1 MONTH)\";\n            break;\n        case 'last_3_months':\n            $dateFilter = \"AND p.created_at >= DATE_SUB(CURRENT_DATE, INTERVAL 3 MONTH)\";\n            break;\n        case 'year':\n            $dateFilter = \"AND YEAR(p.created_at) = YEAR(CURRENT_DATE)\";\n            break;\n        case 'month':\n        default:\n            $dateFilter = \"AND MONTH(p.created_at) = MONTH(CURRENT_DATE) AND YEAR(p.created_at) = YEAR(CURRENT_DATE)\";\n            break;\n    }\n    \n    // Build grouping based on view\n    $groupBy = '';\n    $dateFormat = '';\n    switch ($view) {\n        case 'daily':\n            $dateFormat = \"DATE_FORMAT(p.created_at, '%b %d')\";\n            $groupBy = \"DATE(p.created_at)\";\n            break;\n        case 'weekly':\n            $dateFormat = \"DATE_FORMAT(p.created_at, 'Week %u')\";\n            $groupBy = \"WEEK(p.created_at)\";\n            break;\n        case 'monthly':\n        default:\n            $dateFormat = \"DATE_FORMAT(p.created_at, '%b')\";\n            $groupBy = \"MONTH(p.created_at)\";\n            break;\n    }\n    \n    // Fetch earnings data grouped by the specified period\n    $stmt = $pdo->prepare(\"\n        SELECT \n            $dateFormat as label,\n            COALESCE(SUM(p.amount), 0) as total\n        FROM payments p\n        JOIN bookings b ON p.booking_id = b.id\n        WHERE b.expert_id = ? AND p.status = 'completed' $dateFilter\n        GROUP BY $groupBy\n        ORDER BY p.created_at ASC\n    \");\n    $stmt->execute([$expertId]);\n    $results = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    $labels = [];\n    $data = [];\n    \n    foreach ($results as $row) {\n        $labels[] = $row['label'];\n        $data[] = (float)$row['total'];\n    }\n    \n    // If no data, provide empty arrays\n    if (empty($labels)) {\n        $labels = ['No Data'];\n        $data = [0];\n    }\n    \n    echo json_encode([\n        'success' => true,\n        'labels' => $labels,\n        'data' => $data\n    ]);\n    \n} catch (PDOException $e) {\n    error_log(\"Earnings Data API Error: \" . $e->getMessage());\n    http_response_code(500);\n    echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n}\n","size_bytes":3205},"admin-panel/apis/learner/profile.php":{"content":"<?php\nheader('Content-Type: application/json');\nrequire_once __DIR__ . '/../../../includes/session-config.php';\nrequire_once __DIR__ . '/../connection/pdo.php';\n\nsession_start();\n\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized']);\n    exit;\n}\n\n$userId = $_SESSION['user_id'];\n$method = $_SERVER['REQUEST_METHOD'];\n\n// GET - Fetch profile data\nif ($method === 'GET') {\n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT lp.*, u.email, u.phone \n            FROM learner_profiles lp\n            JOIN users u ON u.id = lp.user_id\n            WHERE lp.user_id = ?\n        \");\n        $stmt->execute([$userId]);\n        $profile = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if (!$profile) {\n            http_response_code(404);\n            echo json_encode(['success' => false, 'message' => 'Profile not found']);\n            exit;\n        }\n        \n        echo json_encode(['success' => true, 'profile' => $profile]);\n    } catch (PDOException $e) {\n        error_log(\"Learner Get Profile Error: \" . $e->getMessage());\n        http_response_code(500);\n        echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n    }\n    exit;\n}\n\n// POST - Update profile data or upload photo\nif ($method === 'POST') {\n    // Check if this is a file upload\n    if (isset($_FILES['profile_photo'])) {\n        try {\n            $file = $_FILES['profile_photo'];\n            \n            // Validate file\n            if ($file['error'] !== UPLOAD_ERR_OK) {\n                http_response_code(400);\n                echo json_encode(['success' => false, 'message' => 'File upload error']);\n                exit;\n            }\n            \n            // Check file size (10MB max)\n            if ($file['size'] > 10 * 1024 * 1024) {\n                http_response_code(400);\n                echo json_encode(['success' => false, 'message' => 'File size must be less than 10MB']);\n                exit;\n            }\n            \n            // Validate MIME type using finfo\n            $finfo = finfo_open(FILEINFO_MIME_TYPE);\n            $mimeType = finfo_file($finfo, $file['tmp_name']);\n            finfo_close($finfo);\n            \n            $allowedTypes = ['image/jpeg', 'image/png', 'image/jpg'];\n            if (!in_array($mimeType, $allowedTypes)) {\n                http_response_code(400);\n                echo json_encode(['success' => false, 'message' => 'Only JPG and PNG images are allowed']);\n                exit;\n            }\n            \n            // Generate unique filename\n            $extension = pathinfo($file['name'], PATHINFO_EXTENSION);\n            $filename = 'learner_' . $userId . '_' . time() . '.' . $extension;\n            $uploadDir = __DIR__ . '/../../../uploads/profiles/';\n            \n            if (!is_dir($uploadDir)) {\n                mkdir($uploadDir, 0755, true);\n            }\n            \n            $uploadPath = $uploadDir . $filename;\n            \n            if (move_uploaded_file($file['tmp_name'], $uploadPath)) {\n                $photoPath = '/uploads/profiles/' . $filename;\n                \n                // Update database\n                $stmt = $pdo->prepare(\"UPDATE learner_profiles SET profile_photo = ? WHERE user_id = ?\");\n                $stmt->execute([$photoPath, $userId]);\n                \n                echo json_encode(['success' => true, 'photo_url' => $photoPath]);\n            } else {\n                http_response_code(500);\n                echo json_encode(['success' => false, 'message' => 'Failed to save file']);\n            }\n            \n        } catch (PDOException $e) {\n            error_log(\"Learner Photo Upload Error: \" . $e->getMessage());\n            http_response_code(500);\n            echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n        }\n        exit;\n    }\n    \n    // Regular profile update\n    try {\n        $data = json_decode(file_get_contents('php://input'), true);\n        \n        $fullName = $data['full_name'] ?? '';\n        $phone = $data['phone'] ?? '';\n        $timezone = $data['timezone'] ?? 'Asia/Kolkata';\n        $learningGoals = $data['learning_goals'] ?? '';\n        \n        // Validate required fields\n        if (empty($fullName)) {\n            http_response_code(400);\n            echo json_encode(['success' => false, 'message' => 'Full name is required']);\n            exit;\n        }\n        \n        // Start transaction\n        $pdo->beginTransaction();\n        \n        try {\n            // Update learner profile (only update columns that exist)\n            $stmt = $pdo->prepare(\"\n                UPDATE learner_profiles \n                SET full_name = ?, timezone = ?\n                WHERE user_id = ?\n            \");\n            $stmt->execute([$fullName, $timezone, $userId]);\n            \n            // Update phone in users table\n            if ($phone) {\n                $stmt = $pdo->prepare(\"UPDATE users SET phone = ? WHERE id = ?\");\n                $stmt->execute([$phone, $userId]);\n            }\n            \n            $pdo->commit();\n            \n            echo json_encode(['success' => true, 'message' => 'Profile updated successfully']);\n        } catch (PDOException $e) {\n            $pdo->rollBack();\n            throw $e;\n        }\n        \n    } catch (PDOException $e) {\n        error_log(\"Learner Update Profile Error: \" . $e->getMessage());\n        http_response_code(500);\n        echo json_encode(['success' => false, 'message' => 'Server error occurred']);\n    }\n    exit;\n}\n\nhttp_response_code(405);\necho json_encode(['success' => false, 'message' => 'Method not allowed']);\n?>\n","size_bytes":5752},"includes/currency-config.php":{"content":"<?php\n// Centralized currency configuration for the entire application\n// Default currency settings for Nexpert.ai platform\n\n// Define currency constants (check if not already defined)\nif (!defined('CURRENCY_CODE')) {\n    define('CURRENCY_CODE', 'INR');\n}\nif (!defined('CURRENCY_SYMBOL')) {\n    define('CURRENCY_SYMBOL', '₹');\n}\nif (!defined('CURRENCY_NAME')) {\n    define('CURRENCY_NAME', 'Indian Rupee');\n}\n\n// Currency formatting function\nfunction formatCurrency($amount) {\n    return CURRENCY_SYMBOL . number_format($amount, 0);\n}\n\n// Currency formatting with decimals\nfunction formatCurrencyWithDecimals($amount, $decimals = 2) {\n    return CURRENCY_SYMBOL . number_format($amount, $decimals);\n}","size_bytes":702},"includes/admin-auth-check.php":{"content":"<?php\n// Admin authentication check - include this in all protected admin pages\nrequire_once __DIR__ . '/session-config.php';\n\n// Check if user is logged in and has admin role\nif (!isset($_SESSION['logged_in']) || $_SESSION['logged_in'] !== true || !isset($_SESSION['role']) || $_SESSION['role'] !== 'admin') {\n    // Not logged in or not an admin, redirect to auth page\n    header('Location: ?panel=admin&page=auth');\n    exit;\n}\n\n// Check session timeout (30 minutes of inactivity)\n$timeout_duration = 1800; // 30 minutes in seconds\nif (isset($_SESSION['last_activity']) && (time() - $_SESSION['last_activity']) > $timeout_duration) {\n    // Session expired\n    session_unset();\n    session_destroy();\n    header('Location: ?panel=admin&page=auth&timeout=1');\n    exit;\n}\n\n// Update last activity time\n$_SESSION['last_activity'] = time();\n\n// Make admin data available to the page\n$adminId = $_SESSION['user_id'] ?? $_SESSION['admin_id'] ?? null;\n$adminEmail = $_SESSION['email'] ?? 'admin@nexpert.ai';\n$adminName = $_SESSION['full_name'] ?? $_SESSION['name'] ?? 'Admin';\n?>\n","size_bytes":1077},"expert/expert-my-programs.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Check if user is logged in as expert\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'expert') {\n    $_SESSION['redirect_after_login'] = $_SERVER['REQUEST_URI'];\n    header('Location: ?panel=expert&page=auth');\n    exit;\n}\n\n$page_title = \"My Programs - Nexpert.ai\";\n$panel_type = \"expert\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n<div class=\"max-w-7xl mx-auto px-4 py-8\">\n    <!-- Header with Create Button -->\n    <div class=\"flex flex-col md:flex-row md:items-center md:justify-between mb-8\">\n        <div>\n            <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">My Programs</h1>\n            <p class=\"text-gray-600\">Create and manage structured learning programs for your learners</p>\n        </div>\n        <button id=\"create-program-btn\" class=\"mt-4 md:mt-0 bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition flex items-center gap-2 w-full md:w-auto justify-center\">\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n            </svg>\n            Create New Program\n        </button>\n    </div>\n\n    <!-- Stats Overview -->\n    <div class=\"grid md:grid-cols-4 gap-6 mb-8\">\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p id=\"stats-total-programs\" class=\"text-2xl font-bold text-gray-900\">0</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Total Programs</p>\n                </div>\n                <div class=\"p-3 bg-accent rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p id=\"stats-active-learners\" class=\"text-2xl font-bold text-gray-900\">0</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Active Learners</p>\n                </div>\n                <div class=\"p-3 bg-blue-500 rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p id=\"stats-total-assignments\" class=\"text-2xl font-bold text-gray-900\">0</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Total Assignments</p>\n                </div>\n                <div class=\"p-3 bg-purple-500 rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p id=\"stats-completion-rate\" class=\"text-2xl font-bold text-gray-900\">0%</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Completion Rate</p>\n                </div>\n                <div class=\"p-3 bg-green-500 rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Programs List -->\n    <div class=\"bg-white rounded-lg shadow-lg p-6\">\n        <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Your Programs</h2>\n        \n        <!-- Empty State -->\n        <div id=\"empty-state\" class=\"text-center py-12\">\n            <div class=\"inline-block p-4 bg-amber-50 rounded-full mb-4\">\n                <svg class=\"w-12 h-12 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                </svg>\n            </div>\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">No Programs Created Yet</h3>\n            <p class=\"text-gray-600 mb-6\">Create your first program to start offering structured learning paths to your learners</p>\n            <button class=\"create-program-trigger bg-accent text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition\">\n                Create Your First Program\n            </button>\n        </div>\n\n        <!-- Programs Grid (Hidden by default, will show when programs exist) -->\n        <div id=\"programs-grid\" class=\"hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <!-- Program cards will be inserted here dynamically -->\n        </div>\n    </div>\n</div>\n\n<!-- Create Program Modal -->\n<div id=\"create-program-modal\" class=\"hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n    <div class=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <!-- Modal Header -->\n        <div class=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\n            <h2 class=\"text-2xl font-bold text-gray-900\">Create New Program</h2>\n            <button id=\"close-modal-btn\" class=\"text-gray-400 hover:text-gray-600 transition\">\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n            </button>\n        </div>\n\n        <!-- Modal Body -->\n        <div class=\"p-6\">\n            <!-- Program Details Section -->\n            <div class=\"mb-8\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n                    <svg class=\"w-5 h-5 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                    Program Details\n                </h3>\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Program Title</label>\n                        <input type=\"text\" id=\"program-title\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"e.g., Web Development Mastery\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                        <textarea id=\"program-description\" rows=\"4\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"Describe what learners will achieve in this program\"></textarea>\n                    </div>\n                    <div class=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Duration (weeks)</label>\n                            <input type=\"number\" id=\"program-duration\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"8\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Price (₹)</label>\n                            <input type=\"number\" id=\"program-price\" class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\" placeholder=\"15000\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Milestones & Timeline Section -->\n            <div class=\"mb-8\">\n                <div class=\"flex items-center justify-between mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4\"></path>\n                        </svg>\n                        Milestones & Timeline\n                    </h3>\n                    <button id=\"add-milestone-btn\" class=\"text-accent hover:text-yellow-600 text-sm font-medium flex items-center gap-1\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                        </svg>\n                        Add Milestone\n                    </button>\n                </div>\n                <div id=\"milestones-container\" class=\"space-y-3\">\n                    <!-- Milestone items will be added here -->\n                    <div class=\"text-center py-8 text-gray-400 text-sm\">\n                        No milestones added yet. Click \"Add Milestone\" to create the program timeline.\n                    </div>\n                </div>\n            </div>\n\n            <!-- Assignments Section -->\n            <div class=\"mb-8\">\n                <div class=\"flex items-center justify-between mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                        </svg>\n                        Assignments\n                    </h3>\n                    <button id=\"add-assignment-btn\" class=\"text-accent hover:text-yellow-600 text-sm font-medium flex items-center gap-1\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                        </svg>\n                        Add Assignment\n                    </button>\n                </div>\n                <div id=\"assignments-container\" class=\"space-y-3\">\n                    <div class=\"text-center py-8 text-gray-400 text-sm\">\n                        No assignments added yet. Click \"Add Assignment\" to create tasks for learners.\n                    </div>\n                </div>\n            </div>\n\n            <!-- Learning Resources Section -->\n            <div class=\"mb-8\">\n                <div class=\"flex items-center justify-between mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\n                        <svg class=\"w-5 h-5 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"></path>\n                        </svg>\n                        Learning Resources\n                    </h3>\n                    <button id=\"add-resource-btn\" class=\"text-accent hover:text-yellow-600 text-sm font-medium flex items-center gap-1\">\n                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                        </svg>\n                        Add Resource\n                    </button>\n                </div>\n                <div id=\"resources-container\" class=\"space-y-3\">\n                    <div class=\"text-center py-8 text-gray-400 text-sm\">\n                        No resources added yet. Upload study materials, videos, or documents.\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Modal Footer -->\n        <div class=\"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 border-t\">\n            <button id=\"cancel-modal-btn\" class=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition\">\n                Cancel\n            </button>\n            <button id=\"save-program-btn\" class=\"px-6 py-3 bg-accent text-white rounded-lg hover:bg-yellow-600 transition\">\n                Create Program\n            </button>\n        </div>\n    </div>\n</div>\n\n<script>\n// Modal functionality\nconst modal = document.getElementById('create-program-modal');\nconst createProgramBtn = document.getElementById('create-program-btn');\nconst closeModalBtn = document.getElementById('close-modal-btn');\nconst cancelModalBtn = document.getElementById('cancel-modal-btn');\nconst createTriggers = document.querySelectorAll('.create-program-trigger');\n\n// Open modal\ncreateProgramBtn?.addEventListener('click', () => {\n    modal.classList.remove('hidden');\n    document.body.style.overflow = 'hidden';\n});\n\ncreateTriggers.forEach(trigger => {\n    trigger.addEventListener('click', () => {\n        modal.classList.remove('hidden');\n        document.body.style.overflow = 'hidden';\n    });\n});\n\n// Close modal\nconst closeModal = () => {\n    modal.classList.add('hidden');\n    document.body.style.overflow = 'auto';\n};\n\ncloseModalBtn?.addEventListener('click', closeModal);\ncancelModalBtn?.addEventListener('click', closeModal);\n\n// Close on outside click\nmodal?.addEventListener('click', (e) => {\n    if (e.target === modal) closeModal();\n});\n\n// Add Milestone\nlet milestoneCount = 0;\ndocument.getElementById('add-milestone-btn')?.addEventListener('click', () => {\n    const container = document.getElementById('milestones-container');\n    if (milestoneCount === 0) {\n        container.innerHTML = '';\n    }\n    milestoneCount++;\n    \n    const milestoneHtml = `\n        <div class=\"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <div class=\"flex-1 grid md:grid-cols-3 gap-3\">\n                <input type=\"text\" placeholder=\"Milestone title\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <input type=\"number\" placeholder=\"Week #\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <input type=\"text\" placeholder=\"Deliverable\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n            </div>\n            <button class=\"text-red-500 hover:text-red-700 p-2\" onclick=\"this.parentElement.remove()\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                </svg>\n            </button>\n        </div>\n    `;\n    container.insertAdjacentHTML('beforeend', milestoneHtml);\n});\n\n// Add Assignment\nlet assignmentCount = 0;\ndocument.getElementById('add-assignment-btn')?.addEventListener('click', () => {\n    const container = document.getElementById('assignments-container');\n    if (assignmentCount === 0) {\n        container.innerHTML = '';\n    }\n    assignmentCount++;\n    \n    const assignmentHtml = `\n        <div class=\"p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <div class=\"grid md:grid-cols-2 gap-3 mb-3\">\n                <input type=\"text\" placeholder=\"Assignment title\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <select class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                    <option value=\"\">Select type</option>\n                    <option value=\"project\">Project</option>\n                    <option value=\"quiz\">Quiz</option>\n                    <option value=\"essay\">Essay</option>\n                    <option value=\"presentation\">Presentation</option>\n                </select>\n            </div>\n            <div class=\"flex gap-3\">\n                <textarea placeholder=\"Description\" rows=\"2\" class=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm\"></textarea>\n                <button class=\"text-red-500 hover:text-red-700 p-2\" onclick=\"this.parentElement.parentElement.remove()\">\n                    <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    `;\n    container.insertAdjacentHTML('beforeend', assignmentHtml);\n});\n\n// Add Resource\nlet resourceCount = 0;\ndocument.getElementById('add-resource-btn')?.addEventListener('click', () => {\n    const container = document.getElementById('resources-container');\n    if (resourceCount === 0) {\n        container.innerHTML = '';\n    }\n    resourceCount++;\n    \n    const resourceHtml = `\n        <div class=\"flex gap-3 items-start p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <div class=\"flex-1 grid md:grid-cols-3 gap-3\">\n                <input type=\"text\" placeholder=\"Resource title\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                <select class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n                    <option value=\"\">Type</option>\n                    <option value=\"video\">Video</option>\n                    <option value=\"document\">Document</option>\n                    <option value=\"link\">Link</option>\n                    <option value=\"file\">File</option>\n                </select>\n                <input type=\"text\" placeholder=\"URL or upload\" class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\">\n            </div>\n            <button class=\"text-red-500 hover:text-red-700 p-2\" onclick=\"this.parentElement.remove()\">\n                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                </svg>\n            </button>\n        </div>\n    `;\n    container.insertAdjacentHTML('beforeend', resourceHtml);\n});\n\n\n</script>\n\n<script src=\"/admin-panel/js/expert-programs.js\"></script>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":20508},"learner/learner-my-programs.php":{"content":"<?php\nrequire_once 'includes/session-config.php';\n\n// Check if user is logged in as learner\nif (!isset($_SESSION['user_id']) || !isset($_SESSION['role']) || $_SESSION['role'] !== 'learner') {\n    $_SESSION['redirect_after_login'] = $_SERVER['REQUEST_URI'];\n    header('Location: ?panel=learner&page=auth');\n    exit;\n}\n\n$page_title = \"My Programs - Nexpert.ai\";\n$panel_type = \"learner\";\nrequire_once 'includes/header.php';\nrequire_once 'includes/navigation.php';\n?>\n\n<div class=\"max-w-7xl mx-auto px-4 py-8\">\n    <!-- Header -->\n    <div class=\"mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">My Programs</h1>\n        <p class=\"text-gray-600\">Track your enrolled programs, view assignments, and monitor your progress</p>\n    </div>\n\n    <!-- Stats Overview -->\n    <div class=\"grid md:grid-cols-3 gap-6 mb-8\">\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p class=\"text-2xl font-bold text-gray-900\">0</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Active Programs</p>\n                </div>\n                <div class=\"p-3 bg-primary rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p class=\"text-2xl font-bold text-gray-900\">0</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Pending Assignments</p>\n                </div>\n                <div class=\"p-3 bg-amber-500 rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"bg-white rounded-lg shadow-lg p-6\">\n            <div class=\"flex items-center justify-between\">\n                <div>\n                    <p class=\"text-2xl font-bold text-gray-900\">0%</p>\n                    <p class=\"text-gray-600 text-sm mt-1\">Overall Progress</p>\n                </div>\n                <div class=\"p-3 bg-green-500 rounded-full\">\n                    <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                    </svg>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Programs List -->\n    <div class=\"bg-white rounded-lg shadow-lg p-6\">\n        <div class=\"flex items-center justify-between mb-6\">\n            <h2 class=\"text-xl font-bold text-gray-900\">Enrolled Programs</h2>\n            <a href=\"?panel=learner&page=browse-experts\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition\">\n                Browse Experts\n            </a>\n        </div>\n\n        <!-- Empty State -->\n        <div class=\"text-center py-12\">\n            <div class=\"inline-block p-4 bg-gray-100 rounded-full mb-4\">\n                <svg class=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"></path>\n                </svg>\n            </div>\n            <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">No Programs Yet</h3>\n            <p class=\"text-gray-600 mb-6\">Start your learning journey by enrolling in programs with our expert instructors</p>\n            <a href=\"?panel=learner&page=browse-experts\" class=\"inline-block bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition\">\n                Find an Expert\n            </a>\n        </div>\n    </div>\n\n    <!-- Upcoming Assignments Section -->\n    <div class=\"mt-8 bg-white rounded-lg shadow-lg p-6\">\n        <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Upcoming Assignments</h2>\n        \n        <!-- Empty State -->\n        <div class=\"text-center py-8\">\n            <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"></path>\n            </svg>\n            <p class=\"text-gray-500\">No assignments due</p>\n        </div>\n    </div>\n</div>\n\n<?php require_once 'includes/footer.php'; ?>\n","size_bytes":5551},"admin-panel/apis/expert/programs.php":{"content":"<?php\nrequire_once '../connection/pdo.php';\nsession_start();\n\nheader('Content-Type: application/json');\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Check if user is logged in as expert\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'expert') {\n    http_response_code(401);\n    echo json_encode(['success' => false, 'message' => 'Unauthorized']);\n    exit;\n}\n\n$expert_id = $_SESSION['user_id'];\n\n// GET: Fetch all programs for this expert\nif ($method === 'GET') {\n    try {\n        $stmt = $pdo->prepare(\"\n            SELECT \n                w.*,\n                COUNT(DISTINCT ws.id) as milestone_count,\n                COUNT(DISTINCT a.id) as assignment_count,\n                COUNT(DISTINCT lp.learner_id) as learner_count\n            FROM workflows w\n            LEFT JOIN workflow_steps ws ON w.id = ws.workflow_id\n            LEFT JOIN assignments a ON a.workflow_id = w.id\n            LEFT JOIN learner_progress lp ON lp.workflow_id = w.id\n            WHERE w.expert_id = ? AND w.is_active = 1\n            GROUP BY w.id\n            ORDER BY w.created_at DESC\n        \");\n        $stmt->execute([$expert_id]);\n        $programs = $stmt->fetchAll();\n        \n        // Get stats\n        $stmt = $pdo->prepare(\"\n            SELECT \n                COUNT(DISTINCT w.id) as total_programs,\n                COUNT(DISTINCT lp.learner_id) as active_learners,\n                COUNT(DISTINCT a.id) as total_assignments,\n                IFNULL(AVG(lp.progress_percentage), 0) as avg_completion\n            FROM workflows w\n            LEFT JOIN learner_progress lp ON lp.workflow_id = w.id\n            LEFT JOIN assignments a ON a.workflow_id = w.id\n            WHERE w.expert_id = ? AND w.is_active = 1\n        \");\n        $stmt->execute([$expert_id]);\n        $stats = $stmt->fetch();\n        \n        echo json_encode([\n            'success' => true,\n            'programs' => $programs,\n            'stats' => $stats\n        ]);\n    } catch (PDOException $e) {\n        error_log('Get Programs Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'Failed to fetch programs']);\n    }\n    exit;\n}\n\n// POST: Create new program\nif ($method === 'POST') {\n    $data = json_decode(file_get_contents('php://input'), true);\n    \n    $title = $data['title'] ?? '';\n    $description = $data['description'] ?? '';\n    $duration_weeks = $data['duration_weeks'] ?? null;\n    $price = $data['price'] ?? null;\n    $milestones = $data['milestones'] ?? [];\n    $assignments = $data['assignments'] ?? [];\n    $resources = $data['resources'] ?? [];\n    \n    if (empty($title)) {\n        echo json_encode(['success' => false, 'message' => 'Program title is required']);\n        exit;\n    }\n    \n    try {\n        $pdo->beginTransaction();\n        \n        // Insert program (workflow)\n        $stmt = $pdo->prepare(\"\n            INSERT INTO workflows (expert_id, title, description, duration_weeks, goal_outcome, pricing, created_at, updated_at)\n            VALUES (?, ?, ?, ?, ?, ?, NOW(), NOW())\n        \");\n        $goal_outcome = \"Complete structured program: \" . $title;\n        $pricing_json = json_encode(['amount' => $price, 'currency' => 'INR']);\n        \n        $stmt->execute([\n            $expert_id,\n            $title,\n            $description,\n            $duration_weeks,\n            $goal_outcome,\n            $pricing_json\n        ]);\n        \n        $program_id = $pdo->lastInsertId();\n        \n        // Insert milestones (workflow_steps)\n        if (!empty($milestones)) {\n            $stmt = $pdo->prepare(\"\n                INSERT INTO workflow_steps (workflow_id, step_order, step_type, title, description, duration_minutes)\n                VALUES (?, ?, 'milestone', ?, ?, ?)\n            \");\n            \n            foreach ($milestones as $index => $milestone) {\n                $week_num = $milestone['week'] ?? ($index + 1);\n                $duration_minutes = $week_num * 7 * 24 * 60; // Convert weeks to minutes\n                \n                $stmt->execute([\n                    $program_id,\n                    $index + 1,\n                    $milestone['title'] ?? '',\n                    $milestone['deliverable'] ?? '',\n                    $duration_minutes\n                ]);\n            }\n        }\n        \n        // Insert assignments\n        if (!empty($assignments)) {\n            $stmt = $pdo->prepare(\"\n                INSERT INTO assignments (workflow_id, expert_id, title, description, assignment_type, due_date, created_at)\n                VALUES (?, ?, ?, ?, ?, DATE_ADD(NOW(), INTERVAL ? DAY), NOW())\n            \");\n            \n            foreach ($assignments as $index => $assignment) {\n                $due_days = ($index + 1) * 7; // Each assignment due 1 week apart\n                \n                $stmt->execute([\n                    $program_id,\n                    $expert_id,\n                    $assignment['title'] ?? '',\n                    $assignment['description'] ?? '',\n                    $assignment['type'] ?? 'project',\n                    $due_days\n                ]);\n            }\n        }\n        \n        // Insert resources as workflow step resources\n        if (!empty($resources)) {\n            $stmt = $pdo->prepare(\"\n                INSERT INTO workflow_steps (workflow_id, step_order, step_type, title, description, resources)\n                VALUES (?, ?, 'resource', ?, '', ?)\n            \");\n            \n            $order = count($milestones) + 1;\n            foreach ($resources as $resource) {\n                $resource_json = json_encode([\n                    'type' => $resource['type'] ?? 'document',\n                    'url' => $resource['url'] ?? ''\n                ]);\n                \n                $stmt->execute([\n                    $program_id,\n                    $order++,\n                    $resource['title'] ?? 'Resource',\n                    $resource_json\n                ]);\n            }\n        }\n        \n        $pdo->commit();\n        \n        echo json_encode([\n            'success' => true,\n            'message' => 'Program created successfully',\n            'program_id' => $program_id\n        ]);\n        \n    } catch (PDOException $e) {\n        $pdo->rollBack();\n        error_log('Create Program Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'Failed to create program: ' . $e->getMessage()]);\n    }\n    exit;\n}\n\n// DELETE: Delete a program\nif ($method === 'DELETE') {\n    $program_id = $_GET['id'] ?? null;\n    \n    if (!$program_id) {\n        echo json_encode(['success' => false, 'message' => 'Program ID is required']);\n        exit;\n    }\n    \n    try {\n        // Verify ownership\n        $stmt = $pdo->prepare(\"SELECT expert_id FROM workflows WHERE id = ?\");\n        $stmt->execute([$program_id]);\n        $program = $stmt->fetch();\n        \n        if (!$program || $program['expert_id'] != $expert_id) {\n            echo json_encode(['success' => false, 'message' => 'Unauthorized']);\n            exit;\n        }\n        \n        // Soft delete\n        $stmt = $pdo->prepare(\"UPDATE workflows SET is_active = 0, updated_at = NOW() WHERE id = ?\");\n        $stmt->execute([$program_id]);\n        \n        echo json_encode(['success' => true, 'message' => 'Program deleted successfully']);\n        \n    } catch (PDOException $e) {\n        error_log('Delete Program Error: ' . $e->getMessage());\n        echo json_encode(['success' => false, 'message' => 'Failed to delete program']);\n    }\n    exit;\n}\n\nhttp_response_code(405);\necho json_encode(['success' => false, 'message' => 'Method not allowed']);\n?>\n","size_bytes":7612},"admin-panel/js/expert-programs.js":{"content":"// Load programs and stats on page load\ndocument.addEventListener('DOMContentLoaded', async function() {\n    await loadProgramsAndStats();\n});\n\n// Load programs and stats\nasync function loadProgramsAndStats() {\n    try {\n        const response = await fetch('/admin-panel/apis/expert/programs.php');\n        const result = await response.json();\n        \n        if (result.success) {\n            updateStats(result.stats);\n            displayPrograms(result.programs);\n        }\n    } catch (error) {\n        console.error('Error loading programs:', error);\n    }\n}\n\n// Update stats cards\nfunction updateStats(stats) {\n    document.querySelector('#stats-total-programs').textContent = stats.total_programs || 0;\n    document.querySelector('#stats-active-learners').textContent = stats.active_learners || 0;\n    document.querySelector('#stats-total-assignments').textContent = stats.total_assignments || 0;\n    document.querySelector('#stats-completion-rate').textContent = Math.round(stats.avg_completion || 0) + '%';\n}\n\n// Display programs\nfunction displayPrograms(programs) {\n    const emptyState = document.getElementById('empty-state');\n    const programsGrid = document.getElementById('programs-grid');\n    \n    if (programs.length === 0) {\n        emptyState.classList.remove('hidden');\n        programsGrid.classList.add('hidden');\n    } else {\n        emptyState.classList.add('hidden');\n        programsGrid.classList.remove('hidden');\n        \n        programsGrid.innerHTML = programs.map(program => `\n            <div class=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition\">\n                <div class=\"flex items-start justify-between mb-4\">\n                    <div>\n                        <h3 class=\"text-lg font-bold text-gray-900 mb-2\">${escapeHtml(program.title)}</h3>\n                        <p class=\"text-sm text-gray-600 line-clamp-2\">${escapeHtml(program.description || '')}</p>\n                    </div>\n                    <button onclick=\"deleteProgram(${program.id})\" class=\"text-red-500 hover:text-red-700 p-2\">\n                        <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                        </svg>\n                    </button>\n                </div>\n                \n                <div class=\"grid grid-cols-3 gap-3 mb-4\">\n                    <div class=\"text-center p-3 bg-amber-50 rounded-lg\">\n                        <p class=\"text-2xl font-bold text-accent\">${program.milestone_count}</p>\n                        <p class=\"text-xs text-gray-600\">Milestones</p>\n                    </div>\n                    <div class=\"text-center p-3 bg-purple-50 rounded-lg\">\n                        <p class=\"text-2xl font-bold text-purple-600\">${program.assignment_count}</p>\n                        <p class=\"text-xs text-gray-600\">Assignments</p>\n                    </div>\n                    <div class=\"text-center p-3 bg-blue-50 rounded-lg\">\n                        <p class=\"text-2xl font-bold text-blue-600\">${program.learner_count}</p>\n                        <p class=\"text-xs text-gray-600\">Learners</p>\n                    </div>\n                </div>\n                \n                <div class=\"flex items-center justify-between text-sm\">\n                    <span class=\"text-gray-500\">${program.duration_weeks} weeks</span>\n                    <a href=\"?panel=expert&page=program-details&id=${program.id}\" class=\"text-accent hover:text-yellow-600 font-medium\">View Details →</a>\n                </div>\n            </div>\n        `).join('');\n    }\n}\n\n// Save program\nasync function saveProgram() {\n    const title = document.getElementById('program-title').value.trim();\n    const description = document.getElementById('program-description').value.trim();\n    const duration = parseInt(document.getElementById('program-duration').value) || 0;\n    const price = parseInt(document.getElementById('program-price').value) || 0;\n    \n    if (!title) {\n        Swal.fire({\n            icon: 'error',\n            title: 'Validation Error',\n            text: 'Please enter a program title',\n            confirmButtonColor: '#F59E0B'\n        });\n        return;\n    }\n    \n    // Collect milestones\n    const milestones = [];\n    document.querySelectorAll('#milestones-container > div').forEach(div => {\n        if (div.classList.contains('flex')) {\n            const inputs = div.querySelectorAll('input');\n            if (inputs.length >= 3) {\n                milestones.push({\n                    title: inputs[0].value,\n                    week: parseInt(inputs[1].value) || 1,\n                    deliverable: inputs[2].value\n                });\n            }\n        }\n    });\n    \n    // Collect assignments\n    const assignments = [];\n    document.querySelectorAll('#assignments-container > div').forEach(div => {\n        if (div.querySelector('input')) {\n            const titleInput = div.querySelector('input[placeholder=\"Assignment title\"]');\n            const typeSelect = div.querySelector('select');\n            const descTextarea = div.querySelector('textarea');\n            \n            assignments.push({\n                title: titleInput?.value || '',\n                type: typeSelect?.value || 'project',\n                description: descTextarea?.value || ''\n            });\n        }\n    });\n    \n    // Collect resources\n    const resources = [];\n    document.querySelectorAll('#resources-container > div').forEach(div => {\n        if (div.classList.contains('flex')) {\n            const inputs = div.querySelectorAll('input');\n            const select = div.querySelector('select');\n            \n            if (inputs.length >= 2) {\n                resources.push({\n                    title: inputs[0].value,\n                    type: select?.value || 'document',\n                    url: inputs[1].value\n                });\n            }\n        }\n    });\n    \n    const programData = {\n        title,\n        description,\n        duration_weeks: duration,\n        price,\n        milestones,\n        assignments,\n        resources\n    };\n    \n    try {\n        const response = await fetch('/admin-panel/apis/expert/programs.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(programData)\n        });\n        \n        const result = await response.json();\n        \n        if (result.success) {\n            Swal.fire({\n                icon: 'success',\n                title: 'Program Created!',\n                text: 'Your program has been created successfully.',\n                confirmButtonColor: '#F59E0B'\n            }).then(() => {\n                closeModal();\n                loadProgramsAndStats();\n            });\n        } else {\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: result.message || 'Failed to create program',\n                confirmButtonColor: '#F59E0B'\n            });\n        }\n    } catch (error) {\n        console.error('Save error:', error);\n        Swal.fire({\n            icon: 'error',\n            title: 'Error',\n            text: 'An error occurred while saving the program',\n            confirmButtonColor: '#F59E0B'\n        });\n    }\n}\n\n// Delete program\nasync function deleteProgram(programId) {\n    const result = await Swal.fire({\n        icon: 'warning',\n        title: 'Delete Program?',\n        text: 'Are you sure you want to delete this program? This action cannot be undone.',\n        showCancelButton: true,\n        confirmButtonColor: '#EF4444',\n        cancelButtonColor: '#6B7280',\n        confirmButtonText: 'Yes, delete it'\n    });\n    \n    if (result.isConfirmed) {\n        try {\n            const response = await fetch(`/admin-panel/apis/expert/programs.php?id=${programId}`, {\n                method: 'DELETE'\n            });\n            \n            const data = await response.json();\n            \n            if (data.success) {\n                Swal.fire({\n                    icon: 'success',\n                    title: 'Deleted!',\n                    text: 'Program has been deleted.',\n                    confirmButtonColor: '#F59E0B'\n                });\n                loadProgramsAndStats();\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Error',\n                    text: data.message || 'Failed to delete program',\n                    confirmButtonColor: '#F59E0B'\n                });\n            }\n        } catch (error) {\n            console.error('Delete error:', error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'An error occurred while deleting the program',\n                confirmButtonColor: '#F59E0B'\n            });\n        }\n    }\n}\n\n// Escape HTML helper\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n\n// Update the save button click handler\ndocument.getElementById('save-program-btn')?.addEventListener('click', saveProgram);\n","size_bytes":9364}},"version":1}